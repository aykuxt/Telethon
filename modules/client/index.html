
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://aykuxt.github.io/Telethon/modules/client/" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-5.2.2" name="generator"/>
<title>TelegramClient - Telethon Docs</title>
<link href="../../assets/stylesheets/main.a2408e81.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.a46bcfb3.min.css" rel="stylesheet"/>
<meta content="#3f51b5" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
<link href="../../assets/css/custom.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="amber" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#telegramclient">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Telethon Docs" class="md-header-nav__button md-logo" href="https://aykuxt.github.io/Telethon/" title="Telethon Docs">
<img alt="logo" src="../../assets/images/nav-logo.svg"/>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Telethon Docs
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              TelegramClient
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/LonamiWebs/Telethon/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    LonamiWebs/Telethon
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
          First Steps
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../quick-references/faq/">
          Quick References
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../concepts/strings/">
          Concepts
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../developing/philosophy/">
          Developing
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../examples/word-of-warning/">
          Full API Examples
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../misc/changelog/">
          Miscellaneous
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="./">
          Modules
        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Telethon Docs" class="md-nav__button md-logo" href="https://aykuxt.github.io/Telethon/" title="Telethon Docs">
<img alt="logo" src="../../assets/images/nav-logo.svg"/>
</a>
    Telethon Docs
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/LonamiWebs/Telethon/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    LonamiWebs/Telethon
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1">
      First Steps
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="First Steps" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-1">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        First Steps
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../.." title="Getting Started">
      Getting Started
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/installation/" title="Installation">
      Installation
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/signing-in/" title="Signing In">
      Signing In
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/quick-start/" title="Quick-Start">
      Quick-Start
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/updates/" title="Updates">
      Updates
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/next-steps/" title="Next Steps">
      Next Steps
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Quick References
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Quick References" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-2">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Quick References
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quick-references/faq/" title="FAQ">
      FAQ
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../quick-references/events-reference/" title="Events Reference">
      Events Reference
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Concepts
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Concepts" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Concepts
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/strings/" title="String-based Debugging">
      String-based Debugging
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/entities/" title="Entities">
      Entities
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/updates/" title="Updates in Depth">
      Updates in Depth
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/sessions/" title="Session Files">
      Session Files
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/full-api/" title="The Full API">
      The Full API
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/errors/" title="RPC Errors">
      RPC Errors
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/botapi-vs-mtproto/" title="HTTP Bot API vs MTProto">
      HTTP Bot API vs MTProto
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/asyncio/" title="Mastering asyncio">
      Mastering asyncio
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Developing
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Developing" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-4">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Developing
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/philosophy/" title="Philosophy">
      Philosophy
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/test-servers/" title="Test Servers">
      Test Servers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/project-structure/" title="Project Structure">
      Project Structure
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/coding-style/" title="Coding Style">
      Coding Style
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/testing/" title="Tests">
      Tests
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/understanding-the-type-language/" title="Understanding the Type Language">
      Understanding the Type Language
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/tips-for-porting-the-project/" title="Tips for Porting the Project">
      Tips for Porting the Project
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/telegram-api-in-other-languages/" title="Telegram API in Other Languages">
      Telegram API in Other Languages
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" id="nav-5" type="checkbox"/>
<label class="md-nav__link" for="nav-5">
      Full API Examples
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Full API Examples" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-5">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Full API Examples
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/word-of-warning/" title="A Word of Warning">
      A Word of Warning
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/chats-and-channels/" title="Working with Chats and Channels">
      Working with Chats and Channels
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/users/" title="Users">
      Users
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/working-with-messages/" title="Working with messages">
      Working with messages
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/projects-using-telethon/" title="Projects using Telethon">
      Projects using Telethon
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" id="nav-6" type="checkbox"/>
<label class="md-nav__link" for="nav-6">
      Miscellaneous
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Miscellaneous" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-6">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Miscellaneous
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../misc/changelog/" title="Changelog (Version History)">
      Changelog (Version History)
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../misc/wall-of-shame/" title="Wall of Shame">
      Wall of Shame
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../misc/compatibility-and-convenience/" title="Compatibility and Convenience">
      Compatibility and Convenience
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-7" id="nav-7" type="checkbox"/>
<label class="md-nav__link" for="nav-7">
      Modules
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Modules" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-7">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Modules
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        TelegramClient
        <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg>
</span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="TelegramClient">
      TelegramClient
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegramclient">
    telethon.client.telegramclient
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegramclient.TelegramClient">
    TelegramClient
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient">
    telethon.client.telegrambaseclient
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient">
    TelegramBaseClient
  </a>
<nav aria-label="TelegramBaseClient" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.disconnected">
    disconnected
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.loop">
    loop
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.__call__">
    __call__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.connect">
    connect()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.disconnect">
    disconnect()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.is_connected">
    is_connected()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account">
    telethon.client.account
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account.AccountMethods">
    AccountMethods
  </a>
<nav aria-label="AccountMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account.AccountMethods.end_takeout">
    end_takeout()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account.AccountMethods.takeout">
    takeout()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth">
    telethon.client.auth
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods">
    AuthMethods
  </a>
<nav aria-label="AuthMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.__enter__">
    __enter__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.edit_2fa">
    edit_2fa()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.log_out">
    log_out()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.qr_login">
    qr_login()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.send_code_request">
    send_code_request()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.sign_in">
    sign_in()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.sign_up">
    sign_up()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.start">
    start()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.bots">
    telethon.client.bots
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.bots.BotMethods">
    BotMethods
  </a>
<nav aria-label="BotMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.bots.BotMethods.inline_query">
    inline_query()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.buttons">
    telethon.client.buttons
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.buttons.ButtonMethods">
    ButtonMethods
  </a>
<nav aria-label="ButtonMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.buttons.ButtonMethods.build_reply_markup">
    build_reply_markup()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats">
    telethon.client.chats
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods">
    ChatMethods
  </a>
<nav aria-label="ChatMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.action">
    action()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.edit_admin">
    edit_admin()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.edit_permissions">
    edit_permissions()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.get_admin_log">
    get_admin_log()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.get_participants">
    get_participants()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.get_profile_photos">
    get_profile_photos()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.iter_admin_log">
    iter_admin_log()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.iter_participants">
    iter_participants()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.iter_profile_photos">
    iter_profile_photos()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.kick_participant">
    kick_participant()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs">
    telethon.client.dialogs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods">
    DialogMethods
  </a>
<nav aria-label="DialogMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.conversation">
    conversation()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.delete_dialog">
    delete_dialog()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.edit_folder">
    edit_folder()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.get_dialogs">
    get_dialogs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.get_drafts">
    get_drafts()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.iter_dialogs">
    iter_dialogs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.iter_drafts">
    iter_drafts()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads">
    telethon.client.downloads
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods">
    DownloadMethods
  </a>
<nav aria-label="DownloadMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.download_file">
    download_file()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.download_media">
    download_media()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.download_profile_photo">
    download_profile_photo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.iter_download">
    iter_download()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messageparse">
    telethon.client.messageparse
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messageparse.MessageParseMethods">
    MessageParseMethods
  </a>
<nav aria-label="MessageParseMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messageparse.MessageParseMethods.parse_mode">
    parse_mode
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages">
    telethon.client.messages
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods">
    MessageMethods
  </a>
<nav aria-label="MessageMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.delete_messages">
    delete_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.edit_message">
    edit_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.forward_messages">
    forward_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.get_messages">
    get_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.iter_messages">
    iter_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.pin_message">
    pin_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.send_message">
    send_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.send_read_acknowledge">
    send_read_acknowledge()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates">
    telethon.client.updates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.EventBuilderDict">
    EventBuilderDict
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods">
    UpdateMethods
  </a>
<nav aria-label="UpdateMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.add_event_handler">
    add_event_handler()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.catch_up">
    catch_up()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.list_event_handlers">
    list_event_handlers()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.on">
    on()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.remove_event_handler">
    remove_event_handler()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.run_until_disconnected">
    run_until_disconnected()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads">
    telethon.client.uploads
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads.UploadMethods">
    UploadMethods
  </a>
<nav aria-label="UploadMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads.UploadMethods.send_file">
    send_file()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads.UploadMethods.upload_file">
    upload_file()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users">
    telethon.client.users
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods">
    UserMethods
  </a>
<nav aria-label="UserMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_entity">
    get_entity()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_input_entity">
    get_input_entity()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_me">
    get_me()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_peer_id">
    get_peer_id()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.is_bot">
    is_bot()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.is_user_authorized">
    is_user_authorized()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../events/" title="Update Events">
      Update Events
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../custom/" title="Custom package">
      Custom package
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../utils/" title="Utilities">
      Utilities
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../errors/" title="API Errors">
      API Errors
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sessions/" title="Sessions">
      Sessions
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../network/" title="Connection Modes">
      Connection Modes
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../helpers/" title="Helpers">
      Helpers
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegramclient">
    telethon.client.telegramclient
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegramclient.TelegramClient">
    TelegramClient
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient">
    telethon.client.telegrambaseclient
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient">
    TelegramBaseClient
  </a>
<nav aria-label="TelegramBaseClient" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.disconnected">
    disconnected
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.loop">
    loop
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.__call__">
    __call__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.connect">
    connect()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.disconnect">
    disconnect()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.telegrambaseclient.TelegramBaseClient.is_connected">
    is_connected()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account">
    telethon.client.account
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account.AccountMethods">
    AccountMethods
  </a>
<nav aria-label="AccountMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account.AccountMethods.end_takeout">
    end_takeout()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.account.AccountMethods.takeout">
    takeout()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth">
    telethon.client.auth
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods">
    AuthMethods
  </a>
<nav aria-label="AuthMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.__enter__">
    __enter__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.edit_2fa">
    edit_2fa()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.log_out">
    log_out()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.qr_login">
    qr_login()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.send_code_request">
    send_code_request()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.sign_in">
    sign_in()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.sign_up">
    sign_up()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.auth.AuthMethods.start">
    start()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.bots">
    telethon.client.bots
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.bots.BotMethods">
    BotMethods
  </a>
<nav aria-label="BotMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.bots.BotMethods.inline_query">
    inline_query()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.buttons">
    telethon.client.buttons
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.buttons.ButtonMethods">
    ButtonMethods
  </a>
<nav aria-label="ButtonMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.buttons.ButtonMethods.build_reply_markup">
    build_reply_markup()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats">
    telethon.client.chats
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods">
    ChatMethods
  </a>
<nav aria-label="ChatMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.action">
    action()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.edit_admin">
    edit_admin()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.edit_permissions">
    edit_permissions()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.get_admin_log">
    get_admin_log()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.get_participants">
    get_participants()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.get_profile_photos">
    get_profile_photos()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.iter_admin_log">
    iter_admin_log()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.iter_participants">
    iter_participants()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.iter_profile_photos">
    iter_profile_photos()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.chats.ChatMethods.kick_participant">
    kick_participant()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs">
    telethon.client.dialogs
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods">
    DialogMethods
  </a>
<nav aria-label="DialogMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.conversation">
    conversation()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.delete_dialog">
    delete_dialog()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.edit_folder">
    edit_folder()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.get_dialogs">
    get_dialogs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.get_drafts">
    get_drafts()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.iter_dialogs">
    iter_dialogs()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.dialogs.DialogMethods.iter_drafts">
    iter_drafts()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads">
    telethon.client.downloads
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods">
    DownloadMethods
  </a>
<nav aria-label="DownloadMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.download_file">
    download_file()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.download_media">
    download_media()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.download_profile_photo">
    download_profile_photo()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.downloads.DownloadMethods.iter_download">
    iter_download()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messageparse">
    telethon.client.messageparse
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messageparse.MessageParseMethods">
    MessageParseMethods
  </a>
<nav aria-label="MessageParseMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messageparse.MessageParseMethods.parse_mode">
    parse_mode
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages">
    telethon.client.messages
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods">
    MessageMethods
  </a>
<nav aria-label="MessageMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.delete_messages">
    delete_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.edit_message">
    edit_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.forward_messages">
    forward_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.get_messages">
    get_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.iter_messages">
    iter_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.pin_message">
    pin_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.send_message">
    send_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.messages.MessageMethods.send_read_acknowledge">
    send_read_acknowledge()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates">
    telethon.client.updates
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.EventBuilderDict">
    EventBuilderDict
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods">
    UpdateMethods
  </a>
<nav aria-label="UpdateMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.add_event_handler">
    add_event_handler()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.catch_up">
    catch_up()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.list_event_handlers">
    list_event_handlers()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.on">
    on()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.remove_event_handler">
    remove_event_handler()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.updates.UpdateMethods.run_until_disconnected">
    run_until_disconnected()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads">
    telethon.client.uploads
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads.UploadMethods">
    UploadMethods
  </a>
<nav aria-label="UploadMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads.UploadMethods.send_file">
    send_file()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.uploads.UploadMethods.upload_file">
    upload_file()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users">
    telethon.client.users
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods">
    UserMethods
  </a>
<nav aria-label="UserMethods" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_entity">
    get_entity()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_input_entity">
    get_input_entity()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_me">
    get_me()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.get_peer_id">
    get_peer_id()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.is_bot">
    is_bot()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.client.users.UserMethods.is_user_authorized">
    is_user_authorized()
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/LonamiWebs/Telethon/edit/master/docs/modules/client.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="telegramclient">TelegramClient<a class="headerlink" href="#telegramclient" title="Permanent link">¶</a></h1>
<p>The <a href="https://aykuxt.github.io/Telethon/modules/client/#telethon.client.telegramclient.TelegramClient">TelegramClient</a> aggregates several mixin
classes to provide all the common functionality in a nice, Pythonic interface.
Each mixin has its own methods, which you all can use.</p>
<p><strong>In short, to create a client you must run:</strong></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">api_id</span><span class="p">,</span> <span class="n">api_hash</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Now you can use all client methods listed below, like for example...</span>
    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'Hello to myself!'</span><span class="p">)</span>

<span class="k">with</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</code></pre></div>
<p>You <strong>don't</strong> need to import these <code>AuthMethods</code>, <code>MessageMethods</code>, etc.
Together they are the <a href="https://aykuxt.github.io/Telethon/modules/client/#telethon.client.telegramclient.TelegramClient">TelegramClient</a> and
you can access all of their methods.</p>
<p>See :ref:<code>client-ref</code> for a short summary.</p>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.telegramclient" id="telethon.client.telegramclient" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.telegramclient" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.telegramclient.TelegramClient">
<code>TelegramClient</code>
<a class="headerlink" href="#telethon.client.telegramclient.TelegramClient" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.telegrambaseclient" id="telethon.client.telegrambaseclient" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.telegrambaseclient" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.telegrambaseclient.TelegramBaseClient">
<code>TelegramBaseClient</code>
<a class="headerlink" href="#telethon.client.telegrambaseclient.TelegramBaseClient" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>This is the abstract base class for the client. It defines some
basic stuff like connecting, switching data center, etc, and
leaves the <code>__call__</code> unimplemented.</p>
<p>Arguments
    session (<code>str</code> | <code>telethon.sessions.abstract.Session</code>, <code>None</code>):
        The file name of the session file to be used if a string is
        given (it may be a full path), or the Session instance to be
        used otherwise. If it's <code>None</code>, the session will not be saved,
        and you should call :meth:<code>.log_out()</code> when you're done.</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">Note</span> <span class="n">that</span> <span class="k">if</span> <span class="n">you</span> <span class="n">pass</span> <span class="n">a</span> <span class="n">string</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">a</span> <span class="n">file</span> <span class="k">in</span> <span class="n">the</span> <span class="n">current</span>
    <span class="n">working</span> <span class="n">directory</span><span class="p">,</span> <span class="n">although</span> <span class="n">you</span> <span class="n">can</span> <span class="n">also</span> <span class="n">pass</span> <span class="n">absolute</span> <span class="n">paths</span><span class="p">.</span>

    <span class="n">The</span> <span class="n">session</span> <span class="n">file</span> <span class="n">contains</span> <span class="n">enough</span> <span class="n">information</span> <span class="k">for</span> <span class="n">you</span> <span class="k">to</span> <span class="n">login</span>
    <span class="n">without</span> <span class="n">re</span><span class="o">-</span><span class="n">sending</span> <span class="n">the</span> <span class="n">code</span><span class="p">,</span> <span class="n">so</span> <span class="k">if</span> <span class="n">you</span> <span class="n">have</span> <span class="k">to</span> <span class="n">enter</span> <span class="n">the</span> <span class="n">code</span>
    <span class="n">more</span> <span class="n">than</span> <span class="n">once</span><span class="p">,</span> <span class="n">maybe</span> <span class="n">you</span><span class="s1">'re changing the working directory,</span>
<span class="s1">    renaming or removing the file, or using random names.</span>

<span class="s1">api_id (`int` | `str`):</span>
<span class="s1">    The API ID you obtained from https://my.telegram.org.</span>

<span class="s1">api_hash (`str`):</span>
<span class="s1">    The API ID you obtained from https://my.telegram.org.</span>

<span class="s1">connection (`telethon.network.connection.common.Connection`, optional):</span>
<span class="s1">    The connection instance to be used when creating a new connection</span>
<span class="s1">    to the servers. It **must** be a type.</span>

<span class="s1">    Defaults to `telethon.network.connection.tcpfull.ConnectionTcpFull`.</span>

<span class="s1">use_ipv6 (`bool`, optional):</span>
<span class="s1">    Whether to connect to the servers through IPv6 or not.</span>
<span class="s1">    By default this is `False` as IPv6 support is not</span>
<span class="s1">    too widespread yet.</span>

<span class="s1">proxy (`tuple` | `list` | `dict`, optional):</span>
<span class="s1">    An iterable consisting of the proxy info. If `connection` is</span>
<span class="s1">    one of `MTProxy`, then it should contain MTProxy credentials:</span>
<span class="s1">    ``('</span><span class="n">hostname</span><span class="s1">', port, '</span><span class="n">secret</span><span class="s1">')``. Otherwise, it'</span><span class="n">s</span> <span class="n">meant</span> <span class="k">to</span> <span class="n">store</span>
    <span class="n">function</span> <span class="n">parameters</span> <span class="k">for</span> <span class="n">PySocks</span><span class="p">,</span> <span class="k">like</span> <span class="ss">``</span><span class="p">(</span><span class="n">type</span><span class="p">,</span> <span class="s1">'hostname'</span><span class="p">,</span> <span class="n">port</span><span class="p">)</span><span class="ss">``</span><span class="p">.</span>
    <span class="n">See</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">Anorov</span><span class="o">/</span><span class="n">PySocks</span><span class="c1">#usage-1 for more.</span>

<span class="nf">timeout</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`float`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">timeout</span> <span class="k">in</span> <span class="n">seconds</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">when</span> <span class="n">connecting</span><span class="p">.</span>
    <span class="n">This</span> <span class="k">is</span> <span class="o">**</span><span class="k">not</span><span class="o">**</span> <span class="n">the</span> <span class="n">timeout</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">when</span> <span class="ss">``</span><span class="n">await</span><span class="ss">``</span><span class="s1">'ing for</span>
<span class="s1">    invoked requests, and you should use ``asyncio.wait`` or</span>
<span class="s1">    ``asyncio.wait_for`` for that.</span>

<span class="s1">request_retries (`int` | `None`, optional):</span>
<span class="s1">    How many times a request should be retried. Request are retried</span>
<span class="s1">    when Telegram is having internal issues (due to either</span>
<span class="s1">    ``errors.ServerError`` or ``errors.RpcCallFailError``),</span>
<span class="s1">    when there is a ``errors.FloodWaitError`` less than</span>
<span class="s1">    `flood_sleep_threshold`, or when there'</span><span class="n">s</span> <span class="n">a</span> <span class="n">migrate</span> <span class="n">error</span><span class="p">.</span>

    <span class="n">May</span> <span class="n">take</span> <span class="n">a</span> <span class="n">negative</span> <span class="k">or</span> <span class="ss">`None`</span> <span class="n">value</span> <span class="k">for</span> <span class="n">infinite</span> <span class="n">retries</span><span class="p">,</span> <span class="n">but</span>
    <span class="n">this</span> <span class="k">is</span> <span class="k">not</span> <span class="n">recommended</span><span class="p">,</span> <span class="n">since</span> <span class="n">some</span> <span class="n">requests</span> <span class="n">can</span> <span class="n">always</span> <span class="k">trigger</span>
    <span class="n">a</span> <span class="k">call</span> <span class="nf">fail</span> <span class="p">(</span><span class="n">such</span> <span class="k">as</span> <span class="n">searching</span> <span class="k">for</span> <span class="n">messages</span><span class="p">).</span>

<span class="nf">connection_retries</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">How</span> <span class="n">many</span> <span class="n">times</span> <span class="n">the</span> <span class="n">reconnection</span> <span class="n">should</span> <span class="n">retry</span><span class="p">,</span> <span class="n">either</span> <span class="k">on</span> <span class="n">the</span>
    <span class="n">initial</span> <span class="n">connection</span> <span class="k">or</span> <span class="k">when</span> <span class="n">Telegram</span> <span class="n">disconnects</span> <span class="n">us</span><span class="p">.</span> <span class="n">May</span> <span class="n">be</span>
    <span class="kt">set</span> <span class="k">to</span> <span class="n">a</span> <span class="n">negative</span> <span class="k">or</span> <span class="ss">`None`</span> <span class="n">value</span> <span class="k">for</span> <span class="n">infinite</span> <span class="n">retries</span><span class="p">,</span> <span class="n">but</span>
    <span class="n">this</span> <span class="k">is</span> <span class="k">not</span> <span class="n">recommended</span><span class="p">,</span> <span class="n">since</span> <span class="n">the</span> <span class="n">program</span> <span class="n">can</span> <span class="n">get</span> <span class="n">stuck</span> <span class="k">in</span> <span class="n">an</span>
    <span class="n">infinite</span> <span class="k">loop</span><span class="p">.</span>

<span class="nf">retry_delay</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`float`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">delay</span> <span class="k">in</span> <span class="n">seconds</span> <span class="k">to</span> <span class="n">sleep</span> <span class="k">between</span> <span class="n">automatic</span> <span class="n">reconnections</span><span class="p">.</span>

<span class="nf">auto_reconnect</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">reconnection</span> <span class="n">should</span> <span class="n">be</span> <span class="n">retried</span> <span class="ss">`connection_retries`</span>
    <span class="n">times</span> <span class="n">automatically</span> <span class="k">if</span> <span class="n">Telegram</span> <span class="n">disconnects</span> <span class="n">us</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">sequential_updates</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">By</span> <span class="k">default</span> <span class="n">every</span> <span class="n">incoming</span> <span class="k">update</span> <span class="n">will</span> <span class="k">create</span> <span class="n">a</span> <span class="n">new</span> <span class="n">task</span><span class="p">,</span> <span class="n">so</span>
    <span class="n">you</span> <span class="n">can</span> <span class="n">handle</span> <span class="n">several</span> <span class="n">updates</span> <span class="k">in</span> <span class="n">parallel</span><span class="p">.</span> <span class="n">Some</span> <span class="n">scripts</span> <span class="n">need</span>
    <span class="n">the</span> <span class="k">order</span> <span class="k">in</span> <span class="n">which</span> <span class="n">updates</span> <span class="n">are</span> <span class="n">processed</span> <span class="k">to</span> <span class="n">be</span> <span class="n">sequential</span><span class="p">,</span> <span class="k">and</span>
    <span class="n">this</span> <span class="n">setting</span> <span class="n">allows</span> <span class="n">them</span> <span class="k">to</span> <span class="n">do</span> <span class="n">so</span><span class="p">.</span>

    <span class="k">If</span> <span class="kt">set</span> <span class="k">to</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">incoming</span> <span class="n">updates</span> <span class="n">will</span> <span class="n">be</span> <span class="n">put</span> <span class="k">in</span> <span class="n">a</span> <span class="n">queue</span>
    <span class="k">and</span> <span class="n">processed</span> <span class="n">sequentially</span><span class="p">.</span> <span class="n">This</span> <span class="n">means</span> <span class="n">your</span> <span class="n">event</span> <span class="n">handlers</span>
    <span class="n">should</span> <span class="o">*</span><span class="k">not</span><span class="o">*</span> <span class="n">perform</span> <span class="k">long</span><span class="o">-</span><span class="n">running</span> <span class="n">operations</span> <span class="n">since</span> <span class="n">new</span>
    <span class="n">updates</span> <span class="n">are</span> <span class="n">put</span> <span class="n">inside</span> <span class="n">of</span> <span class="n">an</span> <span class="n">unbounded</span> <span class="n">queue</span><span class="p">.</span>

<span class="nf">flood_sleep_threshold</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`float`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">threshold</span> <span class="n">below</span> <span class="n">which</span> <span class="n">the</span> <span class="n">library</span> <span class="n">should</span> <span class="n">automatically</span>
    <span class="n">sleep</span> <span class="k">on</span> <span class="n">flood</span> <span class="n">wait</span> <span class="k">and</span> <span class="n">slow</span> <span class="n">mode</span> <span class="n">wait</span> <span class="nf">errors</span> <span class="p">(</span><span class="n">inclusive</span><span class="p">).</span> <span class="k">For</span> <span class="n">instance</span><span class="p">,</span> <span class="k">if</span> <span class="n">a</span>
    <span class="ss">``</span><span class="n">FloodWaitError</span><span class="ss">``</span> <span class="k">for</span> <span class="mi">17</span><span class="n">s</span> <span class="n">occurs</span> <span class="k">and</span> <span class="ss">`flood_sleep_threshold`</span>
    <span class="k">is</span> <span class="mi">20</span><span class="n">s</span><span class="p">,</span> <span class="n">the</span> <span class="n">library</span> <span class="n">will</span> <span class="ss">``</span><span class="n">sleep</span><span class="ss">``</span> <span class="n">automatically</span><span class="p">.</span> <span class="k">If</span> <span class="n">the</span> <span class="n">error</span>
    <span class="n">was</span> <span class="k">for</span> <span class="mi">21</span><span class="n">s</span><span class="p">,</span> <span class="n">it</span> <span class="n">would</span> <span class="ss">``</span><span class="n">raise</span> <span class="n">FloodWaitError</span><span class="ss">``</span> <span class="n">instead</span><span class="p">.</span> <span class="k">Values</span>
    <span class="n">larger</span> <span class="n">than</span> <span class="n">a</span> <span class="nf">day</span> <span class="p">(</span><span class="k">like</span> <span class="ss">``</span><span class="kt">float</span><span class="p">(</span><span class="s1">'inf'</span><span class="p">)</span><span class="ss">``</span><span class="p">)</span> <span class="n">will</span> <span class="n">be</span> <span class="n">changed</span> <span class="k">to</span> <span class="n">a</span> <span class="n">day</span><span class="p">.</span>

<span class="nf">device_model</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="s2">"Device model"</span> <span class="k">to</span> <span class="n">be</span> <span class="n">sent</span> <span class="k">when</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">connection</span><span class="p">.</span>
    <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">``</span><span class="n">platform</span><span class="p">.</span><span class="nf">node</span><span class="p">()</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">system_version</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="s2">"System version"</span> <span class="k">to</span> <span class="n">be</span> <span class="n">sent</span> <span class="k">when</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">connection</span><span class="p">.</span>
    <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">``</span><span class="n">platform</span><span class="p">.</span><span class="nf">system</span><span class="p">()</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">app_version</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="s2">"App version"</span> <span class="k">to</span> <span class="n">be</span> <span class="n">sent</span> <span class="k">when</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">connection</span><span class="p">.</span>
    <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">`telethon.version.__version__`</span><span class="p">.</span>

<span class="nf">lang_code</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="s2">"Language code"</span> <span class="k">to</span> <span class="n">be</span> <span class="n">sent</span> <span class="k">when</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">connection</span><span class="p">.</span>
    <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">``</span><span class="s1">'en'</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">system_lang_code</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="s2">"System lang code"</span>  <span class="k">to</span> <span class="n">be</span> <span class="n">sent</span> <span class="k">when</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">connection</span><span class="p">.</span>
    <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">`lang_code`</span><span class="p">.</span>

<span class="k">loop</span> <span class="p">(</span><span class="ss">`asyncio.AbstractEventLoop`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Asyncio</span> <span class="n">event</span> <span class="k">loop</span> <span class="k">to</span> <span class="k">use</span><span class="p">.</span> <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">`asyncio.get_event_loop()`</span>

<span class="nf">base_logger</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`logging.Logger`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Base</span> <span class="n">logger</span> <span class="n">name</span> <span class="k">or</span> <span class="n">instance</span> <span class="k">to</span> <span class="k">use</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">a</span> <span class="ss">`str`</span> <span class="k">is</span> <span class="n">given</span><span class="p">,</span> <span class="n">it</span><span class="s1">'ll be passed to `logging.getLogger()`. If a</span>
<span class="s1">    `logging.Logger` is given, it'</span><span class="n">ll</span> <span class="n">be</span> <span class="n">used</span> <span class="n">directly</span><span class="p">.</span> <span class="k">If</span> <span class="n">something</span>
    <span class="k">else</span> <span class="k">or</span> <span class="n">nothing</span> <span class="k">is</span> <span class="n">given</span><span class="p">,</span> <span class="n">the</span> <span class="k">default</span> <span class="n">logger</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="telethon.client.telegrambaseclient.TelegramBaseClient.disconnected">
<code class="highlight">
disconnected: <span class="n">Future</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.client.telegrambaseclient.TelegramBaseClient.disconnected" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Property with a <code>Future</code> that resolves upon disconnection.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Wait for a disconnection to occur</span>
<span class="err">    !!! try</span>
<span class="err">        await client.disconnected</span>
<span class="err">    except OSError:</span>
<span class="err">        print('Error on disconnect')</span>
</code></pre>
</div>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="telethon.client.telegrambaseclient.TelegramBaseClient.loop">
<code class="highlight">
loop: <span class="n">AbstractEventLoop</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.client.telegrambaseclient.TelegramBaseClient.loop" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Property with the <code>asyncio</code> event loop used by this client.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Download</span> <span class="n">media</span> <span class="k">in</span> <span class="n">the</span> <span class="n">background</span>
    <span class="n">task</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="n">loop_create_task</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">download_media</span><span class="p">())</span>

    <span class="o">#</span> <span class="k">Do</span> <span class="k">some</span> <span class="k">work</span>
    <span class="p">...</span>

    <span class="o">#</span> <span class="k">Join</span> <span class="n">the</span> <span class="n">task</span> <span class="p">(</span><span class="n">wait</span> <span class="k">for</span> <span class="n">it</span> <span class="k">to</span> <span class="n">complete</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">task</span>
</code></pre>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.telegrambaseclient.TelegramBaseClient.__call__">
<code class="highlight language-python">
__call__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.client.telegrambaseclient.TelegramBaseClient.__call__" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Invokes (sends) one or more MTProtoRequests and returns (receives)
their result.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>request</code></td>
<td><code>`TLObject` | `list`</code></td>
<td>
<p>The request or requests to be invoked.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>ordered</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether the requests (if more than one was given) should be
executed sequentially on the server. They run in arbitrary
order by default.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code></code></td>
<td>
<p>The result of the request (often a <code>TLObject</code>) or a list of
results if more than one request was given.</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>telethon\client\telegrambaseclient.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Invokes (sends) one or more MTProtoRequests and returns (receives)</span>
<span class="sd">    their result.</span>

<span class="sd">    Args:</span>
<span class="sd">        request (`TLObject` | `list`):</span>
<span class="sd">            The request or requests to be invoked.</span>

<span class="sd">        ordered (`bool`, optional):</span>
<span class="sd">            Whether the requests (if more than one was given) should be</span>
<span class="sd">            executed sequentially on the server. They run in arbitrary</span>
<span class="sd">            order by default.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the request (often a `TLObject`) or a list of</span>
<span class="sd">        results if more than one request was given.</span>
<span class="sd">    """</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.telegrambaseclient.TelegramBaseClient.connect">
<code class="highlight language-python">
connect<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.telegrambaseclient.TelegramBaseClient.connect" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Connects to Telegram.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="k">Connect</span> <span class="n">means</span> <span class="k">connect</span> <span class="k">and</span> <span class="k">nothing</span> <span class="k">else</span><span class="p">,</span> <span class="k">and</span> <span class="k">only</span> <span class="n">one</span> <span class="n">low</span><span class="o">-</span><span class="k">level</span>
<span class="n">request</span> <span class="k">is</span> <span class="n">made</span> <span class="k">to</span> <span class="k">notify</span> <span class="n">Telegram</span> <span class="n">about</span> <span class="n">which</span> <span class="n">layer</span> <span class="n">we</span> <span class="n">will</span> <span class="n">be</span>
<span class="k">using</span><span class="p">.</span>

<span class="k">Before</span> <span class="n">Telegram</span> <span class="n">sends</span> <span class="n">you</span> <span class="n">updates</span><span class="p">,</span> <span class="n">you</span> <span class="n">need</span> <span class="k">to</span> <span class="n">make</span> <span class="n">a</span> <span class="n">high</span><span class="o">-</span><span class="k">level</span>
<span class="n">request</span><span class="p">,</span> <span class="k">like</span> <span class="o">`</span><span class="n">client</span><span class="p">.</span><span class="n">get_me</span><span class="p">()</span> <span class="o">&lt;</span><span class="n">telethon</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">users</span><span class="p">.</span><span class="n">UserMethods</span><span class="p">.</span><span class="n">get_me</span><span class="o">&gt;`</span><span class="p">,</span>
<span class="k">as</span> <span class="n">described</span> <span class="k">in</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">core</span><span class="p">.</span><span class="n">telegram</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">updates</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    !!! try</span>
<span class="err">        await client.connect()</span>
<span class="err">    except OSError:</span>
<span class="err">        print('Failed to connect')</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\telegrambaseclient.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Connects to Telegram.</span>

<span class="sd">    .. note::</span>

<span class="sd">        Connect means connect and nothing else, and only one low-level</span>
<span class="sd">        request is made to notify Telegram about which layer we will be</span>
<span class="sd">        using.</span>

<span class="sd">        Before Telegram sends you updates, you need to make a high-level</span>
<span class="sd">        request, like `client.get_me() &lt;telethon.client.users.UserMethods.get_me&gt;`,</span>
<span class="sd">        as described in https://core.telegram.org/api/updates.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            try:</span>
<span class="sd">                await client.connect()</span>
<span class="sd">            except OSError:</span>
<span class="sd">                print('Failed to connect')</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sender</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_connection</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">server_address</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">dc_id</span><span class="p">,</span>
        <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="p">,</span>
        <span class="n">loggers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">,</span>
        <span class="n">proxy</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy</span>
    <span class="p">)):</span>
        <span class="c1"># We don't want to init or modify anything if we were already connected</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">auth_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sender</span><span class="o">.</span><span class="n">auth_key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sender</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_init_with</span><span class="p">(</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">help</span><span class="o">.</span><span class="n">GetConfigRequest</span><span class="p">()))</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_updates_handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_loop</span><span class="p">())</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.telegrambaseclient.TelegramBaseClient.disconnect">
<code class="highlight language-python">
disconnect<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.telegrambaseclient.TelegramBaseClient.disconnect" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Disconnects from Telegram.</p>
<p>If the event loop is already running, this method returns a
coroutine that you should await on your own code; otherwise
the loop is ran until said coroutine completes.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # You don't need to use this if you used "with client"</span>
<span class="err">    await client.disconnect()</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\telegrambaseclient.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">disconnect</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Disconnects from Telegram.</span>

<span class="sd">    If the event loop is already running, this method returns a</span>
<span class="sd">    coroutine that you should await on your own code; otherwise</span>
<span class="sd">    the loop is ran until said coroutine completes.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # You don't need to use this if you used "with client"</span>
<span class="sd">            await client.disconnect()</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">is_running</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_coro</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_disconnect_coro</span><span class="p">())</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="c1"># Python 3.5.x complains when called from</span>
            <span class="c1"># `__aexit__` and there were pending updates with:</span>
            <span class="c1">#   "Event loop stopped before Future completed."</span>
            <span class="c1">#</span>
            <span class="c1"># However, it doesn't really make a lot of sense.</span>
            <span class="k">pass</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.telegrambaseclient.TelegramBaseClient.is_connected">
<code class="highlight language-python">
is_connected<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.telegrambaseclient.TelegramBaseClient.is_connected" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns <code>True</code> if the user has connected.</p>
<p>This method is <strong>not</strong> asynchronous (don't use <code>await</code> on it).</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    while client.is_connected():</span>
<span class="err">        await asyncio.sleep(1)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\telegrambaseclient.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>491
492
493
494
495
496
497
498
499
500
501
502
503
504</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_connected</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `True` if the user has connected.</span>

<span class="sd">    This method is **not** asynchronous (don't use ``await`` on it).</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            while client.is_connected():</span>
<span class="sd">                await asyncio.sleep(1)</span>
<span class="sd">    """</span>
    <span class="n">sender</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'_sender'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sender</span> <span class="ow">and</span> <span class="n">sender</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.account" id="telethon.client.account" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.account" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.account.AccountMethods">
<code>AccountMethods</code>
<a class="headerlink" href="#telethon.client.account.AccountMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.account.AccountMethods.end_takeout">
<code class="highlight language-python">
end_takeout<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">success</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.account.AccountMethods.end_takeout" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Finishes the current takeout session.</p>
<p>Arguments
    success (<code>bool</code>):
        Whether the takeout completed successfully or not.</p>
<p>Returns
    <code>True</code> if the operation was successful, <code>False</code> otherwise.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    await client.end_takeout(success=False)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\account.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">end_takeout</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span> <span class="n">success</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Finishes the current takeout session.</span>

<span class="sd">    Arguments</span>
<span class="sd">        success (`bool`):</span>
<span class="sd">            Whether the takeout completed successfully or not.</span>

<span class="sd">    Returns</span>
<span class="sd">        `True` if the operation was successful, `False` otherwise.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            await client.end_takeout(success=False)</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">with</span> <span class="n">_TakeoutClient</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">as</span> <span class="n">takeout</span><span class="p">:</span>
            <span class="n">takeout</span><span class="o">.</span><span class="n">success</span> <span class="o">=</span> <span class="n">success</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.account.AccountMethods.takeout">
<code class="highlight language-python">
takeout<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">finalize</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">contacts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">users</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">chats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">megagroups</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">files</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_file_size</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.account.AccountMethods.takeout" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a :ref:<code>telethon-client</code> which calls methods behind a takeout session.</p>
<p>It does so by creating a proxy object over the current client through
which making requests will use :tl:<code>InvokeWithTakeoutRequest</code> to wrap
them. In other words, returns the current client modified so that
requests are done as a takeout:</p>
<p>Some of the calls made through the takeout session will have lower
flood limits. This is useful if you want to export the data from
conversations or mass-download media, since the rate limits will
be lower. Only some requests will be affected, and you will need
to adjust the <code>wait_time</code> of methods like <code>client.iter_messages
&lt;telethon.client.messages.MessageMethods.iter_messages&gt;</code>.</p>
<p>By default, all parameters are <code>None</code>, and you need to enable those
you plan to use by setting them to either <code>True</code> or <code>False</code>.</p>
<p>You should <code>except errors.TakeoutInitDelayError as e</code>, since this
exception will raise depending on the condition of the session. You
can then access <code>e.seconds</code> to know how long you should wait for
before calling the method again.</p>
<p>There's also a <code>success</code> property available in the takeout proxy
object, so from the <code>with</code> body you can set the boolean result that
will be sent back to Telegram. But if it's left <code>None</code> as by
default, then the action is based on the <code>finalize</code> parameter. If
it's <code>True</code> then the takeout will be finished, and if no exception
occurred during it, then <code>True</code> will be considered as a result.
Otherwise, the takeout will not be finished and its ID will be
preserved for future usage as <code>client.session.takeout_id
&lt;telethon.sessions.abstract.Session.takeout_id&gt;</code>.</p>
<p>Arguments
    finalize (<code>bool</code>):
        Whether the takeout session should be finalized upon
        exit or not.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">contacts</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="kt">Set</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">plan</span> <span class="k">on</span> <span class="n">downloading</span> <span class="n">contacts</span><span class="p">.</span>

<span class="nf">users</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="kt">Set</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">plan</span> <span class="k">on</span> <span class="n">downloading</span> <span class="n">information</span>
    <span class="k">from</span> <span class="n">users</span> <span class="k">and</span> <span class="n">their</span> <span class="n">private</span> <span class="n">conversations</span> <span class="k">with</span> <span class="n">you</span><span class="p">.</span>

<span class="nf">chats</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="kt">Set</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">plan</span> <span class="k">on</span> <span class="n">downloading</span> <span class="n">information</span>
    <span class="k">from</span> <span class="n">small</span> <span class="k">group</span> <span class="n">chats</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="n">messages</span> <span class="k">and</span> <span class="n">media</span><span class="p">.</span>

<span class="nf">megagroups</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="kt">Set</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">plan</span> <span class="k">on</span> <span class="n">downloading</span> <span class="n">information</span>
    <span class="k">from</span> <span class="nf">megagroups</span> <span class="p">(</span><span class="n">channels</span><span class="p">),</span> <span class="n">such</span> <span class="k">as</span> <span class="n">messages</span> <span class="k">and</span> <span class="n">media</span><span class="p">.</span>

<span class="nf">channels</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="kt">Set</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">plan</span> <span class="k">on</span> <span class="n">downloading</span> <span class="n">information</span>
    <span class="k">from</span> <span class="n">broadcast</span> <span class="n">channels</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span> <span class="n">messages</span> <span class="k">and</span> <span class="n">media</span><span class="p">.</span>

<span class="nf">files</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="kt">Set</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">plan</span> <span class="k">on</span> <span class="n">downloading</span> <span class="n">media</span> <span class="k">and</span>
    <span class="n">you</span> <span class="n">don</span><span class="err">'</span><span class="n">t</span> <span class="n">only</span> <span class="n">wish</span> <span class="k">to</span> <span class="n">export</span> <span class="n">messages</span><span class="p">.</span>

<span class="nf">max_file_size</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">maximum</span> <span class="n">file</span> <span class="n">size</span><span class="p">,</span> <span class="k">in</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">that</span> <span class="n">you</span> <span class="n">plan</span>
    <span class="k">to</span> <span class="n">download</span> <span class="k">for</span> <span class="k">each</span> <span class="n">message</span> <span class="k">with</span> <span class="n">media</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">errors</span>

    <span class="err">!!!</span> <span class="k">try</span>
        <span class="n">async</span> <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">takeout</span><span class="p">()</span> <span class="k">as</span> <span class="n">takeout</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span><span class="s1">'me'</span><span class="p">)</span>  <span class="c1"># normal call</span>
            <span class="n">await</span> <span class="n">takeout</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span><span class="s1">'me'</span><span class="p">)</span>  <span class="c1"># wrapped through takeout (less limits)</span>

            <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">takeout</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">wait_time</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
                <span class="o">...</span>  <span class="c1"># Do something with the message</span>

    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">TakeoutInitDelayError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'Must wait'</span><span class="p">,</span> <span class="n">e</span><span class="o">.</span><span class="n">seconds</span><span class="p">,</span> <span class="s1">'before takeout'</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\account.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">takeout</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">finalize</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">contacts</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">users</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">chats</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">megagroups</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">channels</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">files</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_file_size</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'TelegramClient'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Returns a :ref:`telethon-client` which calls methods behind a takeout session.</span>

<span class="sd">    It does so by creating a proxy object over the current client through</span>
<span class="sd">    which making requests will use :tl:`InvokeWithTakeoutRequest` to wrap</span>
<span class="sd">    them. In other words, returns the current client modified so that</span>
<span class="sd">    requests are done as a takeout:</span>

<span class="sd">    Some of the calls made through the takeout session will have lower</span>
<span class="sd">    flood limits. This is useful if you want to export the data from</span>
<span class="sd">    conversations or mass-download media, since the rate limits will</span>
<span class="sd">    be lower. Only some requests will be affected, and you will need</span>
<span class="sd">    to adjust the `wait_time` of methods like `client.iter_messages</span>
<span class="sd">    &lt;telethon.client.messages.MessageMethods.iter_messages&gt;`.</span>

<span class="sd">    By default, all parameters are `None`, and you need to enable those</span>
<span class="sd">    you plan to use by setting them to either `True` or `False`.</span>

<span class="sd">    You should ``except errors.TakeoutInitDelayError as e``, since this</span>
<span class="sd">    exception will raise depending on the condition of the session. You</span>
<span class="sd">    can then access ``e.seconds`` to know how long you should wait for</span>
<span class="sd">    before calling the method again.</span>

<span class="sd">    There's also a `success` property available in the takeout proxy</span>
<span class="sd">    object, so from the `with` body you can set the boolean result that</span>
<span class="sd">    will be sent back to Telegram. But if it's left `None` as by</span>
<span class="sd">    default, then the action is based on the `finalize` parameter. If</span>
<span class="sd">    it's `True` then the takeout will be finished, and if no exception</span>
<span class="sd">    occurred during it, then `True` will be considered as a result.</span>
<span class="sd">    Otherwise, the takeout will not be finished and its ID will be</span>
<span class="sd">    preserved for future usage as `client.session.takeout_id</span>
<span class="sd">    &lt;telethon.sessions.abstract.Session.takeout_id&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        finalize (`bool`):</span>
<span class="sd">            Whether the takeout session should be finalized upon</span>
<span class="sd">            exit or not.</span>

<span class="sd">        contacts (`bool`):</span>
<span class="sd">            Set to `True` if you plan on downloading contacts.</span>

<span class="sd">        users (`bool`):</span>
<span class="sd">            Set to `True` if you plan on downloading information</span>
<span class="sd">            from users and their private conversations with you.</span>

<span class="sd">        chats (`bool`):</span>
<span class="sd">            Set to `True` if you plan on downloading information</span>
<span class="sd">            from small group chats, such as messages and media.</span>

<span class="sd">        megagroups (`bool`):</span>
<span class="sd">            Set to `True` if you plan on downloading information</span>
<span class="sd">            from megagroups (channels), such as messages and media.</span>

<span class="sd">        channels (`bool`):</span>
<span class="sd">            Set to `True` if you plan on downloading information</span>
<span class="sd">            from broadcast channels, such as messages and media.</span>

<span class="sd">        files (`bool`):</span>
<span class="sd">            Set to `True` if you plan on downloading media and</span>
<span class="sd">            you don't only wish to export messages.</span>

<span class="sd">        max_file_size (`int`):</span>
<span class="sd">            The maximum file size, in bytes, that you plan</span>
<span class="sd">            to download for each message with media.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            from telethon import errors</span>

<span class="sd">            try:</span>
<span class="sd">                async with client.takeout() as takeout:</span>
<span class="sd">                    await client.get_messages('me')  # normal call</span>
<span class="sd">                    await takeout.get_messages('me')  # wrapped through takeout (less limits)</span>

<span class="sd">                    async for message in takeout.iter_messages(chat, wait_time=0):</span>
<span class="sd">                        ...  # Do something with the message</span>

<span class="sd">            except errors.TakeoutInitDelayError as e:</span>
<span class="sd">                print('Must wait', e.seconds, 'before takeout')</span>
<span class="sd">    """</span>
    <span class="n">request_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">contacts</span><span class="o">=</span><span class="n">contacts</span><span class="p">,</span>
        <span class="n">message_users</span><span class="o">=</span><span class="n">users</span><span class="p">,</span>
        <span class="n">message_chats</span><span class="o">=</span><span class="n">chats</span><span class="p">,</span>
        <span class="n">message_megagroups</span><span class="o">=</span><span class="n">megagroups</span><span class="p">,</span>
        <span class="n">message_channels</span><span class="o">=</span><span class="n">channels</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
        <span class="n">file_max_size</span><span class="o">=</span><span class="n">max_file_size</span>
    <span class="p">)</span>
    <span class="n">arg_specified</span> <span class="o">=</span> <span class="p">(</span><span class="n">arg</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">request_kwargs</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">takeout_id</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">any</span><span class="p">(</span><span class="n">arg_specified</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">InitTakeoutSessionRequest</span><span class="p">(</span>
            <span class="o">**</span><span class="n">request_kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">request</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">_TakeoutClient</span><span class="p">(</span><span class="n">finalize</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.auth" id="telethon.client.auth" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.auth" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.auth.AuthMethods">
<code>AuthMethods</code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.__enter__">
<code class="highlight language-python">
__enter__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.__enter__" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Helps to cut boilerplate on async context
managers that offer synchronous variants.</p>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">_sync_enter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Helps to cut boilerplate on async context</span>
<span class="sd">    managers that offer synchronous variants.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">'loop'</span><span class="p">):</span>
        <span class="n">loop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">loop</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span>

    <span class="k">if</span> <span class="n">loop</span><span class="o">.</span><span class="n">is_running</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s1">'You must use "async with" if the event loop '</span>
            <span class="s1">'is running (i.e. you are inside an "async def")'</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="fm">__aenter__</span><span class="p">())</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.edit_2fa">
<code class="highlight language-python">
edit_2fa<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">new_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">hint</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">email_code_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.edit_2fa" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Changes the 2FA settings of the logged in user.</p>
<p>Review carefully the parameter explanations before using this method.</p>
<p>Note that this method may be <em>incredibly</em> slow depending on the
prime numbers that must be used during the process to make sure
that everything is safe.</p>
<p>Has no effect if both current and new password are omitted.</p>
<p>Arguments
    current_password (<code>str</code>, optional):
        The current password, to authorize changing to <code>new_password</code>.
        Must be set if changing existing 2FA settings.
        Must <strong>not</strong> be set if 2FA is currently disabled.
        Passing this by itself will remove 2FA (if correct).</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">new_password</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">password</span> <span class="k">to</span> <span class="kt">set</span> <span class="k">as</span> <span class="mi">2</span><span class="n">FA</span><span class="p">.</span>
    <span class="k">If</span> <span class="mi">2</span><span class="n">FA</span> <span class="n">was</span> <span class="n">already</span> <span class="n">enabled</span><span class="p">,</span> <span class="ss">``</span><span class="n">current_password</span><span class="ss">``</span> <span class="o">**</span><span class="n">must</span><span class="o">**</span> <span class="n">be</span> <span class="kt">set</span><span class="p">.</span>
    <span class="n">Leaving</span> <span class="n">this</span> <span class="n">blank</span> <span class="k">or</span> <span class="ss">`None`</span> <span class="n">will</span> <span class="n">remove</span> <span class="n">the</span> <span class="n">password</span><span class="p">.</span>

<span class="nf">hint</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Hint</span> <span class="k">to</span> <span class="n">be</span> <span class="n">displayed</span> <span class="k">by</span> <span class="n">Telegram</span> <span class="k">when</span> <span class="n">it</span> <span class="n">asks</span> <span class="k">for</span> <span class="mi">2</span><span class="n">FA</span><span class="p">.</span>
    <span class="n">Leaving</span> <span class="n">unspecified</span> <span class="k">is</span> <span class="n">highly</span> <span class="n">discouraged</span><span class="p">.</span>
    <span class="n">Has</span> <span class="n">no</span> <span class="n">effect</span> <span class="k">if</span> <span class="ss">``</span><span class="n">new_password</span><span class="ss">``</span> <span class="k">is</span> <span class="k">not</span> <span class="kt">set</span><span class="p">.</span>

<span class="nf">email</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Recovery</span> <span class="k">and</span> <span class="n">verification</span> <span class="n">email</span><span class="p">.</span> <span class="k">If</span> <span class="n">present</span><span class="p">,</span> <span class="n">you</span> <span class="n">must</span> <span class="n">also</span>
    <span class="kt">set</span> <span class="ss">`email_code_callback`</span><span class="p">,</span> <span class="k">else</span> <span class="n">it</span> <span class="n">raises</span> <span class="ss">``</span><span class="n">ValueError</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">email_code_callback</span> <span class="p">(</span><span class="ss">`callable`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="n">an</span> <span class="n">email</span> <span class="k">is</span> <span class="n">provided</span><span class="p">,</span> <span class="n">a</span> <span class="n">callback</span> <span class="n">that</span> <span class="n">returns</span> <span class="n">the</span> <span class="n">code</span> <span class="n">sent</span>
    <span class="k">to</span> <span class="n">it</span> <span class="n">must</span> <span class="n">also</span> <span class="n">be</span> <span class="kt">set</span><span class="p">.</span> <span class="n">This</span> <span class="n">callback</span> <span class="n">may</span> <span class="n">be</span> <span class="n">asynchronous</span><span class="p">.</span>
    <span class="n">It</span> <span class="n">should</span> <span class="k">return</span> <span class="n">a</span> <span class="n">string</span> <span class="k">with</span> <span class="n">the</span> <span class="n">code</span><span class="p">.</span> <span class="n">The</span> <span class="n">length</span> <span class="n">of</span> <span class="n">the</span>
    <span class="n">code</span> <span class="n">will</span> <span class="n">be</span> <span class="n">passed</span> <span class="k">to</span> <span class="n">the</span> <span class="n">callback</span> <span class="k">as</span> <span class="n">an</span> <span class="n">input</span> <span class="n">parameter</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="n">callback</span> <span class="n">returns</span> <span class="n">an</span> <span class="n">invalid</span> <span class="n">code</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">raise</span>
    <span class="ss">``</span><span class="n">CodeInvalidError</span><span class="ss">``</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    <code>True</code> if successful, <code>False</code> otherwise.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Setting</span> <span class="n">a</span> <span class="n">password</span> <span class="k">for</span> <span class="n">your</span> <span class="n">account</span> <span class="n">which</span> <span class="n">didn</span><span class="s1">'t have</span>
<span class="s1">    await client.edit_2fa(new_password='</span><span class="n">I_</span><span class="o">&lt;</span><span class="mi">3</span><span class="n">_Telethon</span><span class="s1">')</span>

<span class="s1">    # Removing the password</span>
<span class="s1">    await client.edit_2fa(current_password='</span><span class="n">I_</span><span class="o">&lt;</span><span class="mi">3</span><span class="n">_Telethon</span><span class="err">'</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit_2fa</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">current_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">new_password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">hint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span>
        <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">email_code_callback</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Changes the 2FA settings of the logged in user.</span>

<span class="sd">    Review carefully the parameter explanations before using this method.</span>

<span class="sd">    Note that this method may be *incredibly* slow depending on the</span>
<span class="sd">    prime numbers that must be used during the process to make sure</span>
<span class="sd">    that everything is safe.</span>

<span class="sd">    Has no effect if both current and new password are omitted.</span>

<span class="sd">    Arguments</span>
<span class="sd">        current_password (`str`, optional):</span>
<span class="sd">            The current password, to authorize changing to ``new_password``.</span>
<span class="sd">            Must be set if changing existing 2FA settings.</span>
<span class="sd">            Must **not** be set if 2FA is currently disabled.</span>
<span class="sd">            Passing this by itself will remove 2FA (if correct).</span>

<span class="sd">        new_password (`str`, optional):</span>
<span class="sd">            The password to set as 2FA.</span>
<span class="sd">            If 2FA was already enabled, ``current_password`` **must** be set.</span>
<span class="sd">            Leaving this blank or `None` will remove the password.</span>

<span class="sd">        hint (`str`, optional):</span>
<span class="sd">            Hint to be displayed by Telegram when it asks for 2FA.</span>
<span class="sd">            Leaving unspecified is highly discouraged.</span>
<span class="sd">            Has no effect if ``new_password`` is not set.</span>

<span class="sd">        email (`str`, optional):</span>
<span class="sd">            Recovery and verification email. If present, you must also</span>
<span class="sd">            set `email_code_callback`, else it raises ``ValueError``.</span>

<span class="sd">        email_code_callback (`callable`, optional):</span>
<span class="sd">            If an email is provided, a callback that returns the code sent</span>
<span class="sd">            to it must also be set. This callback may be asynchronous.</span>
<span class="sd">            It should return a string with the code. The length of the</span>
<span class="sd">            code will be passed to the callback as an input parameter.</span>

<span class="sd">            If the callback returns an invalid code, it will raise</span>
<span class="sd">            ``CodeInvalidError``.</span>

<span class="sd">    Returns</span>
<span class="sd">        `True` if successful, `False` otherwise.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Setting a password for your account which didn't have</span>
<span class="sd">            await client.edit_2fa(new_password='I_&lt;3_Telethon')</span>

<span class="sd">            # Removing the password</span>
<span class="sd">            await client.edit_2fa(current_password='I_&lt;3_Telethon')</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">new_password</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">current_password</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="n">email</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">email_code_callback</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'email present without email_code_callback'</span><span class="p">)</span>

    <span class="n">pwd</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">GetPasswordRequest</span><span class="p">())</span>
    <span class="n">pwd</span><span class="o">.</span><span class="n">new_algo</span><span class="o">.</span><span class="n">salt1</span> <span class="o">+=</span> <span class="n">os</span><span class="o">.</span><span class="n">urandom</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pwd</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">Password</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">pwd</span><span class="o">.</span><span class="n">has_password</span> <span class="ow">and</span> <span class="n">current_password</span><span class="p">:</span>
        <span class="n">current_password</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">current_password</span><span class="p">:</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">pwd_mod</span><span class="o">.</span><span class="n">compute_check</span><span class="p">(</span><span class="n">pwd</span><span class="p">,</span> <span class="n">current_password</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">InputCheckPasswordEmpty</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">new_password</span><span class="p">:</span>
        <span class="n">new_password_hash</span> <span class="o">=</span> <span class="n">pwd_mod</span><span class="o">.</span><span class="n">compute_digest</span><span class="p">(</span>
            <span class="n">pwd</span><span class="o">.</span><span class="n">new_algo</span><span class="p">,</span> <span class="n">new_password</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new_password_hash</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">''</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">UpdatePasswordSettingsRequest</span><span class="p">(</span>
            <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
            <span class="n">new_settings</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">PasswordInputSettings</span><span class="p">(</span>
                <span class="n">new_algo</span><span class="o">=</span><span class="n">pwd</span><span class="o">.</span><span class="n">new_algo</span><span class="p">,</span>
                <span class="n">new_password_hash</span><span class="o">=</span><span class="n">new_password_hash</span><span class="p">,</span>
                <span class="n">hint</span><span class="o">=</span><span class="n">hint</span><span class="p">,</span>
                <span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span>
                <span class="n">new_secure_settings</span><span class="o">=</span><span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">))</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">EmailUnconfirmedError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">email_code_callback</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">code_length</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">code</span><span class="p">):</span>
            <span class="n">code</span> <span class="o">=</span> <span class="k">await</span> <span class="n">code</span>

        <span class="n">code</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">ConfirmPasswordEmailRequest</span><span class="p">(</span><span class="n">code</span><span class="p">))</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.log_out">
<code class="highlight language-python">
log_out<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.log_out" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Logs out Telegram and deletes the current <code>*.session</code> file.</p>
<p>Returns
    <code>True</code> if the operation was successful.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Note: you will need to login again!</span>
<span class="err">    await client.log_out()</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">log_out</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Logs out Telegram and deletes the current ``*.session`` file.</span>

<span class="sd">    Returns</span>
<span class="sd">        `True` if the operation was successful.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Note: you will need to login again!</span>
<span class="sd">            await client.log_out()</span>
<span class="sd">    """</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">LogOutRequest</span><span class="p">())</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">RPCError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_bot</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_self_input_peer</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_authorized</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_state_cache</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.qr_login">
<code class="highlight language-python">
qr_login<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignored_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.qr_login" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Initiates the QR login procedure.</p>
<p>Note that you must be connected before invoking this, as with any
other request.</p>
<p>It is up to the caller to decide how to present the code to the user,
whether it's the URL, using the token bytes directly, or generating
a QR code and displaying it by other means.</p>
<p>See the documentation for <code>QRLogin</code> to see how to proceed after this.</p>
<p>Arguments
    ignored_ids (List[<code>int</code>]):
        List of already logged-in user IDs, to prevent logging in
        twice with the same user.</p>
<p>Returns
    An instance of <code>QRLogin</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">def</span> <span class="n">display_url_as_qr</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
        <span class="n">pass</span>  <span class="o">#</span> <span class="k">do</span> <span class="n">whatever</span> <span class="k">to</span> <span class="k">show</span> <span class="n">url</span> <span class="k">as</span> <span class="n">a</span> <span class="n">qr</span> <span class="k">to</span> <span class="n">the</span> <span class="k">user</span>

    <span class="n">qr_login</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">qr_login</span><span class="p">()</span>
    <span class="n">display_url_as_qr</span><span class="p">(</span><span class="n">qr_login</span><span class="p">.</span><span class="n">url</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Important</span><span class="o">!</span> <span class="n">You</span> <span class="n">need</span> <span class="k">to</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">the</span> <span class="n">login</span> <span class="k">to</span> <span class="n">complete</span><span class="o">!</span>
    <span class="n">await</span> <span class="n">qr_login</span><span class="p">.</span><span class="n">wait</span><span class="p">()</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">qr_login</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span> <span class="n">ignored_ids</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">custom</span><span class="o">.</span><span class="n">QRLogin</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Initiates the QR login procedure.</span>

<span class="sd">    Note that you must be connected before invoking this, as with any</span>
<span class="sd">    other request.</span>

<span class="sd">    It is up to the caller to decide how to present the code to the user,</span>
<span class="sd">    whether it's the URL, using the token bytes directly, or generating</span>
<span class="sd">    a QR code and displaying it by other means.</span>

<span class="sd">    See the documentation for `QRLogin` to see how to proceed after this.</span>

<span class="sd">    Arguments</span>
<span class="sd">        ignored_ids (List[`int`]):</span>
<span class="sd">            List of already logged-in user IDs, to prevent logging in</span>
<span class="sd">            twice with the same user.</span>

<span class="sd">    Returns</span>
<span class="sd">        An instance of `QRLogin`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            def display_url_as_qr(url):</span>
<span class="sd">                pass  # do whatever to show url as a qr to the user</span>

<span class="sd">            qr_login = await client.qr_login()</span>
<span class="sd">            display_url_as_qr(qr_login.url)</span>

<span class="sd">            # Important! You need to wait for the login to complete!</span>
<span class="sd">            await qr_login.wait()</span>
<span class="sd">    """</span>
    <span class="n">qr_login</span> <span class="o">=</span> <span class="n">custom</span><span class="o">.</span><span class="n">QRLogin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignored_ids</span> <span class="ow">or</span> <span class="p">[])</span>
    <span class="k">await</span> <span class="n">qr_login</span><span class="o">.</span><span class="n">recreate</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">qr_login</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.send_code_request">
<code class="highlight language-python">
send_code_request<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phone</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">force_sms</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.send_code_request" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Sends the Telegram code needed to login to the given phone number.</p>
<p>Arguments
    phone (<code>str</code> | <code>int</code>):
        The phone to which the code will be sent.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">force_sms</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="k">to</span> <span class="k">force</span> <span class="n">sending</span> <span class="k">as</span> <span class="n">SMS</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    An instance of :tl:<code>SentCode</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    phone = '+34 123 123 123'</span>
<span class="err">    sent = await client.send_code_request(phone)</span>
<span class="err">    print(sent)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send_code_request</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">phone</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">force_sms</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'types.auth.SentCode'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Sends the Telegram code needed to login to the given phone number.</span>

<span class="sd">    Arguments</span>
<span class="sd">        phone (`str` | `int`):</span>
<span class="sd">            The phone to which the code will be sent.</span>

<span class="sd">        force_sms (`bool`, optional):</span>
<span class="sd">            Whether to force sending as SMS.</span>

<span class="sd">    Returns</span>
<span class="sd">        An instance of :tl:`SentCode`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            phone = '+34 123 123 123'</span>
<span class="sd">            sent = await client.send_code_request(phone)</span>
<span class="sd">            print(sent)</span>
<span class="sd">    """</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">phone</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_phone</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phone</span>
    <span class="n">phone_hash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_phone_code_hash</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">phone_hash</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">SendCodeRequest</span><span class="p">(</span>
                <span class="n">phone</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">api_hash</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">CodeSettings</span><span class="p">()))</span>
        <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">AuthRestartError</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_code_request</span><span class="p">(</span><span class="n">phone</span><span class="p">,</span> <span class="n">force_sms</span><span class="o">=</span><span class="n">force_sms</span><span class="p">)</span>

        <span class="c1"># If we already sent a SMS, do not resend the code (hash may be empty)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">SentCodeTypeSms</span><span class="p">):</span>
            <span class="n">force_sms</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># phone_code_hash may be empty, if it is, do not save it (#1283)</span>
        <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">phone_code_hash</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_phone_code_hash</span><span class="p">[</span><span class="n">phone</span><span class="p">]</span> <span class="o">=</span> <span class="n">phone_hash</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">phone_code_hash</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">force_sms</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_phone</span> <span class="o">=</span> <span class="n">phone</span>

    <span class="k">if</span> <span class="n">force_sms</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span>
            <span class="n">functions</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">ResendCodeRequest</span><span class="p">(</span><span class="n">phone</span><span class="p">,</span> <span class="n">phone_hash</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_phone_code_hash</span><span class="p">[</span><span class="n">phone</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">phone_code_hash</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.sign_in">
<code class="highlight language-python">
sign_in<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phone</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bot_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">phone_code_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.sign_in" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Logs in to Telegram to an existing user or bot account.</p>
<p>You should only use this if you are not authorized yet.</p>
<p>This method will send the code if it's not provided.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="err">In most cases, you should simply use `start()` and not this method.</span>
</code></pre>
</div>
<p>Arguments
    phone (<code>str</code> | <code>int</code>):
        The phone to send the code to if no code was provided,
        or to override the phone that was previously used with
        these requests.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">code</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`int`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">code</span> <span class="n">that</span> <span class="n">Telegram</span> <span class="n">sent</span><span class="p">.</span> <span class="n">Note</span> <span class="n">that</span> <span class="k">if</span> <span class="n">you</span> <span class="n">have</span> <span class="n">sent</span> <span class="n">this</span>
    <span class="n">code</span> <span class="n">through</span> <span class="n">the</span> <span class="n">application</span> <span class="n">itself</span> <span class="n">it</span> <span class="n">will</span> <span class="n">immediately</span>
    <span class="n">expire</span><span class="p">.</span> <span class="k">If</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="n">send</span> <span class="n">the</span> <span class="n">code</span><span class="p">,</span> <span class="n">obfuscate</span> <span class="n">it</span> <span class="n">somehow</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">you</span><span class="err">'</span><span class="n">re</span> <span class="k">not</span> <span class="n">doing</span> <span class="n">any</span> <span class="n">of</span> <span class="n">this</span> <span class="n">you</span> <span class="n">can</span> <span class="k">ignore</span> <span class="n">this</span> <span class="n">note</span><span class="p">.</span>

<span class="nf">password</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">):</span>
    <span class="mi">2</span><span class="n">FA</span> <span class="n">password</span><span class="p">,</span> <span class="n">should</span> <span class="n">be</span> <span class="n">used</span> <span class="k">if</span> <span class="n">a</span> <span class="n">previous</span> <span class="k">call</span> <span class="n">raised</span>
    <span class="ss">``</span><span class="n">SessionPasswordNeededError</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">bot_token</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">):</span>
    <span class="n">Used</span> <span class="k">to</span> <span class="n">sign</span> <span class="k">in</span> <span class="k">as</span> <span class="n">a</span> <span class="n">bot</span><span class="p">.</span> <span class="k">Not</span> <span class="k">all</span> <span class="n">requests</span> <span class="n">will</span> <span class="n">be</span> <span class="n">available</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">should</span> <span class="n">be</span> <span class="n">the</span> <span class="n">hash</span> <span class="n">the</span> <span class="ss">`@BotFather &lt;https://t.me/BotFather&gt;`</span><span class="n">_</span>
    <span class="n">gave</span> <span class="n">you</span><span class="p">.</span>

<span class="nf">phone_code_hash</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">hash</span> <span class="n">returned</span> <span class="k">by</span> <span class="ss">`send_code_request`</span><span class="p">.</span> <span class="n">This</span> <span class="n">can</span> <span class="n">be</span> <span class="k">left</span> <span class="k">as</span>
    <span class="ss">`None`</span> <span class="k">to</span> <span class="k">use</span> <span class="n">the</span> <span class="n">last</span> <span class="n">hash</span> <span class="n">known</span> <span class="k">for</span> <span class="n">the</span> <span class="n">phone</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The signed in user, or the information about
    :meth:<code>send_code_request</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">phone</span> <span class="o">=</span> <span class="s1">'+34 123 123 123'</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sign_in</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span>  <span class="o">#</span> <span class="n">send</span> <span class="n">code</span>

    <span class="n">code</span> <span class="o">=</span> <span class="k">input</span><span class="p">(</span><span class="s1">'enter code: '</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sign_in</span><span class="p">(</span><span class="n">phone</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">sign_in</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">phone</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">code</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">bot_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">phone_code_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'typing.Union[types.User, types.auth.SentCode]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Logs in to Telegram to an existing user or bot account.</span>

<span class="sd">    You should only use this if you are not authorized yet.</span>

<span class="sd">    This method will send the code if it's not provided.</span>

<span class="sd">    .. note::</span>

<span class="sd">        In most cases, you should simply use `start()` and not this method.</span>

<span class="sd">    Arguments</span>
<span class="sd">        phone (`str` | `int`):</span>
<span class="sd">            The phone to send the code to if no code was provided,</span>
<span class="sd">            or to override the phone that was previously used with</span>
<span class="sd">            these requests.</span>

<span class="sd">        code (`str` | `int`):</span>
<span class="sd">            The code that Telegram sent. Note that if you have sent this</span>
<span class="sd">            code through the application itself it will immediately</span>
<span class="sd">            expire. If you want to send the code, obfuscate it somehow.</span>
<span class="sd">            If you're not doing any of this you can ignore this note.</span>

<span class="sd">        password (`str`):</span>
<span class="sd">            2FA password, should be used if a previous call raised</span>
<span class="sd">            ``SessionPasswordNeededError``.</span>

<span class="sd">        bot_token (`str`):</span>
<span class="sd">            Used to sign in as a bot. Not all requests will be available.</span>
<span class="sd">            This should be the hash the `@BotFather &lt;https://t.me/BotFather&gt;`_</span>
<span class="sd">            gave you.</span>

<span class="sd">        phone_code_hash (`str`, optional):</span>
<span class="sd">            The hash returned by `send_code_request`. This can be left as</span>
<span class="sd">            `None` to use the last hash known for the phone to be used.</span>

<span class="sd">    Returns</span>
<span class="sd">        The signed in user, or the information about</span>
<span class="sd">        :meth:`send_code_request`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            phone = '+34 123 123 123'</span>
<span class="sd">            await client.sign_in(phone)  # send code</span>

<span class="sd">            code = input('enter code: ')</span>
<span class="sd">            await client.sign_in(phone, code)</span>
<span class="sd">    """</span>
    <span class="n">me</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_me</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">me</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">me</span>

    <span class="k">if</span> <span class="n">phone</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">code</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_code_request</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">code</span><span class="p">:</span>
        <span class="n">phone</span><span class="p">,</span> <span class="n">phone_code_hash</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_parse_phone_and_hash</span><span class="p">(</span><span class="n">phone</span><span class="p">,</span> <span class="n">phone_code_hash</span><span class="p">)</span>

        <span class="c1"># May raise PhoneCodeEmptyError, PhoneCodeExpiredError,</span>
        <span class="c1"># PhoneCodeHashEmptyError or PhoneCodeInvalidError.</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">SignInRequest</span><span class="p">(</span>
            <span class="n">phone</span><span class="p">,</span> <span class="n">phone_code_hash</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">password</span><span class="p">:</span>
        <span class="n">pwd</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">GetPasswordRequest</span><span class="p">())</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">CheckPasswordRequest</span><span class="p">(</span>
            <span class="n">pwd_mod</span><span class="o">.</span><span class="n">compute_check</span><span class="p">(</span><span class="n">pwd</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">bot_token</span><span class="p">:</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">ImportBotAuthorizationRequest</span><span class="p">(</span>
            <span class="n">flags</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bot_auth_token</span><span class="o">=</span><span class="n">bot_token</span><span class="p">,</span>
            <span class="n">api_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">api_id</span><span class="p">,</span> <span class="n">api_hash</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">api_hash</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">'You must provide a phone and a code the first time, '</span>
            <span class="s1">'and a password only if an RPCError was raised before.'</span>
        <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">AuthorizationSignUpRequired</span><span class="p">):</span>
        <span class="c1"># Emulate pre-layer 104 behaviour</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tos</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">terms_of_service</span>
        <span class="k">raise</span> <span class="n">errors</span><span class="o">.</span><span class="n">PhoneNumberUnoccupiedError</span><span class="p">(</span><span class="n">request</span><span class="o">=</span><span class="n">request</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_login</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.sign_up">
<code class="highlight language-python">
sign_up<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phone</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">phone_code_hash</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.sign_up" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Signs up to Telegram as a new user account.</p>
<p>Use this if you don't have an account yet.</p>
<p>You must call <code>send_code_request</code> first.</p>
<p><strong>By using this method you're agreeing to Telegram's
Terms of Service. This is required and your account
will be banned otherwise.</strong> See <a href="https://telegram.org/tos">https://telegram.org/tos</a>
and <a href="https://core.telegram.org/api/terms">https://core.telegram.org/api/terms</a>.</p>
<p>Arguments
    code (<code>str</code> | <code>int</code>):
        The code sent by Telegram</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">first_name</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">first</span> <span class="n">name</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">by</span> <span class="n">the</span> <span class="n">new</span> <span class="n">account</span><span class="p">.</span>

<span class="nf">last_name</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span>
    <span class="n">Optional</span> <span class="n">last</span> <span class="n">name</span><span class="p">.</span>

<span class="nf">phone</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">phone</span> <span class="k">to</span> <span class="n">sign</span> <span class="n">up</span><span class="p">.</span> <span class="n">This</span> <span class="n">will</span> <span class="n">be</span> <span class="n">the</span> <span class="n">last</span> <span class="n">phone</span> <span class="n">used</span> <span class="k">by</span>
    <span class="k">default</span> <span class="p">(</span><span class="n">you</span> <span class="n">normally</span> <span class="n">don</span><span class="err">'</span><span class="n">t</span> <span class="n">need</span> <span class="k">to</span> <span class="kt">set</span> <span class="n">this</span><span class="p">).</span>

<span class="nf">phone_code_hash</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">hash</span> <span class="n">returned</span> <span class="k">by</span> <span class="ss">`send_code_request`</span><span class="p">.</span> <span class="n">This</span> <span class="n">can</span> <span class="n">be</span> <span class="k">left</span> <span class="k">as</span>
    <span class="ss">`None`</span> <span class="k">to</span> <span class="k">use</span> <span class="n">the</span> <span class="n">last</span> <span class="n">hash</span> <span class="n">known</span> <span class="k">for</span> <span class="n">the</span> <span class="n">phone</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The new created :tl:<code>User</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">phone</span> <span class="o">=</span> <span class="s1">'+34 123 123 123'</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_code_request</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span>

    <span class="n">code</span> <span class="o">=</span> <span class="k">input</span><span class="p">(</span><span class="s1">'enter code: '</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">sign_up</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s1">'Anna'</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="s1">'Banana'</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">sign_up</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">code</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span>
        <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">phone</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">phone_code_hash</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'types.User'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Signs up to Telegram as a new user account.</span>

<span class="sd">    Use this if you don't have an account yet.</span>

<span class="sd">    You must call `send_code_request` first.</span>

<span class="sd">    **By using this method you're agreeing to Telegram's</span>
<span class="sd">    Terms of Service. This is required and your account</span>
<span class="sd">    will be banned otherwise.** See https://telegram.org/tos</span>
<span class="sd">    and https://core.telegram.org/api/terms.</span>

<span class="sd">    Arguments</span>
<span class="sd">        code (`str` | `int`):</span>
<span class="sd">            The code sent by Telegram</span>

<span class="sd">        first_name (`str`):</span>
<span class="sd">            The first name to be used by the new account.</span>

<span class="sd">        last_name (`str`, optional)</span>
<span class="sd">            Optional last name.</span>

<span class="sd">        phone (`str` | `int`, optional):</span>
<span class="sd">            The phone to sign up. This will be the last phone used by</span>
<span class="sd">            default (you normally don't need to set this).</span>

<span class="sd">        phone_code_hash (`str`, optional):</span>
<span class="sd">            The hash returned by `send_code_request`. This can be left as</span>
<span class="sd">            `None` to use the last hash known for the phone to be used.</span>

<span class="sd">    Returns</span>
<span class="sd">        The new created :tl:`User`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            phone = '+34 123 123 123'</span>
<span class="sd">            await client.send_code_request(phone)</span>

<span class="sd">            code = input('enter code: ')</span>
<span class="sd">            await client.sign_up(code, first_name='Anna', last_name='Banana')</span>
<span class="sd">    """</span>
    <span class="n">me</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_me</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">me</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">me</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tos</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tos</span><span class="o">.</span><span class="n">text</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_mode</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_mode</span><span class="o">.</span><span class="n">unparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tos</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tos</span><span class="o">.</span><span class="n">entities</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tos</span><span class="o">.</span><span class="n">text</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">"</span><span class="si">{}</span><span class="se">\n</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t</span><span class="p">))</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

    <span class="n">phone</span><span class="p">,</span> <span class="n">phone_code_hash</span> <span class="o">=</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_phone_and_hash</span><span class="p">(</span><span class="n">phone</span><span class="p">,</span> <span class="n">phone_code_hash</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">auth</span><span class="o">.</span><span class="n">SignUpRequest</span><span class="p">(</span>
        <span class="n">phone_number</span><span class="o">=</span><span class="n">phone</span><span class="p">,</span>
        <span class="n">phone_code_hash</span><span class="o">=</span><span class="n">phone_code_hash</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="n">first_name</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="n">last_name</span>
    <span class="p">))</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tos</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="p">(</span>
            <span class="n">functions</span><span class="o">.</span><span class="n">help</span><span class="o">.</span><span class="n">AcceptTermsOfServiceRequest</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tos</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_on_login</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.auth.AuthMethods.start">
<code class="highlight language-python">
start<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phone</span><span class="o">=&lt;</span><span class="n">function</span> <span class="n">AuthMethods</span><span class="o">.&lt;</span><span class="k">lambda</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x000001AC50444EE0</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">password</span><span class="o">=&lt;</span><span class="n">function</span> <span class="n">AuthMethods</span><span class="o">.&lt;</span><span class="k">lambda</span><span class="o">&gt;</span> <span class="n">at</span> <span class="mh">0x000001AC50444F70</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">bot_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_sms</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">code_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">first_name</span><span class="o">=</span><span class="s1">'New User'</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="n">max_attempts</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.auth.AuthMethods.start" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Starts the client (connects and logs in if necessary).</p>
<p>By default, this method will be interactive (asking for
user input if needed), and will handle 2FA if enabled too.</p>
<p>If the phone doesn't belong to an existing account (and will hence
<code>sign_up</code> for a new one),  <strong>you are agreeing to Telegram's
Terms of Service. This is required and your account
will be banned otherwise.</strong> See <a href="https://telegram.org/tos">https://telegram.org/tos</a>
and <a href="https://core.telegram.org/api/terms">https://core.telegram.org/api/terms</a>.</p>
<p>If the event loop is already running, this method returns a
coroutine that you should await on your own code; otherwise
the loop is ran until said coroutine completes.</p>
<p>Arguments
    phone (<code>str</code> | <code>int</code> | <code>callable</code>):
        The phone (or callable without arguments to get it)
        to which the code will be sent. If a bot-token-like
        string is given, it will be used as such instead.
        The argument may be a coroutine.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">password</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="ss">`callable`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">password</span> <span class="k">for</span> <span class="mi">2</span> <span class="n">Factor</span> <span class="nf">Authentication</span> <span class="p">(</span><span class="mi">2</span><span class="n">FA</span><span class="p">).</span>
    <span class="n">This</span> <span class="k">is</span> <span class="n">only</span> <span class="n">required</span> <span class="k">if</span> <span class="n">it</span> <span class="k">is</span> <span class="n">enabled</span> <span class="k">in</span> <span class="n">your</span> <span class="n">account</span><span class="p">.</span>
    <span class="n">The</span> <span class="n">argument</span> <span class="n">may</span> <span class="n">be</span> <span class="n">a</span> <span class="n">coroutine</span><span class="p">.</span>

<span class="nf">bot_token</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">):</span>
    <span class="n">Bot</span> <span class="n">Token</span> <span class="n">obtained</span> <span class="k">by</span> <span class="ss">`@BotFather &lt;https://t.me/BotFather&gt;`</span><span class="n">_</span>
    <span class="k">to</span> <span class="n">log</span> <span class="k">in</span> <span class="k">as</span> <span class="n">a</span> <span class="n">bot</span><span class="p">.</span> <span class="n">Cannot</span> <span class="n">be</span> <span class="n">specified</span> <span class="k">with</span> <span class="ss">``</span><span class="n">phone</span><span class="ss">``</span> <span class="p">(</span><span class="n">only</span>
    <span class="n">one</span> <span class="n">of</span> <span class="n">either</span> <span class="n">allowed</span><span class="p">).</span>

<span class="nf">force_sms</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="k">to</span> <span class="k">force</span> <span class="n">sending</span> <span class="n">the</span> <span class="n">code</span> <span class="n">request</span> <span class="k">as</span> <span class="n">SMS</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">only</span> <span class="n">makes</span> <span class="n">sense</span> <span class="k">when</span> <span class="n">signing</span> <span class="k">in</span> <span class="k">with</span> <span class="n">a</span> <span class="ss">`phone`</span><span class="p">.</span>

<span class="nf">code_callback</span> <span class="p">(</span><span class="ss">`callable`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">A</span> <span class="n">callable</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="k">to</span> <span class="n">retrieve</span> <span class="n">the</span> <span class="n">Telegram</span>
    <span class="n">login</span> <span class="n">code</span><span class="p">.</span> <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">`input()`</span><span class="p">.</span>
    <span class="n">The</span> <span class="n">argument</span> <span class="n">may</span> <span class="n">be</span> <span class="n">a</span> <span class="n">coroutine</span><span class="p">.</span>

<span class="nf">first_name</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">first</span> <span class="n">name</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">if</span> <span class="n">signing</span> <span class="n">up</span><span class="p">.</span> <span class="n">This</span> <span class="n">has</span> <span class="n">no</span>
    <span class="n">effect</span> <span class="k">if</span> <span class="n">the</span> <span class="n">account</span> <span class="n">already</span> <span class="k">exists</span> <span class="k">and</span> <span class="n">you</span> <span class="n">sign</span> <span class="k">in</span><span class="p">.</span>

<span class="nf">last_name</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Similar</span> <span class="k">to</span> <span class="n">the</span> <span class="n">first</span> <span class="n">name</span><span class="p">,</span> <span class="n">but</span> <span class="k">for</span> <span class="n">the</span> <span class="n">last</span><span class="p">.</span> <span class="n">Optional</span><span class="p">.</span>

<span class="nf">max_attempts</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">How</span> <span class="n">many</span> <span class="n">times</span> <span class="n">the</span> <span class="n">code</span><span class="o">/</span><span class="n">password</span> <span class="n">callback</span> <span class="n">should</span> <span class="n">be</span>
    <span class="n">retried</span> <span class="k">or</span> <span class="n">switching</span> <span class="k">between</span> <span class="n">signing</span> <span class="k">in</span> <span class="k">and</span> <span class="n">signing</span> <span class="n">up</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    This <code>TelegramClient</code>, so initialization
    can be chained with <code>.start()</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="s1">'anon'</span><span class="p">,</span> <span class="n">api_id</span><span class="p">,</span> <span class="n">api_hash</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Starting</span> <span class="k">as</span> <span class="n">a</span> <span class="n">bot</span> <span class="n">account</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="k">start</span><span class="p">(</span><span class="n">bot_token</span><span class="o">=</span><span class="n">bot_token</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Starting</span> <span class="k">as</span> <span class="n">an</span> <span class="k">user</span> <span class="n">account</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="k">start</span><span class="p">(</span><span class="n">phone</span><span class="p">)</span>
    <span class="o">#</span> <span class="n">Please</span> <span class="n">enter</span> <span class="n">the</span> <span class="n">code</span> <span class="n">you</span> <span class="n">received</span><span class="p">:</span> <span class="mi">12345</span>
    <span class="o">#</span> <span class="n">Please</span> <span class="n">enter</span> <span class="n">your</span> <span class="n">password</span><span class="p">:</span> <span class="o">*******</span>
    <span class="o">#</span> <span class="p">(</span><span class="n">You</span> <span class="k">are</span> <span class="n">now</span> <span class="n">logged</span> <span class="k">in</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Starting</span> <span class="k">using</span> <span class="n">a</span> <span class="n">context</span> <span class="n">manager</span> <span class="p">(</span><span class="n">this</span> <span class="n">calls</span> <span class="k">start</span><span class="p">()):</span>
    <span class="k">with</span> <span class="n">client</span><span class="p">:</span>
        <span class="n">pass</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\auth.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">start</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">phone</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'Please enter your phone (or bot token): '</span><span class="p">),</span>
        <span class="n">password</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s1">'Please enter your password: '</span><span class="p">),</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">bot_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force_sms</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">code_callback</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[],</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">first_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">'New User'</span><span class="p">,</span>
        <span class="n">last_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span>
        <span class="n">max_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'TelegramClient'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Starts the client (connects and logs in if necessary).</span>

<span class="sd">    By default, this method will be interactive (asking for</span>
<span class="sd">    user input if needed), and will handle 2FA if enabled too.</span>

<span class="sd">    If the phone doesn't belong to an existing account (and will hence</span>
<span class="sd">    `sign_up` for a new one),  **you are agreeing to Telegram's</span>
<span class="sd">    Terms of Service. This is required and your account</span>
<span class="sd">    will be banned otherwise.** See https://telegram.org/tos</span>
<span class="sd">    and https://core.telegram.org/api/terms.</span>

<span class="sd">    If the event loop is already running, this method returns a</span>
<span class="sd">    coroutine that you should await on your own code; otherwise</span>
<span class="sd">    the loop is ran until said coroutine completes.</span>

<span class="sd">    Arguments</span>
<span class="sd">        phone (`str` | `int` | `callable`):</span>
<span class="sd">            The phone (or callable without arguments to get it)</span>
<span class="sd">            to which the code will be sent. If a bot-token-like</span>
<span class="sd">            string is given, it will be used as such instead.</span>
<span class="sd">            The argument may be a coroutine.</span>

<span class="sd">        password (`str`, `callable`, optional):</span>
<span class="sd">            The password for 2 Factor Authentication (2FA).</span>
<span class="sd">            This is only required if it is enabled in your account.</span>
<span class="sd">            The argument may be a coroutine.</span>

<span class="sd">        bot_token (`str`):</span>
<span class="sd">            Bot Token obtained by `@BotFather &lt;https://t.me/BotFather&gt;`_</span>
<span class="sd">            to log in as a bot. Cannot be specified with ``phone`` (only</span>
<span class="sd">            one of either allowed).</span>

<span class="sd">        force_sms (`bool`, optional):</span>
<span class="sd">            Whether to force sending the code request as SMS.</span>
<span class="sd">            This only makes sense when signing in with a `phone`.</span>

<span class="sd">        code_callback (`callable`, optional):</span>
<span class="sd">            A callable that will be used to retrieve the Telegram</span>
<span class="sd">            login code. Defaults to `input()`.</span>
<span class="sd">            The argument may be a coroutine.</span>

<span class="sd">        first_name (`str`, optional):</span>
<span class="sd">            The first name to be used if signing up. This has no</span>
<span class="sd">            effect if the account already exists and you sign in.</span>

<span class="sd">        last_name (`str`, optional):</span>
<span class="sd">            Similar to the first name, but for the last. Optional.</span>

<span class="sd">        max_attempts (`int`, optional):</span>
<span class="sd">            How many times the code/password callback should be</span>
<span class="sd">            retried or switching between signing in and signing up.</span>

<span class="sd">    Returns</span>
<span class="sd">        This `TelegramClient`, so initialization</span>
<span class="sd">        can be chained with ``.start()``.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            client = TelegramClient('anon', api_id, api_hash)</span>

<span class="sd">            # Starting as a bot account</span>
<span class="sd">            await client.start(bot_token=bot_token)</span>

<span class="sd">            # Starting as an user account</span>
<span class="sd">            await client.start(phone)</span>
<span class="sd">            # Please enter the code you received: 12345</span>
<span class="sd">            # Please enter your password: *******</span>
<span class="sd">            # (You are now logged in)</span>

<span class="sd">            # Starting using a context manager (this calls start()):</span>
<span class="sd">            with client:</span>
<span class="sd">                pass</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">code_callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">code_callback</span><span class="p">():</span>
            <span class="k">return</span> <span class="nb">input</span><span class="p">(</span><span class="s1">'Please enter the code you received: '</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">code_callback</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">'The code_callback parameter needs to be a callable '</span>
            <span class="s1">'function that returns the code you received by Telegram.'</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">phone</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">bot_token</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'No phone number or bot token provided.'</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">phone</span> <span class="ow">and</span> <span class="n">bot_token</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">callable</span><span class="p">(</span><span class="n">phone</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Both a phone and a bot token provided, '</span>
                         <span class="s1">'must only provide one of either'</span><span class="p">)</span>

    <span class="n">coro</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">(</span>
        <span class="n">phone</span><span class="o">=</span><span class="n">phone</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">,</span>
        <span class="n">bot_token</span><span class="o">=</span><span class="n">bot_token</span><span class="p">,</span>
        <span class="n">force_sms</span><span class="o">=</span><span class="n">force_sms</span><span class="p">,</span>
        <span class="n">code_callback</span><span class="o">=</span><span class="n">code_callback</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="n">first_name</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="n">last_name</span><span class="p">,</span>
        <span class="n">max_attempts</span><span class="o">=</span><span class="n">max_attempts</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">coro</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">is_running</span><span class="p">()</span>
        <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">coro</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.bots" id="telethon.client.bots" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.bots" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.bots.BotMethods">
<code>BotMethods</code>
<a class="headerlink" href="#telethon.client.bots.BotMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.bots.BotMethods.inline_query">
<code class="highlight language-python">
inline_query<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bot</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">geo_point</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.bots.BotMethods.inline_query" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Makes an inline query to the specified bot (<code>@vote New Poll</code>).</p>
<p>Arguments
    bot (<code>entity</code>):
        The bot entity to which the inline query should be made.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">query</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">query</span> <span class="n">that</span> <span class="n">should</span> <span class="n">be</span> <span class="n">made</span> <span class="k">to</span> <span class="n">the</span> <span class="n">bot</span><span class="p">.</span>

<span class="nf">offset</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">string</span> <span class="n">offset</span> <span class="k">to</span> <span class="k">use</span> <span class="k">for</span> <span class="n">the</span> <span class="n">bot</span><span class="p">.</span>

<span class="nf">geo_point</span> <span class="p">(:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`GeoPoint`</span><span class="p">,</span> <span class="n">optional</span><span class="p">)</span>
    <span class="n">The</span> <span class="n">geo</span> <span class="n">point</span> <span class="n">location</span> <span class="n">information</span> <span class="k">to</span> <span class="n">send</span> <span class="k">to</span> <span class="n">the</span> <span class="n">bot</span>
    <span class="k">for</span> <span class="n">localised</span> <span class="n">results</span><span class="p">.</span> <span class="n">Available</span> <span class="n">under</span> <span class="n">some</span> <span class="n">bots</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    A list of <code>custom.InlineResult
    &lt;telethon.tl.custom.inlineresult.InlineResult&gt;</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Make</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">inline</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nv">@like</span><span class="w"></span>
<span class="w">    </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">inline_query</span><span class="p">(</span><span class="s1">'like'</span><span class="p">,</span><span class="w"> </span><span class="s1">'Do you like Telethon?'</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Send</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="k">result</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="ow">some</span><span class="w"> </span><span class="n">chat</span><span class="w"></span>
<span class="w">    </span><span class="n">message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">results</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="p">.</span><span class="n">click</span><span class="p">(</span><span class="s1">'TelethonOffTopic'</span><span class="p">)</span><span class="w"></span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\bots.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">inline_query</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">bot</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">geo_point</span><span class="p">:</span> <span class="s1">'types.GeoPoint'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">custom</span><span class="o">.</span><span class="n">InlineResults</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Makes an inline query to the specified bot (``@vote New Poll``).</span>

<span class="sd">    Arguments</span>
<span class="sd">        bot (`entity`):</span>
<span class="sd">            The bot entity to which the inline query should be made.</span>

<span class="sd">        query (`str`):</span>
<span class="sd">            The query that should be made to the bot.</span>

<span class="sd">        offset (`str`, optional):</span>
<span class="sd">            The string offset to use for the bot.</span>

<span class="sd">        geo_point (:tl:`GeoPoint`, optional)</span>
<span class="sd">            The geo point location information to send to the bot</span>
<span class="sd">            for localised results. Available under some bots.</span>

<span class="sd">    Returns</span>
<span class="sd">        A list of `custom.InlineResult</span>
<span class="sd">        &lt;telethon.tl.custom.inlineresult.InlineResult&gt;`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Make an inline query to @like</span>
<span class="sd">            results = await client.inline_query('like', 'Do you like Telethon?')</span>

<span class="sd">            # Send the first result to some chat</span>
<span class="sd">            message = await results[0].click('TelethonOffTopic')</span>
<span class="sd">    """</span>
    <span class="n">bot</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">bot</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">GetInlineBotResultsRequest</span><span class="p">(</span>
        <span class="n">bot</span><span class="o">=</span><span class="n">bot</span><span class="p">,</span>
        <span class="n">peer</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">InputPeerEmpty</span><span class="p">(),</span>
        <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">offset</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">,</span>
        <span class="n">geo_point</span><span class="o">=</span><span class="n">geo_point</span>
    <span class="p">))</span>

    <span class="k">return</span> <span class="n">custom</span><span class="o">.</span><span class="n">InlineResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.buttons" id="telethon.client.buttons" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.buttons" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.buttons.ButtonMethods">
<code>ButtonMethods</code>
<a class="headerlink" href="#telethon.client.buttons.ButtonMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.buttons.ButtonMethods.build_reply_markup">
<code class="highlight language-python">
build_reply_markup<span class="p">(</span><span class="n">buttons</span><span class="p">,</span> <span class="n">inline_only</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-staticmethod"><code>staticmethod</code></small>
</span>
<a class="headerlink" href="#telethon.client.buttons.ButtonMethods.build_reply_markup" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds a :tl:<code>ReplyInlineMarkup</code> or :tl:<code>ReplyKeyboardMarkup</code> for
the given buttons.</p>
<p>Does nothing if either no buttons are provided or the provided
argument is already a reply markup.</p>
<p>You should consider using this method if you are going to reuse
the markup very often. Otherwise, it is not necessary.</p>
<p>This method is <strong>not</strong> asynchronous (don't use <code>await</code> on it).</p>
<p>Arguments
    buttons (<code>hints.MarkupLike</code>):
        The button, list of buttons, array of buttons or markup
        to convert into a markup.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">inline_only</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">buttons</span> <span class="o">**</span><span class="n">must</span><span class="o">**</span> <span class="n">be</span> <span class="n">inline</span> <span class="n">buttons</span> <span class="n">only</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">Button</span>

    <span class="n">markup</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">(</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'hi'</span><span class="p">))</span>
    <span class="c1"># later</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'click me'</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="n">markup</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\buttons.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">build_reply_markup</span><span class="p">(</span>
        <span class="n">buttons</span><span class="p">:</span> <span class="s1">'typing.Optional[hints.MarkupLike]'</span><span class="p">,</span>
        <span class="n">inline_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'typing.Optional[types.TypeReplyMarkup]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Builds a :tl:`ReplyInlineMarkup` or :tl:`ReplyKeyboardMarkup` for</span>
<span class="sd">    the given buttons.</span>

<span class="sd">    Does nothing if either no buttons are provided or the provided</span>
<span class="sd">    argument is already a reply markup.</span>

<span class="sd">    You should consider using this method if you are going to reuse</span>
<span class="sd">    the markup very often. Otherwise, it is not necessary.</span>

<span class="sd">    This method is **not** asynchronous (don't use ``await`` on it).</span>

<span class="sd">    Arguments</span>
<span class="sd">        buttons (`hints.MarkupLike`):</span>
<span class="sd">            The button, list of buttons, array of buttons or markup</span>
<span class="sd">            to convert into a markup.</span>

<span class="sd">        inline_only (`bool`, optional):</span>
<span class="sd">            Whether the buttons **must** be inline buttons only or not.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            from telethon import Button</span>

<span class="sd">            markup = client.build_reply_markup(Button.inline('hi'))</span>
<span class="sd">            # later</span>
<span class="sd">            await client.send_message(chat, 'click me', buttons=markup)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">buttons</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">buttons</span><span class="o">.</span><span class="n">SUBCLASS_OF_ID</span> <span class="o">==</span> <span class="mh">0xe2e10ef2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">buttons</span>  <span class="c1"># crc32(b'ReplyMarkup'):</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">buttons</span><span class="p">):</span>
        <span class="n">buttons</span> <span class="o">=</span> <span class="p">[[</span><span class="n">buttons</span><span class="p">]]</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">buttons</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">buttons</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">buttons</span> <span class="o">=</span> <span class="p">[</span><span class="n">buttons</span><span class="p">]</span>

    <span class="n">is_inline</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">is_normal</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">resize</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">single_use</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">selective</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">buttons</span><span class="p">:</span>
        <span class="n">current</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">button</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">custom</span><span class="o">.</span><span class="n">Button</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">resize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">resize</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">resize</span>
                <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">single_use</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">single_use</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">single_use</span>
                <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">selective</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">selective</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">selective</span>

                <span class="n">button</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">button</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">button</span><span class="p">,</span> <span class="n">custom</span><span class="o">.</span><span class="n">MessageButton</span><span class="p">):</span>
                <span class="n">button</span> <span class="o">=</span> <span class="n">button</span><span class="o">.</span><span class="n">button</span>

            <span class="n">inline</span> <span class="o">=</span> <span class="n">custom</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">_is_inline</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>
            <span class="n">is_inline</span> <span class="o">|=</span> <span class="n">inline</span>
            <span class="n">is_normal</span> <span class="o">|=</span> <span class="ow">not</span> <span class="n">inline</span>

            <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">SUBCLASS_OF_ID</span> <span class="o">==</span> <span class="mh">0xbad74a3</span><span class="p">:</span>
                <span class="c1"># 0xbad74a3 == crc32(b'KeyboardButton')</span>
                <span class="n">current</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">button</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">current</span><span class="p">:</span>
            <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">KeyboardButtonRow</span><span class="p">(</span><span class="n">current</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">inline_only</span> <span class="ow">and</span> <span class="n">is_normal</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You cannot use non-inline buttons here'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">is_inline</span> <span class="o">==</span> <span class="n">is_normal</span> <span class="ow">and</span> <span class="n">is_normal</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You cannot mix inline with normal buttons'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">is_inline</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">ReplyInlineMarkup</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
    <span class="c1"># elif is_normal:</span>
    <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">ReplyKeyboardMarkup</span><span class="p">(</span>
        <span class="n">rows</span><span class="p">,</span> <span class="n">resize</span><span class="o">=</span><span class="n">resize</span><span class="p">,</span> <span class="n">single_use</span><span class="o">=</span><span class="n">single_use</span><span class="p">,</span> <span class="n">selective</span><span class="o">=</span><span class="n">selective</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.chats" id="telethon.client.chats" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.chats" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.chats.ChatMethods">
<code>ChatMethods</code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.action">
<code class="highlight language-python">
action<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">auto_cancel</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.action" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a context-manager object to represent a "chat action".</p>
<p>Chat actions indicate things like "user is typing", "user is
uploading a photo", etc.</p>
<p>If the action is <code>'cancel'</code>, you should just <code>await</code> the result,
since it makes no sense to use a context-manager for it.</p>
<p>See the example below for intended usage.</p>
<p>Arguments
    entity (<code>entity</code>):
        The entity where the action should be showed in.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">action</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`SendMessageAction`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">action</span> <span class="k">to</span> <span class="k">show</span><span class="p">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">either</span> <span class="n">pass</span> <span class="n">a</span> <span class="n">instance</span> <span class="n">of</span>
    <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`SendMessageAction`</span> <span class="k">or</span> <span class="n">better</span><span class="p">,</span> <span class="n">a</span> <span class="n">string</span> <span class="n">used</span> <span class="k">while</span><span class="p">:</span>

    <span class="o">*</span> <span class="ss">``</span><span class="s1">'typing'</span><span class="ss">``</span><span class="p">:</span> <span class="n">typing</span> <span class="n">a</span> <span class="kt">text</span> <span class="n">message</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'contact'</span><span class="ss">``</span><span class="p">:</span> <span class="n">choosing</span> <span class="n">a</span> <span class="n">contact</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'game'</span><span class="ss">``</span><span class="p">:</span> <span class="n">playing</span> <span class="n">a</span> <span class="n">game</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'location'</span><span class="ss">``</span><span class="p">:</span> <span class="n">choosing</span> <span class="n">a</span> <span class="n">geo</span> <span class="n">location</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'record-audio'</span><span class="ss">``</span><span class="p">:</span> <span class="n">recording</span> <span class="n">a</span> <span class="n">voice</span> <span class="n">note</span><span class="p">.</span>
      <span class="n">You</span> <span class="n">may</span> <span class="k">use</span> <span class="ss">``</span><span class="s1">'record-voice'</span><span class="ss">``</span> <span class="k">as</span> <span class="n">alias</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'record-round'</span><span class="ss">``</span><span class="p">:</span> <span class="n">recording</span> <span class="n">a</span> <span class="n">round</span> <span class="n">video</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'record-video'</span><span class="ss">``</span><span class="p">:</span> <span class="n">recording</span> <span class="n">a</span> <span class="n">normal</span> <span class="n">video</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'audio'</span><span class="ss">``</span><span class="p">:</span> <span class="n">sending</span> <span class="n">an</span> <span class="n">audio</span> <span class="nf">file</span> <span class="p">(</span><span class="n">voice</span> <span class="n">note</span> <span class="k">or</span> <span class="n">song</span><span class="p">).</span>
      <span class="n">You</span> <span class="n">may</span> <span class="k">use</span> <span class="ss">``</span><span class="s1">'voice'</span><span class="ss">``</span> <span class="k">and</span> <span class="ss">``</span><span class="s1">'song'</span><span class="ss">``</span> <span class="k">as</span> <span class="n">aliases</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'round'</span><span class="ss">``</span><span class="p">:</span> <span class="n">uploading</span> <span class="n">a</span> <span class="n">round</span> <span class="n">video</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'video'</span><span class="ss">``</span><span class="p">:</span> <span class="n">uploading</span> <span class="n">a</span> <span class="n">video</span> <span class="n">file</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'photo'</span><span class="ss">``</span><span class="p">:</span> <span class="n">uploading</span> <span class="n">a</span> <span class="n">photo</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'document'</span><span class="ss">``</span><span class="p">:</span> <span class="n">uploading</span> <span class="n">a</span> <span class="n">document</span> <span class="n">file</span><span class="p">.</span>
      <span class="n">You</span> <span class="n">may</span> <span class="k">use</span> <span class="ss">``</span><span class="s1">'file'</span><span class="ss">``</span> <span class="k">as</span> <span class="n">alias</span><span class="p">.</span>
    <span class="o">*</span> <span class="ss">``</span><span class="s1">'cancel'</span><span class="ss">``</span><span class="p">:</span> <span class="n">cancel</span> <span class="n">any</span> <span class="n">pending</span> <span class="n">action</span> <span class="k">in</span> <span class="n">this</span> <span class="n">chat</span><span class="p">.</span>

    <span class="n">Invalid</span> <span class="n">strings</span> <span class="n">will</span> <span class="n">raise</span> <span class="n">a</span> <span class="ss">``</span><span class="n">ValueError</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">delay</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`float`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">delay</span><span class="p">,</span> <span class="k">in</span> <span class="n">seconds</span><span class="p">,</span> <span class="k">to</span> <span class="n">wait</span> <span class="k">between</span> <span class="n">sending</span> <span class="n">actions</span><span class="p">.</span>
    <span class="k">For</span> <span class="n">example</span><span class="p">,</span> <span class="k">if</span> <span class="n">the</span> <span class="n">delay</span> <span class="k">is</span> <span class="mi">5</span> <span class="k">and</span> <span class="n">it</span> <span class="n">takes</span> <span class="mi">7</span> <span class="n">seconds</span> <span class="k">to</span>
    <span class="n">do</span> <span class="n">something</span><span class="p">,</span> <span class="n">three</span> <span class="n">requests</span> <span class="n">will</span> <span class="n">be</span> <span class="n">made</span> <span class="n">at</span> <span class="mi">0</span><span class="n">s</span><span class="p">,</span> <span class="mi">5</span><span class="n">s</span><span class="p">,</span> <span class="k">and</span>
    <span class="mi">7</span><span class="n">s</span> <span class="k">to</span> <span class="n">cancel</span> <span class="n">the</span> <span class="n">action</span><span class="p">.</span>

<span class="nf">auto_cancel</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">action</span> <span class="n">should</span> <span class="n">be</span> <span class="n">cancelled</span> <span class="n">once</span> <span class="n">the</span> <span class="n">context</span>
    <span class="n">manager</span> <span class="k">exists</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span> <span class="n">The</span> <span class="k">default</span> <span class="k">is</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">since</span>
    <span class="n">you</span> <span class="n">don</span><span class="err">'</span><span class="n">t</span> <span class="n">want</span> <span class="n">progress</span> <span class="k">to</span> <span class="n">be</span> <span class="n">shown</span> <span class="k">when</span> <span class="n">it</span> <span class="n">has</span> <span class="n">already</span>
    <span class="n">completed</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    Either a context-manager object or a coroutine.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="k">Type</span> <span class="k">for</span> <span class="mi">2</span> <span class="n">seconds</span><span class="p">,</span> <span class="k">then</span> <span class="n">send</span> <span class="n">a</span> <span class="n">message</span>
    <span class="n">async</span> <span class="k">with</span> <span class="n">client</span><span class="p">.</span><span class="n">action</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'typing'</span><span class="p">):</span>
        <span class="n">await</span> <span class="n">asyncio</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'Hello world! I type slow ^^'</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Cancel</span> <span class="k">any</span> <span class="n">previous</span> <span class="n">action</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">action</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'cancel'</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Upload</span> <span class="n">a</span> <span class="n">document</span><span class="p">,</span> <span class="n">showing</span> <span class="n">its</span> <span class="n">progress</span> <span class="p">(</span><span class="n">most</span> <span class="n">clients</span> <span class="k">ignore</span> <span class="n">this</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">with</span> <span class="n">client</span><span class="p">.</span><span class="n">action</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'document'</span><span class="p">)</span> <span class="k">as</span> <span class="n">action</span><span class="p">:</span>
        <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">zip_file</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="n">action</span><span class="p">.</span><span class="n">progress</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">action</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">action</span><span class="p">:</span> <span class="s1">'typing.Union[str, types.TypeSendMessageAction]'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">delay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
        <span class="n">auto_cancel</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'typing.Union[_ChatAction, typing.Coroutine]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Returns a context-manager object to represent a "chat action".</span>

<span class="sd">    Chat actions indicate things like "user is typing", "user is</span>
<span class="sd">    uploading a photo", etc.</span>

<span class="sd">    If the action is ``'cancel'``, you should just ``await`` the result,</span>
<span class="sd">    since it makes no sense to use a context-manager for it.</span>

<span class="sd">    See the example below for intended usage.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The entity where the action should be showed in.</span>

<span class="sd">        action (`str` | :tl:`SendMessageAction`):</span>
<span class="sd">            The action to show. You can either pass a instance of</span>
<span class="sd">            :tl:`SendMessageAction` or better, a string used while:</span>

<span class="sd">            * ``'typing'``: typing a text message.</span>
<span class="sd">            * ``'contact'``: choosing a contact.</span>
<span class="sd">            * ``'game'``: playing a game.</span>
<span class="sd">            * ``'location'``: choosing a geo location.</span>
<span class="sd">            * ``'record-audio'``: recording a voice note.</span>
<span class="sd">              You may use ``'record-voice'`` as alias.</span>
<span class="sd">            * ``'record-round'``: recording a round video.</span>
<span class="sd">            * ``'record-video'``: recording a normal video.</span>
<span class="sd">            * ``'audio'``: sending an audio file (voice note or song).</span>
<span class="sd">              You may use ``'voice'`` and ``'song'`` as aliases.</span>
<span class="sd">            * ``'round'``: uploading a round video.</span>
<span class="sd">            * ``'video'``: uploading a video file.</span>
<span class="sd">            * ``'photo'``: uploading a photo.</span>
<span class="sd">            * ``'document'``: uploading a document file.</span>
<span class="sd">              You may use ``'file'`` as alias.</span>
<span class="sd">            * ``'cancel'``: cancel any pending action in this chat.</span>

<span class="sd">            Invalid strings will raise a ``ValueError``.</span>

<span class="sd">        delay (`int` | `float`):</span>
<span class="sd">            The delay, in seconds, to wait between sending actions.</span>
<span class="sd">            For example, if the delay is 5 and it takes 7 seconds to</span>
<span class="sd">            do something, three requests will be made at 0s, 5s, and</span>
<span class="sd">            7s to cancel the action.</span>

<span class="sd">        auto_cancel (`bool`):</span>
<span class="sd">            Whether the action should be cancelled once the context</span>
<span class="sd">            manager exists or not. The default is `True`, since</span>
<span class="sd">            you don't want progress to be shown when it has already</span>
<span class="sd">            completed.</span>

<span class="sd">    Returns</span>
<span class="sd">        Either a context-manager object or a coroutine.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Type for 2 seconds, then send a message</span>
<span class="sd">            async with client.action(chat, 'typing'):</span>
<span class="sd">                await asyncio.sleep(2)</span>
<span class="sd">                await client.send_message(chat, 'Hello world! I type slow ^^')</span>

<span class="sd">            # Cancel any previous action</span>
<span class="sd">            await client.action(chat, 'cancel')</span>

<span class="sd">            # Upload a document, showing its progress (most clients ignore this)</span>
<span class="sd">            async with client.action(chat, 'document') as action:</span>
<span class="sd">                await client.send_file(chat, zip_file, progress_callback=action.progress)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">action</span> <span class="o">=</span> <span class="n">_ChatAction</span><span class="o">.</span><span class="n">_str_mapping</span><span class="p">[</span><span class="n">action</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'No such action "</span><span class="si">{}</span><span class="s1">"'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action</span><span class="p">))</span> <span class="kn">from</span> <span class="bp">None</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">TLObject</span><span class="p">)</span> <span class="ow">or</span> <span class="n">action</span><span class="o">.</span><span class="n">SUBCLASS_OF_ID</span> <span class="o">!=</span> <span class="mh">0x20b2cc21</span><span class="p">:</span>
        <span class="c1"># 0x20b2cc21 = crc32(b'SendMessageAction')</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You must pass an instance, not the class'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Cannot use </span><span class="si">{}</span><span class="s1"> as action'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action</span><span class="p">))</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">SendMessageCancelAction</span><span class="p">):</span>
        <span class="c1"># ``SetTypingRequest.resolve`` will get input peer of ``entity``.</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SetTypingRequest</span><span class="p">(</span>
            <span class="n">entity</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">SendMessageCancelAction</span><span class="p">()))</span>

    <span class="k">return</span> <span class="n">_ChatAction</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="n">delay</span><span class="p">,</span> <span class="n">auto_cancel</span><span class="o">=</span><span class="n">auto_cancel</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.edit_admin">
<code class="highlight language-python">
edit_admin<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">change_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">post_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">edit_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delete_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ban_users</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invite_users</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pin_messages</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_admins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">is_admin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.edit_admin" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Edits admin permissions for someone in a chat.</p>
<p>Raises an error if a wrong combination of rights are given
(e.g. you don't have enough permissions to grant one).</p>
<p>Unless otherwise stated, permissions will work in channels and megagroups.</p>
<p>Arguments
    entity (<code>entity</code>):
        The channel, megagroup or chat where the promotion should happen.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">user</span> <span class="p">(</span><span class="ss">`entity`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">user</span> <span class="k">to</span> <span class="n">be</span> <span class="n">promoted</span><span class="p">.</span>

<span class="nf">change_info</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="k">change</span> <span class="n">info</span><span class="p">.</span>

<span class="nf">post_messages</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="n">post</span> <span class="k">in</span> <span class="n">the</span> <span class="n">channel</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">will</span> <span class="n">only</span> <span class="n">work</span> <span class="k">in</span> <span class="n">broadcast</span> <span class="n">channels</span><span class="p">.</span>

<span class="nf">edit_messages</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="n">edit</span> <span class="n">messages</span> <span class="k">in</span> <span class="n">the</span> <span class="n">channel</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">will</span> <span class="n">only</span> <span class="n">work</span> <span class="k">in</span> <span class="n">broadcast</span> <span class="n">channels</span><span class="p">.</span>

<span class="nf">delete_messages</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="k">delete</span> <span class="n">messages</span><span class="p">.</span>

<span class="nf">ban_users</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="n">ban</span> <span class="n">users</span><span class="p">.</span>

<span class="nf">invite_users</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="n">invite</span> <span class="n">users</span><span class="p">.</span> <span class="n">Needs</span> <span class="n">some</span> <span class="n">testing</span><span class="p">.</span>

<span class="nf">pin_messages</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="n">pin</span> <span class="n">messages</span><span class="p">.</span>

<span class="nf">add_admins</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span> <span class="k">add</span> <span class="n">admins</span><span class="p">.</span>

<span class="nf">is_admin</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">an</span> <span class="n">admin</span> <span class="k">in</span> <span class="n">the</span> <span class="n">chat</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">will</span> <span class="n">only</span> <span class="n">work</span> <span class="k">in</span> <span class="n">small</span> <span class="k">group</span> <span class="n">chats</span><span class="p">.</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">an</span> <span class="n">admin</span> <span class="k">in</span> <span class="n">the</span> <span class="n">chat</span><span class="p">.</span> <span class="n">This</span> <span class="k">is</span> <span class="n">the</span>
    <span class="n">only</span> <span class="n">permission</span> <span class="n">available</span> <span class="k">in</span> <span class="n">small</span> <span class="k">group</span> <span class="n">chats</span><span class="p">,</span> <span class="k">and</span> <span class="k">when</span>
    <span class="n">used</span> <span class="k">in</span> <span class="n">megagroups</span><span class="p">,</span> <span class="k">all</span> <span class="n">non</span><span class="o">-</span><span class="n">explicitly</span> <span class="kt">set</span> <span class="n">permissions</span> <span class="n">will</span>
    <span class="n">have</span> <span class="n">this</span> <span class="n">value</span><span class="p">.</span>

    <span class="n">Essentially</span><span class="p">,</span> <span class="n">only</span> <span class="n">passing</span> <span class="ss">``</span><span class="n">is_admin</span><span class="o">=</span><span class="no">True</span><span class="ss">``</span> <span class="n">will</span> <span class="k">grant</span> <span class="k">all</span>
    <span class="n">permissions</span><span class="p">,</span> <span class="n">but</span> <span class="n">you</span> <span class="n">can</span> <span class="n">still</span> <span class="n">disable</span> <span class="n">those</span> <span class="n">you</span> <span class="n">need</span><span class="p">.</span>

<span class="nf">title</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">custom</span> <span class="nf">title</span> <span class="p">(</span><span class="n">also</span> <span class="n">known</span> <span class="k">as</span> <span class="s2">"rank"</span><span class="p">)</span> <span class="k">to</span> <span class="k">show</span> <span class="k">for</span> <span class="n">this</span> <span class="n">admin</span><span class="p">.</span>
    <span class="n">This</span> <span class="kt">text</span> <span class="n">will</span> <span class="n">be</span> <span class="n">shown</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">the</span> <span class="s2">"admin"</span> <span class="n">badge</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">will</span> <span class="n">only</span> <span class="n">work</span> <span class="k">in</span> <span class="n">channels</span> <span class="k">and</span> <span class="n">megagroups</span><span class="p">.</span>

    <span class="k">When</span> <span class="k">left</span> <span class="n">unspecified</span> <span class="k">or</span> <span class="n">empty</span><span class="p">,</span> <span class="n">the</span> <span class="k">default</span> <span class="n">localized</span> <span class="s2">"admin"</span>
    <span class="n">badge</span> <span class="n">will</span> <span class="n">be</span> <span class="n">shown</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The resulting :tl:<code>Updates</code> object.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="c1"># Allowing `user` to pin messages in `chat`</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">edit_admin</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">pin_messages</span><span class="o">=</span><span class="no">True</span><span class="p">)</span>

    <span class="c1"># Granting all permissions except for `add_admins`</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="nf">edit_admin</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">is_admin</span><span class="o">=</span><span class="no">True</span><span class="p">,</span> <span class="n">add_admins</span><span class="o">=</span><span class="no">False</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit_admin</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">change_info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">post_messages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">edit_messages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">delete_messages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ban_users</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">invite_users</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pin_messages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_admins</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">is_admin</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">types</span><span class="o">.</span><span class="n">Updates</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Edits admin permissions for someone in a chat.</span>

<span class="sd">    Raises an error if a wrong combination of rights are given</span>
<span class="sd">    (e.g. you don't have enough permissions to grant one).</span>

<span class="sd">    Unless otherwise stated, permissions will work in channels and megagroups.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The channel, megagroup or chat where the promotion should happen.</span>

<span class="sd">        user (`entity`):</span>
<span class="sd">            The user to be promoted.</span>

<span class="sd">        change_info (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to change info.</span>

<span class="sd">        post_messages (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to post in the channel.</span>
<span class="sd">            This will only work in broadcast channels.</span>

<span class="sd">        edit_messages (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to edit messages in the channel.</span>
<span class="sd">            This will only work in broadcast channels.</span>

<span class="sd">        delete_messages (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to delete messages.</span>

<span class="sd">        ban_users (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to ban users.</span>

<span class="sd">        invite_users (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to invite users. Needs some testing.</span>

<span class="sd">        pin_messages (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to pin messages.</span>

<span class="sd">        add_admins (`bool`, optional):</span>
<span class="sd">            Whether the user will be able to add admins.</span>

<span class="sd">        is_admin (`bool`, optional):</span>
<span class="sd">            Whether the user will be an admin in the chat.</span>
<span class="sd">            This will only work in small group chats.</span>
<span class="sd">            Whether the user will be an admin in the chat. This is the</span>
<span class="sd">            only permission available in small group chats, and when</span>
<span class="sd">            used in megagroups, all non-explicitly set permissions will</span>
<span class="sd">            have this value.</span>

<span class="sd">            Essentially, only passing ``is_admin=True`` will grant all</span>
<span class="sd">            permissions, but you can still disable those you need.</span>

<span class="sd">        title (`str`, optional):</span>
<span class="sd">            The custom title (also known as "rank") to show for this admin.</span>
<span class="sd">            This text will be shown instead of the "admin" badge.</span>
<span class="sd">            This will only work in channels and megagroups.</span>

<span class="sd">            When left unspecified or empty, the default localized "admin"</span>
<span class="sd">            badge will be shown.</span>

<span class="sd">    Returns</span>
<span class="sd">        The resulting :tl:`Updates` object.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Allowing `user` to pin messages in `chat`</span>
<span class="sd">            await client.edit_admin(chat, user, pin_messages=True)</span>

<span class="sd">            # Granting all permissions except for `add_admins`</span>
<span class="sd">            await client.edit_admin(chat, user, is_admin=True, add_admins=False)</span>
<span class="sd">    """</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ty</span> <span class="o">!=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You must pass a user entity'</span><span class="p">)</span>

    <span class="n">perm_names</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">'change_info'</span><span class="p">,</span> <span class="s1">'post_messages'</span><span class="p">,</span> <span class="s1">'edit_messages'</span><span class="p">,</span> <span class="s1">'delete_messages'</span><span class="p">,</span>
        <span class="s1">'ban_users'</span><span class="p">,</span> <span class="s1">'invite_users'</span><span class="p">,</span> <span class="s1">'pin_messages'</span><span class="p">,</span> <span class="s1">'add_admins'</span>
    <span class="p">)</span>

    <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span>
        <span class="c1"># If we try to set these permissions in a megagroup, we</span>
        <span class="c1"># would get a RIGHT_FORBIDDEN. However, it makes sense</span>
        <span class="c1"># that an admin can post messages, so we want to avoid the error</span>
        <span class="k">if</span> <span class="n">post_messages</span> <span class="ow">or</span> <span class="n">edit_messages</span><span class="p">:</span>
            <span class="c1"># TODO get rid of this once sessions cache this information</span>
            <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">channel_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_megagroup_cache</span><span class="p">:</span>
                <span class="n">full_entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_megagroup_cache</span><span class="p">[</span><span class="n">entity</span><span class="o">.</span><span class="n">channel_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">full_entity</span><span class="o">.</span><span class="n">megagroup</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_megagroup_cache</span><span class="p">[</span><span class="n">entity</span><span class="o">.</span><span class="n">channel_id</span><span class="p">]:</span>
                <span class="n">post_messages</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">edit_messages</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">perms</span> <span class="o">=</span> <span class="nb">locals</span><span class="p">()</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">EditAdminRequest</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ChatAdminRights</span><span class="p">(</span><span class="o">**</span><span class="p">{</span>
            <span class="c1"># A permission is its explicit (not-None) value or `is_admin`.</span>
            <span class="c1"># This essentially makes `is_admin` be the default value.</span>
            <span class="n">name</span><span class="p">:</span> <span class="n">perms</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="k">if</span> <span class="n">perms</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">is_admin</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">perm_names</span>
        <span class="p">}),</span> <span class="n">rank</span><span class="o">=</span><span class="n">title</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">))</span>

    <span class="k">elif</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHAT</span><span class="p">:</span>
        <span class="c1"># If the user passed any permission in a small</span>
        <span class="c1"># group chat, they must be a full admin to have it.</span>
        <span class="k">if</span> <span class="n">is_admin</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">is_admin</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="nb">locals</span><span class="p">()[</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">perm_names</span><span class="p">)</span>

        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">EditChatAdminRequest</span><span class="p">(</span>
            <span class="n">entity</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">is_admin</span><span class="o">=</span><span class="n">is_admin</span><span class="p">))</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You can only edit permissions in groups and channels'</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.edit_permissions">
<code class="highlight language-python">
edit_permissions<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">until_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">view_messages</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">send_messages</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">send_media</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">send_stickers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">send_gifs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">send_games</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">send_inline</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">embed_link_previews</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">send_polls</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">change_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">invite_users</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">pin_messages</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.edit_permissions" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Edits user restrictions in a chat.</p>
<p>Set an argument to <code>False</code> to apply a restriction (i.e. remove
the permission), or omit them to use the default <code>True</code> (i.e.
don't apply a restriction).</p>
<p>Raises an error if a wrong combination of rights are given
(e.g. you don't have enough permissions to revoke one).</p>
<p>By default, each boolean argument is <code>True</code>, meaning that it
is true that the user has access to the default permission
and may be able to make use of it.</p>
<p>If you set an argument to <code>False</code>, then a restriction is applied
regardless of the default permissions.</p>
<p>It is important to note that <code>True</code> does <em>not</em> mean grant, only
"don't restrict", and this is where the default permissions come
in. A user may have not been revoked the <code>pin_messages</code> permission
(it is <code>True</code>) but they won't be able to use it if the default
permissions don't allow it either.</p>
<p>Arguments
    entity (<code>entity</code>):
        The channel or megagroup where the restriction should happen.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">user</span> <span class="p">(</span><span class="ss">`entity`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="n">specified</span><span class="p">,</span> <span class="n">the</span> <span class="n">permission</span> <span class="n">will</span> <span class="n">be</span> <span class="n">changed</span> <span class="k">for</span> <span class="n">the</span> <span class="k">specific</span> <span class="n">user</span><span class="p">.</span>
    <span class="k">If</span> <span class="k">left</span> <span class="k">as</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">the</span> <span class="k">default</span> <span class="n">chat</span> <span class="n">permissions</span> <span class="n">will</span> <span class="n">be</span> <span class="n">updated</span><span class="p">.</span>

<span class="nf">until_date</span> <span class="p">(</span><span class="ss">`DateLike`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">When</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">unbanned</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="n">due</span> <span class="kt">date</span> <span class="k">or</span> <span class="n">duration</span> <span class="k">is</span> <span class="n">longer</span> <span class="n">than</span> <span class="mi">366</span> <span class="n">days</span> <span class="k">or</span> <span class="n">shorter</span> <span class="n">than</span>
    <span class="mi">30</span> <span class="n">seconds</span><span class="p">,</span> <span class="n">the</span> <span class="n">ban</span> <span class="n">will</span> <span class="n">be</span> <span class="n">forever</span><span class="p">.</span> <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">``</span><span class="mi">0</span><span class="ss">``</span> <span class="p">(</span><span class="n">ban</span> <span class="n">forever</span><span class="p">).</span>

<span class="nf">view_messages</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">view</span> <span class="n">messages</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>
    <span class="n">Forbidding</span> <span class="n">someone</span> <span class="k">from</span> <span class="n">viewing</span> <span class="n">messages</span> <span class="n">equals</span> <span class="k">to</span> <span class="n">banning</span> <span class="n">them</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">will</span> <span class="n">only</span> <span class="n">work</span> <span class="k">if</span> <span class="ss">``</span><span class="n">user</span><span class="ss">``</span> <span class="k">is</span> <span class="kt">set</span><span class="p">.</span>

<span class="nf">send_messages</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">send</span> <span class="n">messages</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">send_media</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">send</span> <span class="n">media</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">send_stickers</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">send</span> <span class="n">stickers</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">send_gifs</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">send</span> <span class="n">animated</span> <span class="n">gifs</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">send_games</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">send</span> <span class="n">games</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">send_inline</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="k">use</span> <span class="n">inline</span> <span class="n">bots</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">embed_link_previews</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">enable</span> <span class="n">the</span> <span class="n">link</span> <span class="n">preview</span> <span class="k">in</span> <span class="n">the</span>
    <span class="n">messages</span> <span class="n">they</span> <span class="n">send</span><span class="p">.</span> <span class="n">Note</span> <span class="n">that</span> <span class="n">the</span> <span class="n">user</span> <span class="n">will</span> <span class="n">still</span> <span class="n">be</span> <span class="n">able</span> <span class="k">to</span>
    <span class="n">send</span> <span class="n">messages</span> <span class="k">with</span> <span class="n">links</span> <span class="k">if</span> <span class="n">this</span> <span class="n">permission</span> <span class="k">is</span> <span class="n">removed</span><span class="p">,</span> <span class="n">but</span>
    <span class="n">these</span> <span class="n">links</span> <span class="n">won</span><span class="err">'</span><span class="n">t</span> <span class="n">display</span> <span class="n">a</span> <span class="n">link</span> <span class="n">preview</span><span class="p">.</span>

<span class="nf">send_polls</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">send</span> <span class="n">polls</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">change_info</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="k">change</span> <span class="n">info</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">invite_users</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">invite</span> <span class="n">other</span> <span class="n">users</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">pin_messages</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">user</span> <span class="k">is</span> <span class="n">able</span> <span class="k">to</span> <span class="n">pin</span> <span class="n">messages</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The resulting :tl:<code>Updates</code> object.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

    <span class="c1"># Banning `user` from `chat` for 1 minute</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">edit_permissions</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
                                  <span class="n">view_messages</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1"># Banning `user` from `chat` forever</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">edit_permissions</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">view_messages</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

    <span class="c1"># Kicking someone (ban + un-ban)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">edit_permissions</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">view_messages</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">edit_permissions</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 912
 913
 914
 915
 916
 917
 918
 919
 920
 921
 922
 923
 924
 925
 926
 927
 928
 929
 930
 931
 932
 933
 934
 935
 936
 937
 938
 939
 940
 941
 942
 943
 944
 945
 946
 947
 948
 949
 950
 951
 952
 953
 954
 955
 956
 957
 958
 959
 960
 961
 962
 963
 964
 965
 966
 967
 968
 969
 970
 971
 972
 973
 974
 975
 976
 977
 978
 979
 980
 981
 982
 983
 984
 985
 986
 987
 988
 989
 990
 991
 992
 993
 994
 995
 996
 997
 998
 999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060
1061
1062
1063
1064
1065
1066</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit_permissions</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="s1">'typing.Optional[hints.EntityLike]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">until_date</span><span class="p">:</span> <span class="s1">'hints.DateLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">view_messages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">send_messages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">send_media</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">send_stickers</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">send_gifs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">send_games</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">send_inline</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">embed_link_previews</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">send_polls</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">change_info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">invite_users</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">pin_messages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">types</span><span class="o">.</span><span class="n">Updates</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Edits user restrictions in a chat.</span>

<span class="sd">    Set an argument to `False` to apply a restriction (i.e. remove</span>
<span class="sd">    the permission), or omit them to use the default `True` (i.e.</span>
<span class="sd">    don't apply a restriction).</span>

<span class="sd">    Raises an error if a wrong combination of rights are given</span>
<span class="sd">    (e.g. you don't have enough permissions to revoke one).</span>

<span class="sd">    By default, each boolean argument is `True`, meaning that it</span>
<span class="sd">    is true that the user has access to the default permission</span>
<span class="sd">    and may be able to make use of it.</span>

<span class="sd">    If you set an argument to `False`, then a restriction is applied</span>
<span class="sd">    regardless of the default permissions.</span>

<span class="sd">    It is important to note that `True` does *not* mean grant, only</span>
<span class="sd">    "don't restrict", and this is where the default permissions come</span>
<span class="sd">    in. A user may have not been revoked the ``pin_messages`` permission</span>
<span class="sd">    (it is `True`) but they won't be able to use it if the default</span>
<span class="sd">    permissions don't allow it either.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The channel or megagroup where the restriction should happen.</span>

<span class="sd">        user (`entity`, optional):</span>
<span class="sd">            If specified, the permission will be changed for the specific user.</span>
<span class="sd">            If left as `None`, the default chat permissions will be updated.</span>

<span class="sd">        until_date (`DateLike`, optional):</span>
<span class="sd">            When the user will be unbanned.</span>

<span class="sd">            If the due date or duration is longer than 366 days or shorter than</span>
<span class="sd">            30 seconds, the ban will be forever. Defaults to ``0`` (ban forever).</span>

<span class="sd">        view_messages (`bool`, optional):</span>
<span class="sd">            Whether the user is able to view messages or not.</span>
<span class="sd">            Forbidding someone from viewing messages equals to banning them.</span>
<span class="sd">            This will only work if ``user`` is set.</span>

<span class="sd">        send_messages (`bool`, optional):</span>
<span class="sd">            Whether the user is able to send messages or not.</span>

<span class="sd">        send_media (`bool`, optional):</span>
<span class="sd">            Whether the user is able to send media or not.</span>

<span class="sd">        send_stickers (`bool`, optional):</span>
<span class="sd">            Whether the user is able to send stickers or not.</span>

<span class="sd">        send_gifs (`bool`, optional):</span>
<span class="sd">            Whether the user is able to send animated gifs or not.</span>

<span class="sd">        send_games (`bool`, optional):</span>
<span class="sd">            Whether the user is able to send games or not.</span>

<span class="sd">        send_inline (`bool`, optional):</span>
<span class="sd">            Whether the user is able to use inline bots or not.</span>

<span class="sd">        embed_link_previews (`bool`, optional):</span>
<span class="sd">            Whether the user is able to enable the link preview in the</span>
<span class="sd">            messages they send. Note that the user will still be able to</span>
<span class="sd">            send messages with links if this permission is removed, but</span>
<span class="sd">            these links won't display a link preview.</span>

<span class="sd">        send_polls (`bool`, optional):</span>
<span class="sd">            Whether the user is able to send polls or not.</span>

<span class="sd">        change_info (`bool`, optional):</span>
<span class="sd">            Whether the user is able to change info or not.</span>

<span class="sd">        invite_users (`bool`, optional):</span>
<span class="sd">            Whether the user is able to invite other users or not.</span>

<span class="sd">        pin_messages (`bool`, optional):</span>
<span class="sd">            Whether the user is able to pin messages or not.</span>

<span class="sd">    Returns</span>
<span class="sd">        The resulting :tl:`Updates` object.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            from datetime import timedelta</span>

<span class="sd">            # Banning `user` from `chat` for 1 minute</span>
<span class="sd">            await client.edit_permissions(chat, user, timedelta(minutes=1),</span>
<span class="sd">                                          view_messages=False)</span>

<span class="sd">            # Banning `user` from `chat` forever</span>
<span class="sd">            await client.edit_permissions(chat, user, view_messages=False)</span>

<span class="sd">            # Kicking someone (ban + un-ban)</span>
<span class="sd">            await client.edit_permissions(chat, user, view_messages=False)</span>
<span class="sd">            await client.edit_permissions(chat, user)</span>
<span class="sd">    """</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ty</span> <span class="o">!=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You must pass either a channel or a supergroup'</span><span class="p">)</span>

    <span class="n">rights</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">ChatBannedRights</span><span class="p">(</span>
        <span class="n">until_date</span><span class="o">=</span><span class="n">until_date</span><span class="p">,</span>
        <span class="n">view_messages</span><span class="o">=</span><span class="ow">not</span> <span class="n">view_messages</span><span class="p">,</span>
        <span class="n">send_messages</span><span class="o">=</span><span class="ow">not</span> <span class="n">send_messages</span><span class="p">,</span>
        <span class="n">send_media</span><span class="o">=</span><span class="ow">not</span> <span class="n">send_media</span><span class="p">,</span>
        <span class="n">send_stickers</span><span class="o">=</span><span class="ow">not</span> <span class="n">send_stickers</span><span class="p">,</span>
        <span class="n">send_gifs</span><span class="o">=</span><span class="ow">not</span> <span class="n">send_gifs</span><span class="p">,</span>
        <span class="n">send_games</span><span class="o">=</span><span class="ow">not</span> <span class="n">send_games</span><span class="p">,</span>
        <span class="n">send_inline</span><span class="o">=</span><span class="ow">not</span> <span class="n">send_inline</span><span class="p">,</span>
        <span class="n">embed_links</span><span class="o">=</span><span class="ow">not</span> <span class="n">embed_link_previews</span><span class="p">,</span>
        <span class="n">send_polls</span><span class="o">=</span><span class="ow">not</span> <span class="n">send_polls</span><span class="p">,</span>
        <span class="n">change_info</span><span class="o">=</span><span class="ow">not</span> <span class="n">change_info</span><span class="p">,</span>
        <span class="n">invite_users</span><span class="o">=</span><span class="ow">not</span> <span class="n">invite_users</span><span class="p">,</span>
        <span class="n">pin_messages</span><span class="o">=</span><span class="ow">not</span> <span class="n">pin_messages</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">EditChatDefaultBannedRightsRequest</span><span class="p">(</span>
            <span class="n">peer</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">banned_rights</span><span class="o">=</span><span class="n">rights</span>
        <span class="p">))</span>

    <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ty</span> <span class="o">!=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You must pass a user entity'</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerSelf</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You cannot restrict yourself'</span><span class="p">)</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">EditBannedRequest</span><span class="p">(</span>
        <span class="n">channel</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
        <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="n">banned_rights</span><span class="o">=</span><span class="n">rights</span>
    <span class="p">))</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.get_admin_log">
<code class="highlight language-python">
get_admin_log<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">admins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">leave</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invite</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restrict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unrestrict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ban</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unban</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">promote</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">demote</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pinned</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.get_admin_log" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Same as <code>iter_admin_log()</code>, but returns a <code>list</code> instead.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="k">Get</span> <span class="n">a</span> <span class="n">list</span> <span class="k">of</span> <span class="n">deleted</span> <span class="n">message</span> <span class="n">events</span> <span class="n">which</span> <span class="n">said</span> <span class="ss">"heck"</span>
    <span class="n">events</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_admin_log</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="k">search</span><span class="o">=</span><span class="s1">'heck'</span><span class="p">,</span> <span class="k">delete</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Print</span> <span class="n">the</span> <span class="k">old</span> <span class="n">message</span> <span class="k">before</span> <span class="n">it</span> <span class="n">was</span> <span class="n">deleted</span>
    <span class="n">print</span><span class="p">(</span><span class="n">events</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="k">old</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_admin_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'hints.TotalList'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Same as `iter_admin_log()`, but returns a ``list`` instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Get a list of deleted message events which said "heck"</span>
<span class="sd">            events = await client.get_admin_log(channel, search='heck', delete=True)</span>

<span class="sd">            # Print the old message before it was deleted</span>
<span class="sd">            print(events[0].old)</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_admin_log</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.get_participants">
<code class="highlight language-python">
get_participants<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">aggressive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.get_participants" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Same as <code>iter_participants()</code>, but returns a
<code>TotalList &lt;telethon.helpers.TotalList&gt;</code> instead.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">users</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_participants</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="n">users</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">first_name</span><span class="p">)</span>

    <span class="k">for</span> <span class="k">user</span> <span class="k">in</span> <span class="n">users</span><span class="p">:</span>
        <span class="k">if</span> <span class="k">user</span><span class="p">.</span><span class="n">username</span> <span class="k">is</span> <span class="k">not</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">print</span><span class="p">(</span><span class="k">user</span><span class="p">.</span><span class="n">username</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_participants</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'hints.TotalList'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Same as `iter_participants()`, but returns a</span>
<span class="sd">    `TotalList &lt;telethon.helpers.TotalList&gt;` instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            users = await client.get_participants(chat)</span>
<span class="sd">            print(users[0].first_name)</span>

<span class="sd">            for user in users:</span>
<span class="sd">                if user.username is not None:</span>
<span class="sd">                    print(user.username)</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_participants</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.get_profile_photos">
<code class="highlight language-python">
get_profile_photos<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.get_profile_photos" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Same as <code>iter_profile_photos()</code>, but returns a
<code>TotalList &lt;telethon.helpers.TotalList&gt;</code> instead.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="k">Get</span> <span class="n">the</span> <span class="n">photos</span> <span class="k">of</span> <span class="n">a</span> <span class="n">channel</span>
    <span class="n">photos</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_profile_photos</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Download</span> <span class="n">the</span> <span class="n">oldest</span> <span class="n">photo</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">download_media</span><span class="p">(</span><span class="n">photos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_profile_photos</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'hints.TotalList'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Same as `iter_profile_photos()`, but returns a</span>
<span class="sd">    `TotalList &lt;telethon.helpers.TotalList&gt;` instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Get the photos of a channel</span>
<span class="sd">            photos = await client.get_profile_photos(channel)</span>

<span class="sd">            # Download the oldest photo</span>
<span class="sd">            await client.download_media(photos[-1])</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_profile_photos</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.iter_admin_log">
<code class="highlight language-python">
iter_admin_log<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">admins</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">leave</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">invite</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">restrict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unrestrict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ban</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">unban</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">promote</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">demote</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">settings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pinned</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">delete</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.iter_admin_log" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Iterator over the admin log for the specified channel.</p>
<p>The default order is from the most recent event to to the oldest.</p>
<p>Note that you must be an administrator of it to use this method.</p>
<p>If none of the filters are present (i.e. they all are <code>None</code>),
<em>all</em> event types will be returned. If at least one of them is
<code>True</code>, only those that are true will be returned.</p>
<p>Arguments
    entity (<code>entity</code>):
        The channel entity from which to get its admin log.</p>
<div class="codehilite">
<pre><span></span><code><span class="k">limit</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">events</span> <span class="k">to</span> <span class="n">be</span> <span class="n">retrieved</span><span class="p">.</span>

    <span class="n">The</span> <span class="k">limit</span> <span class="n">may</span> <span class="n">also</span> <span class="n">be</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">which</span> <span class="n">would</span> <span class="n">eventually</span> <span class="k">return</span>
    <span class="n">the</span> <span class="n">whole</span> <span class="n">history</span><span class="p">.</span>

<span class="nf">max_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="k">All</span> <span class="n">the</span> <span class="n">events</span> <span class="k">with</span> <span class="n">a</span> <span class="nf">higher</span> <span class="p">(</span><span class="n">newer</span><span class="p">)</span> <span class="n">ID</span> <span class="k">or</span> <span class="n">equal</span> <span class="k">to</span> <span class="n">this</span> <span class="n">will</span>
    <span class="n">be</span> <span class="n">excluded</span><span class="p">.</span>

<span class="nf">min_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="k">All</span> <span class="n">the</span> <span class="n">events</span> <span class="k">with</span> <span class="n">a</span> <span class="nf">lower</span> <span class="p">(</span><span class="n">older</span><span class="p">)</span> <span class="n">ID</span> <span class="k">or</span> <span class="n">equal</span> <span class="k">to</span> <span class="n">this</span> <span class="n">will</span>
    <span class="n">be</span> <span class="n">excluded</span><span class="p">.</span>

<span class="nf">search</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">string</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">as</span> <span class="n">a</span> <span class="n">search</span> <span class="n">query</span><span class="p">.</span>

<span class="nf">admins</span> <span class="p">(</span><span class="ss">`entity`</span> <span class="o">|</span> <span class="ss">`list`</span><span class="p">):</span>
    <span class="k">If</span> <span class="n">present</span><span class="p">,</span> <span class="n">the</span> <span class="n">events</span> <span class="n">will</span> <span class="n">be</span> <span class="n">filtered</span> <span class="k">by</span> <span class="n">these</span> <span class="nf">admins</span>
    <span class="p">(</span><span class="k">or</span> <span class="n">single</span> <span class="n">admin</span><span class="p">)</span> <span class="k">and</span> <span class="n">only</span> <span class="n">those</span> <span class="n">caused</span> <span class="k">by</span> <span class="n">them</span> <span class="n">will</span> <span class="n">be</span>
    <span class="n">returned</span><span class="p">.</span>

<span class="k">join</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="k">for</span> <span class="k">when</span> <span class="n">a</span> <span class="n">user</span> <span class="n">joined</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="k">leave</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="k">for</span> <span class="k">when</span> <span class="n">a</span> <span class="n">user</span> <span class="n">leaves</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="nf">invite</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="k">for</span> <span class="k">when</span> <span class="n">a</span> <span class="n">user</span> <span class="n">joins</span> <span class="n">through</span> <span class="n">an</span> <span class="n">invite</span>
    <span class="n">link</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="k">restrict</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="k">with</span> <span class="n">partial</span> <span class="n">restrictions</span> <span class="n">will</span> <span class="n">be</span>
    <span class="n">returned</span><span class="p">.</span> <span class="n">This</span> <span class="k">is</span> <span class="n">what</span> <span class="n">the</span> <span class="n">API</span> <span class="n">calls</span> <span class="s2">"ban"</span><span class="p">.</span>

<span class="nf">unrestrict</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">removing</span> <span class="n">restrictions</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>
    <span class="n">This</span> <span class="k">is</span> <span class="n">what</span> <span class="n">the</span> <span class="n">API</span> <span class="n">calls</span> <span class="s2">"unban"</span><span class="p">.</span>

<span class="nf">ban</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">applying</span> <span class="k">or</span> <span class="n">removing</span> <span class="k">all</span> <span class="n">restrictions</span> <span class="n">will</span>
    <span class="n">be</span> <span class="n">returned</span><span class="p">.</span> <span class="n">This</span> <span class="k">is</span> <span class="n">what</span> <span class="n">the</span> <span class="n">API</span> <span class="n">calls</span> <span class="s2">"kick"</span> <span class="p">(</span><span class="n">restricting</span>
    <span class="k">all</span> <span class="n">permissions</span> <span class="n">removed</span> <span class="k">is</span> <span class="n">a</span> <span class="n">ban</span><span class="p">,</span> <span class="n">which</span> <span class="n">kicks</span> <span class="n">the</span> <span class="n">user</span><span class="p">).</span>

<span class="nf">unban</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">removing</span> <span class="k">all</span> <span class="n">restrictions</span> <span class="n">will</span> <span class="n">be</span>
    <span class="n">returned</span><span class="p">.</span> <span class="n">This</span> <span class="k">is</span> <span class="n">what</span> <span class="n">the</span> <span class="n">API</span> <span class="n">calls</span> <span class="s2">"unkick"</span><span class="p">.</span>

<span class="nf">promote</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="k">with</span> <span class="n">admin</span> <span class="n">promotions</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="nf">demote</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="k">with</span> <span class="n">admin</span> <span class="n">demotions</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="nf">info</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">changing</span> <span class="n">the</span> <span class="k">group</span> <span class="n">info</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="nf">settings</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">changing</span> <span class="n">the</span> <span class="k">group</span> <span class="n">settings</span> <span class="n">will</span> <span class="n">be</span>
    <span class="n">returned</span><span class="p">.</span>

<span class="nf">pinned</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">of</span> <span class="n">new</span> <span class="n">pinned</span> <span class="n">messages</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="nf">edit</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">of</span> <span class="n">message</span> <span class="n">edits</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

<span class="k">delete</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="k">If</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">events</span> <span class="n">of</span> <span class="n">message</span> <span class="n">deletions</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>
</code></pre>
</div>
<p>Yields
    Instances of <code>AdminLogEvent &lt;telethon.tl.custom.adminlogevent.AdminLogEvent&gt;</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    async for event in client.iter_admin_log(channel):</span>
<span class="err">        if event.changed_title:</span>
<span class="err">            print('The title changed from', event.old, 'to', event.new)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">iter_admin_log</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">min_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">search</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">admins</span><span class="p">:</span> <span class="s1">'hints.EntitiesLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">join</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">leave</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">invite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">restrict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">unrestrict</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ban</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">unban</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">promote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">demote</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">info</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">settings</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">pinned</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">edit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">delete</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_AdminLogIter</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Iterator over the admin log for the specified channel.</span>

<span class="sd">    The default order is from the most recent event to to the oldest.</span>

<span class="sd">    Note that you must be an administrator of it to use this method.</span>

<span class="sd">    If none of the filters are present (i.e. they all are `None`),</span>
<span class="sd">    *all* event types will be returned. If at least one of them is</span>
<span class="sd">    `True`, only those that are true will be returned.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The channel entity from which to get its admin log.</span>

<span class="sd">        limit (`int` | `None`, optional):</span>
<span class="sd">            Number of events to be retrieved.</span>

<span class="sd">            The limit may also be `None`, which would eventually return</span>
<span class="sd">            the whole history.</span>

<span class="sd">        max_id (`int`):</span>
<span class="sd">            All the events with a higher (newer) ID or equal to this will</span>
<span class="sd">            be excluded.</span>

<span class="sd">        min_id (`int`):</span>
<span class="sd">            All the events with a lower (older) ID or equal to this will</span>
<span class="sd">            be excluded.</span>

<span class="sd">        search (`str`):</span>
<span class="sd">            The string to be used as a search query.</span>

<span class="sd">        admins (`entity` | `list`):</span>
<span class="sd">            If present, the events will be filtered by these admins</span>
<span class="sd">            (or single admin) and only those caused by them will be</span>
<span class="sd">            returned.</span>

<span class="sd">        join (`bool`):</span>
<span class="sd">            If `True`, events for when a user joined will be returned.</span>

<span class="sd">        leave (`bool`):</span>
<span class="sd">            If `True`, events for when a user leaves will be returned.</span>

<span class="sd">        invite (`bool`):</span>
<span class="sd">            If `True`, events for when a user joins through an invite</span>
<span class="sd">            link will be returned.</span>

<span class="sd">        restrict (`bool`):</span>
<span class="sd">            If `True`, events with partial restrictions will be</span>
<span class="sd">            returned. This is what the API calls "ban".</span>

<span class="sd">        unrestrict (`bool`):</span>
<span class="sd">            If `True`, events removing restrictions will be returned.</span>
<span class="sd">            This is what the API calls "unban".</span>

<span class="sd">        ban (`bool`):</span>
<span class="sd">            If `True`, events applying or removing all restrictions will</span>
<span class="sd">            be returned. This is what the API calls "kick" (restricting</span>
<span class="sd">            all permissions removed is a ban, which kicks the user).</span>

<span class="sd">        unban (`bool`):</span>
<span class="sd">            If `True`, events removing all restrictions will be</span>
<span class="sd">            returned. This is what the API calls "unkick".</span>

<span class="sd">        promote (`bool`):</span>
<span class="sd">            If `True`, events with admin promotions will be returned.</span>

<span class="sd">        demote (`bool`):</span>
<span class="sd">            If `True`, events with admin demotions will be returned.</span>

<span class="sd">        info (`bool`):</span>
<span class="sd">            If `True`, events changing the group info will be returned.</span>

<span class="sd">        settings (`bool`):</span>
<span class="sd">            If `True`, events changing the group settings will be</span>
<span class="sd">            returned.</span>

<span class="sd">        pinned (`bool`):</span>
<span class="sd">            If `True`, events of new pinned messages will be returned.</span>

<span class="sd">        edit (`bool`):</span>
<span class="sd">            If `True`, events of message edits will be returned.</span>

<span class="sd">        delete (`bool`):</span>
<span class="sd">            If `True`, events of message deletions will be returned.</span>

<span class="sd">    Yields</span>
<span class="sd">        Instances of `AdminLogEvent &lt;telethon.tl.custom.adminlogevent.AdminLogEvent&gt;`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            async for event in client.iter_admin_log(channel):</span>
<span class="sd">                if event.changed_title:</span>
<span class="sd">                    print('The title changed from', event.old, 'to', event.new)</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">_AdminLogIter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">,</span>
        <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
        <span class="n">admins</span><span class="o">=</span><span class="n">admins</span><span class="p">,</span>
        <span class="n">search</span><span class="o">=</span><span class="n">search</span><span class="p">,</span>
        <span class="n">min_id</span><span class="o">=</span><span class="n">min_id</span><span class="p">,</span>
        <span class="n">max_id</span><span class="o">=</span><span class="n">max_id</span><span class="p">,</span>
        <span class="n">join</span><span class="o">=</span><span class="n">join</span><span class="p">,</span>
        <span class="n">leave</span><span class="o">=</span><span class="n">leave</span><span class="p">,</span>
        <span class="n">invite</span><span class="o">=</span><span class="n">invite</span><span class="p">,</span>
        <span class="n">restrict</span><span class="o">=</span><span class="n">restrict</span><span class="p">,</span>
        <span class="n">unrestrict</span><span class="o">=</span><span class="n">unrestrict</span><span class="p">,</span>
        <span class="n">ban</span><span class="o">=</span><span class="n">ban</span><span class="p">,</span>
        <span class="n">unban</span><span class="o">=</span><span class="n">unban</span><span class="p">,</span>
        <span class="n">promote</span><span class="o">=</span><span class="n">promote</span><span class="p">,</span>
        <span class="n">demote</span><span class="o">=</span><span class="n">demote</span><span class="p">,</span>
        <span class="n">info</span><span class="o">=</span><span class="n">info</span><span class="p">,</span>
        <span class="n">settings</span><span class="o">=</span><span class="n">settings</span><span class="p">,</span>
        <span class="n">pinned</span><span class="o">=</span><span class="n">pinned</span><span class="p">,</span>
        <span class="n">edit</span><span class="o">=</span><span class="n">edit</span><span class="p">,</span>
        <span class="n">delete</span><span class="o">=</span><span class="n">delete</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.iter_participants">
<code class="highlight language-python">
iter_participants<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">aggressive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.iter_participants" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Iterator over the participants belonging to the specified chat.</p>
<p>The order is unspecified.</p>
<p>Arguments
    entity (<code>entity</code>):
        The entity from which to retrieve the participants list.</p>
<div class="codehilite">
<pre><span></span><code><span class="k">limit</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">Limits</span> <span class="n">amount</span> <span class="n">of</span> <span class="n">participants</span> <span class="n">fetched</span><span class="p">.</span>

<span class="nf">search</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Look</span> <span class="k">for</span> <span class="n">participants</span> <span class="k">with</span> <span class="n">this</span> <span class="n">string</span> <span class="k">in</span> <span class="n">name</span><span class="o">/</span><span class="n">username</span><span class="p">.</span>

    <span class="k">If</span> <span class="ss">``</span><span class="n">aggressive</span> <span class="k">is</span> <span class="no">True</span><span class="ss">``</span><span class="p">,</span> <span class="n">the</span> <span class="n">symbols</span> <span class="k">from</span> <span class="n">this</span> <span class="n">string</span> <span class="n">will</span>
    <span class="n">be</span> <span class="n">used</span><span class="p">.</span>

<span class="nf">filter</span> <span class="p">(:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`ChannelParticipantsFilter`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">filter</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span><span class="p">,</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">only</span> <span class="n">admins</span>
    <span class="n">Note</span> <span class="n">that</span> <span class="n">you</span> <span class="n">might</span> <span class="k">not</span> <span class="n">have</span> <span class="n">permissions</span> <span class="k">for</span> <span class="n">some</span> <span class="n">filter</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">has</span> <span class="n">no</span> <span class="n">effect</span> <span class="k">for</span> <span class="n">normal</span> <span class="n">chats</span> <span class="k">or</span> <span class="n">users</span><span class="p">.</span>

    <span class="p">..</span> <span class="n">note</span><span class="p">::</span>

        <span class="n">The</span> <span class="n">filter</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`ChannelParticipantsBanned`</span> <span class="n">will</span> <span class="k">return</span>
        <span class="o">*</span><span class="n">restricted</span><span class="o">*</span> <span class="n">users</span><span class="p">.</span> <span class="k">If</span> <span class="n">you</span> <span class="n">want</span> <span class="o">*</span><span class="n">banned</span><span class="o">*</span> <span class="n">users</span> <span class="n">you</span> <span class="n">should</span>
        <span class="k">use</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`ChannelParticipantsKicked`</span> <span class="n">instead</span><span class="p">.</span>

<span class="nf">aggressive</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Aggressively</span> <span class="n">looks</span> <span class="k">for</span> <span class="k">all</span> <span class="n">participants</span> <span class="k">in</span> <span class="n">the</span> <span class="n">chat</span><span class="p">.</span>

    <span class="n">This</span> <span class="k">is</span> <span class="n">useful</span> <span class="k">for</span> <span class="n">channels</span> <span class="n">since</span> <span class="mi">20</span> <span class="n">July</span> <span class="mi">2018</span><span class="p">,</span>
    <span class="n">Telegram</span> <span class="n">added</span> <span class="n">a</span> <span class="n">server</span><span class="o">-</span><span class="n">side</span> <span class="k">limit</span> <span class="k">where</span> <span class="n">only</span> <span class="n">the</span>
    <span class="n">first</span> <span class="mi">200</span> <span class="n">members</span> <span class="n">can</span> <span class="n">be</span> <span class="n">retrieved</span><span class="p">.</span> <span class="k">With</span> <span class="n">this</span> <span class="n">flag</span>
    <span class="kt">set</span><span class="p">,</span> <span class="n">more</span> <span class="n">than</span> <span class="mi">200</span> <span class="n">will</span> <span class="n">be</span> <span class="n">often</span> <span class="n">be</span> <span class="n">retrieved</span><span class="p">.</span>

    <span class="n">This</span> <span class="n">has</span> <span class="n">no</span> <span class="n">effect</span> <span class="k">if</span> <span class="n">a</span> <span class="ss">``</span><span class="n">filter</span><span class="ss">``</span> <span class="k">is</span> <span class="n">given</span><span class="p">.</span>
</code></pre>
</div>
<p>Yields
    The :tl:<code>User</code> objects returned by :tl:<code>GetParticipantsRequest</code>
    with an additional <code>.participant</code> attribute which is the
    matched :tl:<code>ChannelParticipant</code> type for channels/megagroups
    or :tl:<code>ChatParticipants</code> for normal chats.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="c1"># Show all user IDs in a chat</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_participants</span><span class="p">(</span><span class="n">chat</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="c1"># Search by name</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_participants</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">'name'</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>

    <span class="c1"># Filter by admins</span>
    <span class="kn">from</span> <span class="nn">telethon.tl.types</span> <span class="kn">import</span> <span class="n">ChannelParticipantsAdmins</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_participants</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">ChannelParticipantsAdmins</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">iter_participants</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">search</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="s1">'types.TypeChannelParticipantsFilter'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">aggressive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_ParticipantsIter</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Iterator over the participants belonging to the specified chat.</span>

<span class="sd">    The order is unspecified.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The entity from which to retrieve the participants list.</span>

<span class="sd">        limit (`int`):</span>
<span class="sd">            Limits amount of participants fetched.</span>

<span class="sd">        search (`str`, optional):</span>
<span class="sd">            Look for participants with this string in name/username.</span>

<span class="sd">            If ``aggressive is True``, the symbols from this string will</span>
<span class="sd">            be used.</span>

<span class="sd">        filter (:tl:`ChannelParticipantsFilter`, optional):</span>
<span class="sd">            The filter to be used, if you want e.g. only admins</span>
<span class="sd">            Note that you might not have permissions for some filter.</span>
<span class="sd">            This has no effect for normal chats or users.</span>

<span class="sd">            .. note::</span>

<span class="sd">                The filter :tl:`ChannelParticipantsBanned` will return</span>
<span class="sd">                *restricted* users. If you want *banned* users you should</span>
<span class="sd">                use :tl:`ChannelParticipantsKicked` instead.</span>

<span class="sd">        aggressive (`bool`, optional):</span>
<span class="sd">            Aggressively looks for all participants in the chat.</span>

<span class="sd">            This is useful for channels since 20 July 2018,</span>
<span class="sd">            Telegram added a server-side limit where only the</span>
<span class="sd">            first 200 members can be retrieved. With this flag</span>
<span class="sd">            set, more than 200 will be often be retrieved.</span>

<span class="sd">            This has no effect if a ``filter`` is given.</span>

<span class="sd">    Yields</span>
<span class="sd">        The :tl:`User` objects returned by :tl:`GetParticipantsRequest`</span>
<span class="sd">        with an additional ``.participant`` attribute which is the</span>
<span class="sd">        matched :tl:`ChannelParticipant` type for channels/megagroups</span>
<span class="sd">        or :tl:`ChatParticipants` for normal chats.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Show all user IDs in a chat</span>
<span class="sd">            async for user in client.iter_participants(chat):</span>
<span class="sd">                print(user.id)</span>

<span class="sd">            # Search by name</span>
<span class="sd">            async for user in client.iter_participants(chat, search='name'):</span>
<span class="sd">                print(user.username)</span>

<span class="sd">            # Filter by admins</span>
<span class="sd">            from telethon.tl.types import ChannelParticipantsAdmins</span>
<span class="sd">            async for user in client.iter_participants(chat, filter=ChannelParticipantsAdmins):</span>
<span class="sd">                print(user.first_name)</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">_ParticipantsIter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">,</span>
        <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
        <span class="n">search</span><span class="o">=</span><span class="n">search</span><span class="p">,</span>
        <span class="n">aggressive</span><span class="o">=</span><span class="n">aggressive</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.iter_profile_photos">
<code class="highlight language-python">
iter_profile_photos<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.iter_profile_photos" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Iterator over a user's profile photos or a chat's photos.</p>
<p>The order is from the most recent photo to the oldest.</p>
<p>Arguments
    entity (<code>entity</code>):
        The entity from which to get the profile or chat photos.</p>
<div class="codehilite">
<pre><span></span><code><span class="k">limit</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">photos</span> <span class="k">to</span> <span class="n">be</span> <span class="n">retrieved</span><span class="p">.</span>

    <span class="n">The</span> <span class="k">limit</span> <span class="n">may</span> <span class="n">also</span> <span class="n">be</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">which</span> <span class="n">would</span> <span class="n">eventually</span> <span class="k">all</span>
    <span class="n">the</span> <span class="n">photos</span> <span class="n">that</span> <span class="n">are</span> <span class="n">still</span> <span class="n">available</span><span class="p">.</span>

<span class="nf">offset</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">How</span> <span class="n">many</span> <span class="n">photos</span> <span class="n">should</span> <span class="n">be</span> <span class="n">skipped</span> <span class="k">before</span> <span class="n">returning</span> <span class="n">the</span> <span class="n">first</span> <span class="n">one</span><span class="p">.</span>

<span class="nf">max_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">maximum</span> <span class="n">ID</span> <span class="n">allowed</span> <span class="k">when</span> <span class="n">fetching</span> <span class="n">photos</span><span class="p">.</span>
</code></pre>
</div>
<p>Yields
    Instances of :tl:<code>Photo</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Download all the profile photos of some user</span>
<span class="err">    async for photo in client.iter_profile_photos(user):</span>
<span class="err">        await client.download_media(photo)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">iter_profile_photos</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">max_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_ProfilePhotoIter</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Iterator over a user's profile photos or a chat's photos.</span>

<span class="sd">    The order is from the most recent photo to the oldest.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The entity from which to get the profile or chat photos.</span>

<span class="sd">        limit (`int` | `None`, optional):</span>
<span class="sd">            Number of photos to be retrieved.</span>

<span class="sd">            The limit may also be `None`, which would eventually all</span>
<span class="sd">            the photos that are still available.</span>

<span class="sd">        offset (`int`):</span>
<span class="sd">            How many photos should be skipped before returning the first one.</span>

<span class="sd">        max_id (`int`):</span>
<span class="sd">            The maximum ID allowed when fetching photos.</span>

<span class="sd">    Yields</span>
<span class="sd">        Instances of :tl:`Photo`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Download all the profile photos of some user</span>
<span class="sd">            async for photo in client.iter_profile_photos(user):</span>
<span class="sd">                await client.download_media(photo)</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">_ProfilePhotoIter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">,</span>
        <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
        <span class="n">max_id</span><span class="o">=</span><span class="n">max_id</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.chats.ChatMethods.kick_participant">
<code class="highlight language-python">
kick_participant<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.chats.ChatMethods.kick_participant" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Kicks a user from a chat.</p>
<p>Kicking yourself (<code>'me'</code>) will result in leaving the chat.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="err">Attempting to kick someone who was banned will remove their</span>
<span class="err">restrictions (and thus unbanning them), since kicking is just</span>
<span class="err">ban + unban.</span>
</code></pre>
</div>
<p>Arguments
    entity (<code>entity</code>):
        The channel or chat where the user should be kicked from.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">user</span> <span class="p">(</span><span class="ss">`entity`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">user</span> <span class="k">to</span> <span class="n">kick</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Kick</span> <span class="k">some</span> <span class="k">user</span> <span class="k">from</span> <span class="k">some</span> <span class="n">chat</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">kick_participant</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="k">user</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Leaving</span> <span class="n">chat</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">kick_participant</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'me'</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\chats.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">kick_participant</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">user</span><span class="p">:</span> <span class="s1">'typing.Optional[hints.EntityLike]'</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Kicks a user from a chat.</span>

<span class="sd">    Kicking yourself (``'me'``) will result in leaving the chat.</span>

<span class="sd">    .. note::</span>

<span class="sd">        Attempting to kick someone who was banned will remove their</span>
<span class="sd">        restrictions (and thus unbanning them), since kicking is just</span>
<span class="sd">        ban + unban.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The channel or chat where the user should be kicked from.</span>

<span class="sd">        user (`entity`, optional):</span>
<span class="sd">            The user to kick.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Kick some user from some chat</span>
<span class="sd">            await client.kick_participant(chat, user)</span>

<span class="sd">            # Leaving chat</span>
<span class="sd">            await client.kick_participant(chat, 'me')</span>
<span class="sd">    """</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="o">!=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You must pass a user entity'</span><span class="p">)</span>

    <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHAT</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">DeleteChatUserRequest</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">user</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerSelf</span><span class="p">):</span>
            <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">LeaveChannelRequest</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">EditBannedRequest</span><span class="p">(</span>
                <span class="n">channel</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
                <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
                <span class="n">banned_rights</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ChatBannedRights</span><span class="p">(</span><span class="n">until_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">view_messages</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="p">))</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">EditBannedRequest</span><span class="p">(</span>
                <span class="n">channel</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
                <span class="n">user_id</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
                <span class="n">banned_rights</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">ChatBannedRights</span><span class="p">(</span><span class="n">until_date</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You must pass either a channel or a chat'</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.dialogs" id="telethon.client.dialogs" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.dialogs" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods">
<code>DialogMethods</code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods.conversation">
<code class="highlight language-python">
conversation<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">total_timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_messages</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">exclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">replies_are_responses</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods.conversation" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Creates a <code>Conversation &lt;telethon.tl.custom.conversation.Conversation&gt;</code>
with the given entity.</p>
<p>This is not the same as just sending a message to create a "dialog"
with them, but rather a way to easily send messages and await for
responses or other reactions. Refer to its documentation for more.</p>
<p>Arguments
    entity (<code>entity</code>):
        The entity with which a new conversation should be opened.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">timeout</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`float`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="k">default</span> <span class="nf">timeout</span> <span class="p">(</span><span class="k">in</span> <span class="n">seconds</span><span class="p">)</span> <span class="o">*</span><span class="n">per</span> <span class="n">action</span><span class="o">*</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span> <span class="n">You</span>
    <span class="n">may</span> <span class="n">also</span> <span class="n">override</span> <span class="n">this</span> <span class="n">timeout</span> <span class="k">on</span> <span class="n">a</span> <span class="n">per</span><span class="o">-</span><span class="n">method</span> <span class="n">basis</span><span class="p">.</span> <span class="k">By</span>
    <span class="k">default</span> <span class="k">each</span> <span class="n">action</span> <span class="n">can</span> <span class="n">take</span> <span class="n">up</span> <span class="k">to</span> <span class="mi">60</span> <span class="nf">seconds</span> <span class="p">(</span><span class="n">the</span> <span class="n">value</span> <span class="n">of</span>
    <span class="n">this</span> <span class="n">timeout</span><span class="p">).</span>

<span class="nf">total_timeout</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`float`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">total</span> <span class="nf">timeout</span> <span class="p">(</span><span class="k">in</span> <span class="n">seconds</span><span class="p">)</span> <span class="k">to</span> <span class="k">use</span> <span class="k">for</span> <span class="n">the</span> <span class="n">whole</span>
    <span class="n">conversation</span><span class="p">.</span> <span class="n">This</span> <span class="n">takes</span> <span class="n">priority</span> <span class="n">over</span> <span class="n">per</span><span class="o">-</span><span class="n">action</span>
    <span class="n">timeouts</span><span class="p">.</span> <span class="n">After</span> <span class="n">these</span> <span class="n">many</span> <span class="n">seconds</span> <span class="n">pass</span><span class="p">,</span> <span class="n">subsequent</span>
    <span class="n">actions</span> <span class="n">will</span> <span class="n">result</span> <span class="k">in</span> <span class="ss">``</span><span class="n">asyncio</span><span class="p">.</span><span class="n">TimeoutError</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">max_messages</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">maximum</span> <span class="n">amount</span> <span class="n">of</span> <span class="n">messages</span> <span class="n">this</span> <span class="n">conversation</span> <span class="n">will</span>
    <span class="n">remember</span><span class="p">.</span> <span class="n">After</span> <span class="n">these</span> <span class="n">many</span> <span class="n">messages</span> <span class="n">arrive</span> <span class="k">in</span> <span class="n">the</span>
    <span class="n">specified</span> <span class="n">chat</span><span class="p">,</span> <span class="n">subsequent</span> <span class="n">actions</span> <span class="n">will</span> <span class="n">result</span> <span class="k">in</span>
    <span class="ss">``</span><span class="n">ValueError</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">exclusive</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">By</span> <span class="k">default</span><span class="p">,</span> <span class="n">conversations</span> <span class="n">are</span> <span class="n">exclusive</span> <span class="n">within</span> <span class="n">a</span> <span class="n">single</span>
    <span class="n">chat</span><span class="p">.</span> <span class="n">That</span> <span class="n">means</span> <span class="n">that</span> <span class="k">while</span> <span class="n">a</span> <span class="n">conversation</span> <span class="k">is</span> <span class="n">open</span> <span class="k">in</span> <span class="n">a</span>
    <span class="n">chat</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span><span class="s1">'t open another one in the same chat, unless</span>
<span class="s1">    you disable this flag.</span>

<span class="s1">    If you try opening an exclusive conversation for</span>
<span class="s1">    a chat where it'</span><span class="n">s</span> <span class="n">already</span> <span class="n">open</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">raise</span>
    <span class="ss">``</span><span class="n">AlreadyInConversationError</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">replies_are_responses</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">replies</span> <span class="n">should</span> <span class="n">be</span> <span class="n">treated</span> <span class="k">as</span> <span class="n">responses</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="n">setting</span> <span class="k">is</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">calls</span> <span class="k">to</span> <span class="ss">`conv.get_response</span>
<span class="ss">    &lt;telethon.tl.custom.conversation.Conversation.get_response&gt;`</span>
    <span class="k">and</span> <span class="n">a</span> <span class="n">subsequent</span> <span class="k">call</span> <span class="k">to</span> <span class="ss">`conv.get_reply</span>
<span class="ss">    &lt;telethon.tl.custom.conversation.Conversation.get_reply&gt;`</span>
    <span class="n">will</span> <span class="k">return</span> <span class="n">different</span> <span class="n">messages</span><span class="p">,</span> <span class="n">otherwise</span> <span class="n">they</span> <span class="n">may</span> <span class="k">return</span>
    <span class="n">the</span> <span class="n">same</span> <span class="n">message</span><span class="p">.</span>

    <span class="n">Consider</span> <span class="n">the</span> <span class="n">following</span> <span class="n">scenario</span> <span class="k">with</span> <span class="n">one</span> <span class="n">outgoing</span> <span class="n">message</span><span class="p">,</span>
    <span class="mi">1</span><span class="p">,</span> <span class="k">and</span> <span class="n">two</span> <span class="n">incoming</span> <span class="n">messages</span><span class="p">,</span> <span class="n">the</span> <span class="n">second</span> <span class="n">one</span> <span class="n">replying</span><span class="p">::</span>

                            <span class="n">Hello</span><span class="o">!</span> <span class="o">&lt;</span><span class="mi">1</span>
        <span class="mi">2</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">reply</span> <span class="k">to</span> <span class="mi">1</span><span class="p">)</span> <span class="n">Hi</span><span class="o">!</span>
        <span class="mi">3</span><span class="o">&gt;</span> <span class="p">(</span><span class="n">reply</span> <span class="k">to</span> <span class="mi">1</span><span class="p">)</span> <span class="n">How</span> <span class="n">are</span> <span class="n">you</span><span class="o">?</span>

    <span class="k">And</span> <span class="n">the</span> <span class="n">following</span> <span class="n">code</span><span class="p">:</span>

    <span class="p">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">python</span>

        <span class="n">async</span> <span class="k">with</span> <span class="n">client</span><span class="p">.</span><span class="nf">conversation</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span> <span class="k">as</span> <span class="n">conv</span><span class="p">:</span>
            <span class="n">msg1</span> <span class="o">=</span> <span class="n">await</span> <span class="n">conv</span><span class="p">.</span><span class="nf">send_message</span><span class="p">(</span><span class="s1">'Hello!'</span><span class="p">)</span>
            <span class="n">msg2</span> <span class="o">=</span> <span class="n">await</span> <span class="n">conv</span><span class="p">.</span><span class="nf">get_response</span><span class="p">()</span>
            <span class="n">msg3</span> <span class="o">=</span> <span class="n">await</span> <span class="n">conv</span><span class="p">.</span><span class="nf">get_reply</span><span class="p">()</span>

    <span class="k">With</span> <span class="n">the</span> <span class="n">setting</span> <span class="n">enabled</span><span class="p">,</span> <span class="ss">``</span><span class="n">msg2</span><span class="ss">``</span> <span class="n">will</span> <span class="n">be</span> <span class="ss">``</span><span class="s1">'Hi!'</span><span class="ss">``</span> <span class="k">and</span>
    <span class="ss">``</span><span class="n">msg3</span><span class="ss">``</span> <span class="n">be</span> <span class="ss">``</span><span class="s1">'How are you?'</span><span class="ss">``</span> <span class="n">since</span> <span class="n">replies</span> <span class="n">are</span> <span class="n">also</span>
    <span class="n">responses</span><span class="p">,</span> <span class="k">and</span> <span class="n">a</span> <span class="n">response</span> <span class="n">was</span> <span class="n">already</span> <span class="n">returned</span><span class="p">.</span>

    <span class="k">With</span> <span class="n">the</span> <span class="n">setting</span> <span class="n">disabled</span><span class="p">,</span> <span class="k">both</span> <span class="ss">``</span><span class="n">msg2</span><span class="ss">``</span> <span class="k">and</span> <span class="ss">``</span><span class="n">msg3</span><span class="ss">``</span> <span class="n">will</span>
    <span class="n">be</span> <span class="ss">``</span><span class="s1">'Hi!'</span><span class="ss">``</span> <span class="n">since</span> <span class="n">one</span> <span class="k">is</span> <span class="n">a</span> <span class="n">response</span> <span class="k">and</span> <span class="n">also</span> <span class="n">a</span> <span class="n">reply</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    A <code>Conversation &lt;telethon.tl.custom.conversation.Conversation&gt;</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="o">&lt;</span><span class="n">you</span><span class="o">&gt;</span> <span class="n">denotes</span> <span class="n">outgoing</span> <span class="n">messages</span> <span class="n">you</span> <span class="n">sent</span>
    <span class="o">#</span> <span class="o">&lt;</span><span class="n">usr</span><span class="o">&gt;</span> <span class="n">denotes</span> <span class="n">incoming</span> <span class="n">response</span> <span class="n">messages</span>
    <span class="k">with</span> <span class="n">bot</span><span class="p">.</span><span class="n">conversation</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span> <span class="k">as</span> <span class="n">conv</span><span class="p">:</span>
        <span class="o">#</span> <span class="o">&lt;</span><span class="n">you</span><span class="o">&gt;</span> <span class="n">Hi</span><span class="o">!</span>
        <span class="n">conv</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'Hi!'</span><span class="p">)</span>

        <span class="o">#</span> <span class="o">&lt;</span><span class="n">usr</span><span class="o">&gt;</span> <span class="n">Hello</span><span class="o">!</span>
        <span class="n">hello</span> <span class="o">=</span> <span class="n">conv</span><span class="p">.</span><span class="n">get_response</span><span class="p">()</span>

        <span class="o">#</span> <span class="o">&lt;</span><span class="n">you</span><span class="o">&gt;</span> <span class="n">Please</span> <span class="n">tell</span> <span class="n">me</span> <span class="n">your</span> <span class="n">name</span>
        <span class="n">conv</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'Please tell me your name'</span><span class="p">)</span>

        <span class="o">#</span> <span class="o">&lt;</span><span class="n">usr</span><span class="o">&gt;</span> <span class="o">?</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">conv</span><span class="p">.</span><span class="n">get_response</span><span class="p">().</span><span class="n">raw_text</span>

        <span class="n">while</span> <span class="k">not</span> <span class="k">any</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="k">in</span> <span class="n">name</span><span class="p">):</span>
            <span class="o">#</span> <span class="o">&lt;</span><span class="n">you</span><span class="o">&gt;</span> <span class="n">Your</span> <span class="n">name</span> <span class="n">didn</span><span class="s1">'t have any letters! Try again</span>
<span class="s1">            conv.send_message("Your name didn'</span><span class="n">t</span> <span class="n">have</span> <span class="k">any</span> <span class="n">letters</span><span class="o">!</span> <span class="n">Try</span> <span class="n">again</span><span class="err">"</span><span class="p">)</span>

            <span class="o">#</span> <span class="o">&lt;</span><span class="n">usr</span><span class="o">&gt;</span> <span class="n">Human</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">conv</span><span class="p">.</span><span class="n">get_response</span><span class="p">().</span><span class="n">raw_text</span>

        <span class="o">#</span> <span class="o">&lt;</span><span class="n">you</span><span class="o">&gt;</span> <span class="n">Thanks</span> <span class="n">Human</span><span class="o">!</span>
        <span class="n">conv</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'Thanks {}!'</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\dialogs.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">conversation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">60</span><span class="p">,</span>
        <span class="n">total_timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_messages</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
        <span class="n">exclusive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">replies_are_responses</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">custom</span><span class="o">.</span><span class="n">Conversation</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Creates a `Conversation &lt;telethon.tl.custom.conversation.Conversation&gt;`</span>
<span class="sd">    with the given entity.</span>

<span class="sd">    This is not the same as just sending a message to create a "dialog"</span>
<span class="sd">    with them, but rather a way to easily send messages and await for</span>
<span class="sd">    responses or other reactions. Refer to its documentation for more.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The entity with which a new conversation should be opened.</span>

<span class="sd">        timeout (`int` | `float`, optional):</span>
<span class="sd">            The default timeout (in seconds) *per action* to be used. You</span>
<span class="sd">            may also override this timeout on a per-method basis. By</span>
<span class="sd">            default each action can take up to 60 seconds (the value of</span>
<span class="sd">            this timeout).</span>

<span class="sd">        total_timeout (`int` | `float`, optional):</span>
<span class="sd">            The total timeout (in seconds) to use for the whole</span>
<span class="sd">            conversation. This takes priority over per-action</span>
<span class="sd">            timeouts. After these many seconds pass, subsequent</span>
<span class="sd">            actions will result in ``asyncio.TimeoutError``.</span>

<span class="sd">        max_messages (`int`, optional):</span>
<span class="sd">            The maximum amount of messages this conversation will</span>
<span class="sd">            remember. After these many messages arrive in the</span>
<span class="sd">            specified chat, subsequent actions will result in</span>
<span class="sd">            ``ValueError``.</span>

<span class="sd">        exclusive (`bool`, optional):</span>
<span class="sd">            By default, conversations are exclusive within a single</span>
<span class="sd">            chat. That means that while a conversation is open in a</span>
<span class="sd">            chat, you can't open another one in the same chat, unless</span>
<span class="sd">            you disable this flag.</span>

<span class="sd">            If you try opening an exclusive conversation for</span>
<span class="sd">            a chat where it's already open, it will raise</span>
<span class="sd">            ``AlreadyInConversationError``.</span>

<span class="sd">        replies_are_responses (`bool`, optional):</span>
<span class="sd">            Whether replies should be treated as responses or not.</span>

<span class="sd">            If the setting is enabled, calls to `conv.get_response</span>
<span class="sd">            &lt;telethon.tl.custom.conversation.Conversation.get_response&gt;`</span>
<span class="sd">            and a subsequent call to `conv.get_reply</span>
<span class="sd">            &lt;telethon.tl.custom.conversation.Conversation.get_reply&gt;`</span>
<span class="sd">            will return different messages, otherwise they may return</span>
<span class="sd">            the same message.</span>

<span class="sd">            Consider the following scenario with one outgoing message,</span>
<span class="sd">            1, and two incoming messages, the second one replying::</span>

<span class="sd">                                    Hello! &lt;1</span>
<span class="sd">                2&gt; (reply to 1) Hi!</span>
<span class="sd">                3&gt; (reply to 1) How are you?</span>

<span class="sd">            And the following code:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                async with client.conversation(chat) as conv:</span>
<span class="sd">                    msg1 = await conv.send_message('Hello!')</span>
<span class="sd">                    msg2 = await conv.get_response()</span>
<span class="sd">                    msg3 = await conv.get_reply()</span>

<span class="sd">            With the setting enabled, ``msg2`` will be ``'Hi!'`` and</span>
<span class="sd">            ``msg3`` be ``'How are you?'`` since replies are also</span>
<span class="sd">            responses, and a response was already returned.</span>

<span class="sd">            With the setting disabled, both ``msg2`` and ``msg3`` will</span>
<span class="sd">            be ``'Hi!'`` since one is a response and also a reply.</span>

<span class="sd">    Returns</span>
<span class="sd">        A `Conversation &lt;telethon.tl.custom.conversation.Conversation&gt;`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # &lt;you&gt; denotes outgoing messages you sent</span>
<span class="sd">            # &lt;usr&gt; denotes incoming response messages</span>
<span class="sd">            with bot.conversation(chat) as conv:</span>
<span class="sd">                # &lt;you&gt; Hi!</span>
<span class="sd">                conv.send_message('Hi!')</span>

<span class="sd">                # &lt;usr&gt; Hello!</span>
<span class="sd">                hello = conv.get_response()</span>

<span class="sd">                # &lt;you&gt; Please tell me your name</span>
<span class="sd">                conv.send_message('Please tell me your name')</span>

<span class="sd">                # &lt;usr&gt; ?</span>
<span class="sd">                name = conv.get_response().raw_text</span>

<span class="sd">                while not any(x.isalpha() for x in name):</span>
<span class="sd">                    # &lt;you&gt; Your name didn't have any letters! Try again</span>
<span class="sd">                    conv.send_message("Your name didn't have any letters! Try again")</span>

<span class="sd">                    # &lt;usr&gt; Human</span>
<span class="sd">                    name = conv.get_response().raw_text</span>

<span class="sd">                # &lt;you&gt; Thanks Human!</span>
<span class="sd">                conv.send_message('Thanks {}!'.format(name))</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="n">custom</span><span class="o">.</span><span class="n">Conversation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="n">total_timeout</span><span class="o">=</span><span class="n">total_timeout</span><span class="p">,</span>
        <span class="n">max_messages</span><span class="o">=</span><span class="n">max_messages</span><span class="p">,</span>
        <span class="n">exclusive</span><span class="o">=</span><span class="n">exclusive</span><span class="p">,</span>
        <span class="n">replies_are_responses</span><span class="o">=</span><span class="n">replies_are_responses</span>

    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods.delete_dialog">
<code class="highlight language-python">
delete_dialog<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">revoke</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods.delete_dialog" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Deletes a dialog (leaves a chat or channel).</p>
<p>This method can be used as a user and as a bot. However,
bots will only be able to use it to leave groups and channels
(trying to delete a private conversation will do nothing).</p>
<p>See also <code>Dialog.delete() &lt;telethon.tl.custom.dialog.Dialog.delete&gt;</code>.</p>
<p>Arguments
    entity (entities):
        The entity of the dialog to delete. If it's a chat or
        channel, you will leave it. Note that the chat itself
        is not deleted, only the dialog, because you left it.</p>
<div class="codehilite">
<pre><span></span><code><span class="k">revoke</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">On</span> <span class="n">private</span> <span class="n">chats</span><span class="p">,</span> <span class="n">you</span> <span class="n">may</span> <span class="k">revoke</span> <span class="n">the</span> <span class="n">messages</span> <span class="k">from</span>
    <span class="n">the</span> <span class="n">other</span> <span class="n">peer</span> <span class="n">too</span><span class="p">.</span> <span class="k">By</span> <span class="k">default</span><span class="p">,</span> <span class="n">it</span><span class="err">'</span><span class="n">s</span> <span class="ss">`False`</span><span class="p">.</span> <span class="kt">Set</span>
    <span class="n">it</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">to</span> <span class="k">delete</span> <span class="n">the</span> <span class="n">history</span> <span class="k">for</span> <span class="k">both</span><span class="p">.</span>

    <span class="n">This</span> <span class="n">makes</span> <span class="n">no</span> <span class="n">difference</span> <span class="k">for</span> <span class="n">bot</span> <span class="n">accounts</span><span class="p">,</span> <span class="n">who</span> <span class="n">can</span>
    <span class="n">only</span> <span class="k">leave</span> <span class="n">groups</span> <span class="k">and</span> <span class="n">channels</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The :tl:<code>Updates</code> object that the request produces,
    or nothing for private conversations.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Deleting</span> <span class="n">the</span> <span class="k">first</span> <span class="n">dialog</span>
    <span class="n">dialogs</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">delete_dialog</span><span class="p">(</span><span class="n">dialogs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="o">#</span> <span class="n">Leaving</span> <span class="n">a</span> <span class="n">channel</span> <span class="k">by</span> <span class="n">username</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">delete_dialog</span><span class="p">(</span><span class="s1">'username'</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\dialogs.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_dialog</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">revoke</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes a dialog (leaves a chat or channel).</span>

<span class="sd">    This method can be used as a user and as a bot. However,</span>
<span class="sd">    bots will only be able to use it to leave groups and channels</span>
<span class="sd">    (trying to delete a private conversation will do nothing).</span>

<span class="sd">    See also `Dialog.delete() &lt;telethon.tl.custom.dialog.Dialog.delete&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (entities):</span>
<span class="sd">            The entity of the dialog to delete. If it's a chat or</span>
<span class="sd">            channel, you will leave it. Note that the chat itself</span>
<span class="sd">            is not deleted, only the dialog, because you left it.</span>

<span class="sd">        revoke (`bool`, optional):</span>
<span class="sd">            On private chats, you may revoke the messages from</span>
<span class="sd">            the other peer too. By default, it's `False`. Set</span>
<span class="sd">            it to `True` to delete the history for both.</span>

<span class="sd">            This makes no difference for bot accounts, who can</span>
<span class="sd">            only leave groups and channels.</span>

<span class="sd">    Returns</span>
<span class="sd">        The :tl:`Updates` object that the request produces,</span>
<span class="sd">        or nothing for private conversations.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Deleting the first dialog</span>
<span class="sd">            dialogs = await client.get_dialogs(5)</span>
<span class="sd">            await client.delete_dialog(dialogs[0])</span>

<span class="sd">            # Leaving a channel by username</span>
<span class="sd">            await client.delete_dialog('username')</span>
<span class="sd">    """</span>
    <span class="c1"># If we have enough information (`Dialog.delete` gives it to us),</span>
    <span class="c1"># then we know we don't have to kick ourselves in deactivated chats.</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Chat</span><span class="p">):</span>
        <span class="n">deactivated</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">deactivated</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">deactivated</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">LeaveChannelRequest</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHAT</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">deactivated</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">DeleteChatUserRequest</span><span class="p">(</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputUserSelf</span><span class="p">()))</span>
        <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">PeerIdInvalidError</span><span class="p">:</span>
            <span class="c1"># Happens if we didn't have the deactivated information</span>
            <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_bot</span><span class="p">():</span>
        <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">DeleteHistoryRequest</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">revoke</span><span class="o">=</span><span class="n">revoke</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods.edit_folder">
<code class="highlight language-python">
edit_folder<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">unpack</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods.edit_folder" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Edits the folder used by one or more dialogs to archive them.</p>
<p>Arguments
    entity (entities):
        The entity or list of entities to move to the desired
        archive folder.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">folder</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">folder</span> <span class="k">to</span> <span class="n">which</span> <span class="n">the</span> <span class="n">dialog</span> <span class="n">should</span> <span class="n">be</span> <span class="n">archived</span> <span class="k">to</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="s2">"archive"</span> <span class="n">a</span> <span class="n">dialog</span><span class="p">,</span> <span class="k">use</span> <span class="ss">``</span><span class="n">folder</span><span class="o">=</span><span class="mi">1</span><span class="ss">``</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="s2">"un-archive"</span> <span class="n">it</span><span class="p">,</span> <span class="k">use</span> <span class="ss">``</span><span class="n">folder</span><span class="o">=</span><span class="mi">0</span><span class="ss">``</span><span class="p">.</span>

    <span class="n">You</span> <span class="n">may</span> <span class="n">also</span> <span class="n">pass</span> <span class="n">a</span> <span class="n">list</span> <span class="k">with</span> <span class="n">the</span> <span class="n">same</span> <span class="n">length</span> <span class="k">as</span>
    <span class="ss">`entities`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="n">control</span> <span class="k">where</span> <span class="k">each</span> <span class="n">entity</span>
    <span class="n">will</span> <span class="n">go</span><span class="p">.</span>

<span class="nf">unpack</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="n">unpack</span> <span class="n">an</span> <span class="n">archived</span> <span class="n">folder</span><span class="p">,</span> <span class="kt">set</span> <span class="n">this</span>
    <span class="n">parameter</span> <span class="k">to</span> <span class="n">the</span> <span class="n">folder</span> <span class="n">number</span> <span class="n">that</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span>
    <span class="k">delete</span><span class="p">.</span>

    <span class="k">When</span> <span class="n">you</span> <span class="n">unpack</span> <span class="n">a</span> <span class="n">folder</span><span class="p">,</span> <span class="k">all</span> <span class="n">the</span> <span class="n">dialogs</span> <span class="n">inside</span> <span class="n">are</span>
    <span class="n">moved</span> <span class="k">to</span> <span class="n">the</span> <span class="n">folder</span> <span class="n">number</span> <span class="mi">0</span><span class="p">.</span>

    <span class="n">You</span> <span class="n">can</span> <span class="n">only</span> <span class="k">use</span> <span class="n">this</span> <span class="n">parameter</span> <span class="k">if</span> <span class="n">the</span> <span class="n">other</span> <span class="n">two</span>
    <span class="n">are</span> <span class="k">not</span> <span class="kt">set</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The :tl:<code>Updates</code> object that the request produces.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Archiving</span> <span class="n">the</span> <span class="k">first</span> <span class="mi">5</span> <span class="n">dialogs</span>
    <span class="n">dialogs</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">edit_folder</span><span class="p">(</span><span class="n">dialogs</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Un</span><span class="o">-</span><span class="n">archiving</span> <span class="n">the</span> <span class="n">third</span> <span class="n">dialog</span> <span class="p">(</span><span class="n">archiving</span> <span class="k">to</span> <span class="n">folder</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">edit_folder</span><span class="p">(</span><span class="n">dialog</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Moving</span> <span class="n">the</span> <span class="k">first</span> <span class="n">dialog</span> <span class="k">to</span> <span class="n">folder</span> <span class="mi">0</span> <span class="k">and</span> <span class="n">the</span> <span class="k">second</span> <span class="k">to</span> <span class="mi">1</span>
    <span class="n">dialogs</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">edit_folder</span><span class="p">(</span><span class="n">dialogs</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

    <span class="o">#</span> <span class="n">Un</span><span class="o">-</span><span class="n">archiving</span> <span class="k">all</span> <span class="n">dialogs</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">archive</span><span class="p">(</span><span class="n">unpack</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\dialogs.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit_folder</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntitiesLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">unpack</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">types</span><span class="o">.</span><span class="n">Updates</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Edits the folder used by one or more dialogs to archive them.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (entities):</span>
<span class="sd">            The entity or list of entities to move to the desired</span>
<span class="sd">            archive folder.</span>

<span class="sd">        folder (`int`):</span>
<span class="sd">            The folder to which the dialog should be archived to.</span>

<span class="sd">            If you want to "archive" a dialog, use ``folder=1``.</span>

<span class="sd">            If you want to "un-archive" it, use ``folder=0``.</span>

<span class="sd">            You may also pass a list with the same length as</span>
<span class="sd">            `entities` if you want to control where each entity</span>
<span class="sd">            will go.</span>

<span class="sd">        unpack (`int`, optional):</span>
<span class="sd">            If you want to unpack an archived folder, set this</span>
<span class="sd">            parameter to the folder number that you want to</span>
<span class="sd">            delete.</span>

<span class="sd">            When you unpack a folder, all the dialogs inside are</span>
<span class="sd">            moved to the folder number 0.</span>

<span class="sd">            You can only use this parameter if the other two</span>
<span class="sd">            are not set.</span>

<span class="sd">    Returns</span>
<span class="sd">        The :tl:`Updates` object that the request produces.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Archiving the first 5 dialogs</span>
<span class="sd">            dialogs = await client.get_dialogs(5)</span>
<span class="sd">            await client.edit_folder(dialogs, 1)</span>

<span class="sd">            # Un-archiving the third dialog (archiving to folder 0)</span>
<span class="sd">            await client.edit_folder(dialog[2], 0)</span>

<span class="sd">            # Moving the first dialog to folder 0 and the second to 1</span>
<span class="sd">            dialogs = await client.get_dialogs(2)</span>
<span class="sd">            await client.edit_folder(dialogs, [0, 1])</span>

<span class="sd">            # Un-archiving all dialogs</span>
<span class="sd">            await client.archive(unpack=1)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">entity</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">unpack</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You can only set either entities or unpack, not both'</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">unpack</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">folders</span><span class="o">.</span><span class="n">DeleteFolderRequest</span><span class="p">(</span>
            <span class="n">folder_id</span><span class="o">=</span><span class="n">unpack</span>
        <span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="n">entities</span> <span class="o">=</span> <span class="p">[</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">entities</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
            <span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">),</span> <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">folder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'You must specify a folder'</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="n">folder</span> <span class="o">=</span> <span class="p">[</span><span class="n">folder</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">entities</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'Number of folders does not match number of entities'</span><span class="p">)</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">folders</span><span class="o">.</span><span class="n">EditPeerFoldersRequest</span><span class="p">([</span>
        <span class="n">types</span><span class="o">.</span><span class="n">InputFolderPeer</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">folder_id</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">entities</span><span class="p">,</span> <span class="n">folder</span><span class="p">)</span>
    <span class="p">]))</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods.get_dialogs">
<code class="highlight language-python">
get_dialogs<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">offset_peer</span><span class="o">=&lt;</span><span class="n">telethon</span><span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">InputPeerEmpty</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x000001AC5007C6D0</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ignore_pinned</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore_migrated</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">archived</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods.get_dialogs" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Same as <code>iter_dialogs()</code>, but returns a
<code>TotalList &lt;telethon.helpers.TotalList&gt;</code> instead.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="k">Get</span> <span class="k">all</span> <span class="k">open</span> <span class="n">conversation</span><span class="p">,</span> <span class="n">print</span> <span class="n">the</span> <span class="n">title</span> <span class="k">of</span> <span class="n">the</span> <span class="k">first</span>
    <span class="n">dialogs</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">()</span>
    <span class="k">first</span> <span class="o">=</span> <span class="n">dialogs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">print</span><span class="p">(</span><span class="k">first</span><span class="p">.</span><span class="n">title</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">dialog</span> <span class="n">somewhere</span> <span class="k">else</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="k">first</span><span class="p">,</span> <span class="s1">'hi'</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Getting</span> <span class="k">only</span> <span class="n">non</span><span class="o">-</span><span class="n">archived</span> <span class="n">dialogs</span> <span class="p">(</span><span class="k">both</span> <span class="n">equivalent</span><span class="p">)</span>
    <span class="n">non_archived</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">non_archived</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">(</span><span class="n">archived</span><span class="o">=</span><span class="k">False</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Getting</span> <span class="k">only</span> <span class="n">archived</span> <span class="n">dialogs</span> <span class="p">(</span><span class="k">both</span> <span class="n">equivalent</span><span class="p">)</span>
    <span class="n">archived</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">archived</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_dialogs</span><span class="p">(</span><span class="n">archived</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\dialogs.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_dialogs</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'hints.TotalList'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Same as `iter_dialogs()`, but returns a</span>
<span class="sd">    `TotalList &lt;telethon.helpers.TotalList&gt;` instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Get all open conversation, print the title of the first</span>
<span class="sd">            dialogs = await client.get_dialogs()</span>
<span class="sd">            first = dialogs[0]</span>
<span class="sd">            print(first.title)</span>

<span class="sd">            # Use the dialog somewhere else</span>
<span class="sd">            await client.send_message(first, 'hi')</span>

<span class="sd">            # Getting only non-archived dialogs (both equivalent)</span>
<span class="sd">            non_archived = await client.get_dialogs(folder=0)</span>
<span class="sd">            non_archived = await client.get_dialogs(archived=False)</span>

<span class="sd">            # Getting only archived dialogs (both equivalent)</span>
<span class="sd">            archived = await client.get_dialogs(folder=1)</span>
<span class="sd">            archived = await client.get_dialogs(archived=True)</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_dialogs</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods.get_drafts">
<code class="highlight language-python">
get_drafts<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods.get_drafts" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Same as <code>iter_drafts()</code>, but returns a list instead.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="k">Get</span> <span class="n">drafts</span><span class="p">,</span> <span class="n">print</span> <span class="n">the</span> <span class="nb">text</span> <span class="k">of</span> <span class="n">the</span> <span class="k">first</span>
    <span class="n">drafts</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_drafts</span><span class="p">()</span>
    <span class="n">print</span><span class="p">(</span><span class="n">drafts</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nb">text</span><span class="p">)</span>

    <span class="o">#</span> <span class="k">Get</span> <span class="n">the</span> <span class="n">draft</span> <span class="k">in</span> <span class="n">your</span> <span class="n">chat</span>
    <span class="n">draft</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_drafts</span><span class="p">(</span><span class="s1">'me'</span><span class="p">)</span>
    <span class="n">print</span><span class="p">(</span><span class="n">drafts</span><span class="p">.</span><span class="nb">text</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\dialogs.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_drafts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntitiesLike'</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'hints.TotalList'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Same as `iter_drafts()`, but returns a list instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Get drafts, print the text of the first</span>
<span class="sd">            drafts = await client.get_drafts()</span>
<span class="sd">            print(drafts[0].text)</span>

<span class="sd">            # Get the draft in your chat</span>
<span class="sd">            draft = await client.get_drafts('me')</span>
<span class="sd">            print(drafts.text)</span>
<span class="sd">    """</span>
    <span class="n">items</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_drafts</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">entity</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">items</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods.iter_dialogs">
<code class="highlight language-python">
iter_dialogs<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">offset_peer</span><span class="o">=&lt;</span><span class="n">telethon</span><span class="o">.</span><span class="n">tl</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">InputPeerEmpty</span> <span class="nb">object</span> <span class="n">at</span> <span class="mh">0x000001AC5007C6D0</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">ignore_pinned</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore_migrated</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">archived</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods.iter_dialogs" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Iterator over the dialogs (open conversations/subscribed channels).</p>
<p>The order is the same as the one seen in official applications
(first pinned, them from those with the most recent message to
those with the oldest message).</p>
<p>Arguments
    limit (<code>int</code> | <code>None</code>):
        How many dialogs to be retrieved as maximum. Can be set to
        <code>None</code> to retrieve all dialogs. Note that this may take
        whole minutes if you have hundreds of dialogs, as Telegram
        will tell the library to slow down through a
        <code>FloodWaitError</code>.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">offset_date</span> <span class="p">(</span><span class="ss">`datetime`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">offset</span> <span class="kt">date</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span>

<span class="nf">offset_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">message</span> <span class="n">ID</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">as</span> <span class="n">an</span> <span class="n">offset</span><span class="p">.</span>

<span class="nf">offset_peer</span> <span class="p">(:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`InputPeer`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">peer</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">as</span> <span class="n">an</span> <span class="n">offset</span><span class="p">.</span>

<span class="nf">ignore_pinned</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">pinned</span> <span class="n">dialogs</span> <span class="n">should</span> <span class="n">be</span> <span class="n">ignored</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>
    <span class="k">When</span> <span class="kt">set</span> <span class="k">to</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">these</span> <span class="n">won</span><span class="s1">'t be yielded at all.</span>

<span class="s1">ignore_migrated (`bool`, optional):</span>
<span class="s1">    Whether :tl:`Chat` that have ``migrated_to`` a :tl:`Channel`</span>
<span class="s1">    should be included or not. By default all the chats in your</span>
<span class="s1">    dialogs are returned, but setting this to `True` will ignore</span>
<span class="s1">    (i.e. skip) them in the same way official applications do.</span>

<span class="s1">folder (`int`, optional):</span>
<span class="s1">    The folder from which the dialogs should be retrieved.</span>

<span class="s1">    If left unspecified, all dialogs (including those from</span>
<span class="s1">    folders) will be returned.</span>

<span class="s1">    If set to ``0``, all dialogs that don'</span><span class="n">t</span> <span class="n">belong</span> <span class="k">to</span> <span class="n">any</span>
    <span class="n">folder</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

    <span class="k">If</span> <span class="kt">set</span> <span class="k">to</span> <span class="n">a</span> <span class="n">folder</span> <span class="n">number</span> <span class="k">like</span> <span class="ss">``</span><span class="mi">1</span><span class="ss">``</span><span class="p">,</span> <span class="n">only</span> <span class="n">those</span> <span class="k">from</span>
    <span class="n">said</span> <span class="n">folder</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>

    <span class="k">By</span> <span class="k">default</span> <span class="n">Telegram</span> <span class="n">assigns</span> <span class="n">the</span> <span class="n">folder</span> <span class="n">ID</span> <span class="ss">``</span><span class="mi">1</span><span class="ss">``</span> <span class="k">to</span>
    <span class="n">archived</span> <span class="n">chats</span><span class="p">,</span> <span class="n">so</span> <span class="n">you</span> <span class="n">should</span> <span class="k">use</span> <span class="n">that</span> <span class="k">if</span> <span class="n">you</span> <span class="n">need</span>
    <span class="k">to</span> <span class="k">fetch</span> <span class="n">the</span> <span class="n">archived</span> <span class="n">dialogs</span><span class="p">.</span>

<span class="nf">archived</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Alias</span> <span class="k">for</span> <span class="ss">`folder`</span><span class="p">.</span> <span class="k">If</span> <span class="n">unspecified</span><span class="p">,</span> <span class="k">all</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">,</span>
    <span class="ss">`False`</span> <span class="n">implies</span> <span class="ss">``</span><span class="n">folder</span><span class="o">=</span><span class="mi">0</span><span class="ss">``</span> <span class="k">and</span> <span class="ss">`True`</span> <span class="n">implies</span> <span class="ss">``</span><span class="n">folder</span><span class="o">=</span><span class="mi">1</span><span class="ss">``</span><span class="p">.</span>
</code></pre>
</div>
<p>Yields
    Instances of <code>Dialog &lt;telethon.tl.custom.dialog.Dialog&gt;</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Print all dialog IDs and the title, nicely formatted</span>
<span class="err">    async for dialog in client.iter_dialogs():</span>
<span class="err">        print('{:&gt;14}: {}'.format(dialog.id, dialog.title))</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\dialogs.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">iter_dialogs</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">offset_date</span><span class="p">:</span> <span class="s1">'hints.DateLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">offset_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">offset_peer</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerEmpty</span><span class="p">(),</span>
        <span class="n">ignore_pinned</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ignore_migrated</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">folder</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">archived</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_DialogsIter</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Iterator over the dialogs (open conversations/subscribed channels).</span>

<span class="sd">    The order is the same as the one seen in official applications</span>
<span class="sd">    (first pinned, them from those with the most recent message to</span>
<span class="sd">    those with the oldest message).</span>

<span class="sd">    Arguments</span>
<span class="sd">        limit (`int` | `None`):</span>
<span class="sd">            How many dialogs to be retrieved as maximum. Can be set to</span>
<span class="sd">            `None` to retrieve all dialogs. Note that this may take</span>
<span class="sd">            whole minutes if you have hundreds of dialogs, as Telegram</span>
<span class="sd">            will tell the library to slow down through a</span>
<span class="sd">            ``FloodWaitError``.</span>

<span class="sd">        offset_date (`datetime`, optional):</span>
<span class="sd">            The offset date to be used.</span>

<span class="sd">        offset_id (`int`, optional):</span>
<span class="sd">            The message ID to be used as an offset.</span>

<span class="sd">        offset_peer (:tl:`InputPeer`, optional):</span>
<span class="sd">            The peer to be used as an offset.</span>

<span class="sd">        ignore_pinned (`bool`, optional):</span>
<span class="sd">            Whether pinned dialogs should be ignored or not.</span>
<span class="sd">            When set to `True`, these won't be yielded at all.</span>

<span class="sd">        ignore_migrated (`bool`, optional):</span>
<span class="sd">            Whether :tl:`Chat` that have ``migrated_to`` a :tl:`Channel`</span>
<span class="sd">            should be included or not. By default all the chats in your</span>
<span class="sd">            dialogs are returned, but setting this to `True` will ignore</span>
<span class="sd">            (i.e. skip) them in the same way official applications do.</span>

<span class="sd">        folder (`int`, optional):</span>
<span class="sd">            The folder from which the dialogs should be retrieved.</span>

<span class="sd">            If left unspecified, all dialogs (including those from</span>
<span class="sd">            folders) will be returned.</span>

<span class="sd">            If set to ``0``, all dialogs that don't belong to any</span>
<span class="sd">            folder will be returned.</span>

<span class="sd">            If set to a folder number like ``1``, only those from</span>
<span class="sd">            said folder will be returned.</span>

<span class="sd">            By default Telegram assigns the folder ID ``1`` to</span>
<span class="sd">            archived chats, so you should use that if you need</span>
<span class="sd">            to fetch the archived dialogs.</span>

<span class="sd">        archived (`bool`, optional):</span>
<span class="sd">            Alias for `folder`. If unspecified, all will be returned,</span>
<span class="sd">            `False` implies ``folder=0`` and `True` implies ``folder=1``.</span>
<span class="sd">    Yields</span>
<span class="sd">        Instances of `Dialog &lt;telethon.tl.custom.dialog.Dialog&gt;`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Print all dialog IDs and the title, nicely formatted</span>
<span class="sd">            async for dialog in client.iter_dialogs():</span>
<span class="sd">                print('{:&gt;14}: {}'.format(dialog.id, dialog.title))</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">archived</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">folder</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">archived</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="k">return</span> <span class="n">_DialogsIter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">,</span>
        <span class="n">offset_date</span><span class="o">=</span><span class="n">offset_date</span><span class="p">,</span>
        <span class="n">offset_id</span><span class="o">=</span><span class="n">offset_id</span><span class="p">,</span>
        <span class="n">offset_peer</span><span class="o">=</span><span class="n">offset_peer</span><span class="p">,</span>
        <span class="n">ignore_pinned</span><span class="o">=</span><span class="n">ignore_pinned</span><span class="p">,</span>
        <span class="n">ignore_migrated</span><span class="o">=</span><span class="n">ignore_migrated</span><span class="p">,</span>
        <span class="n">folder</span><span class="o">=</span><span class="n">folder</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.dialogs.DialogMethods.iter_drafts">
<code class="highlight language-python">
iter_drafts<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.dialogs.DialogMethods.iter_drafts" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Iterator over draft messages.</p>
<p>The order is unspecified.</p>
<p>Arguments
    entity (<code>hints.EntitiesLike</code>, optional):
        The entity or entities for which to fetch the draft messages.
        If left unspecified, all draft messages will be returned.</p>
<p>Yields
    Instances of <code>Draft &lt;telethon.tl.custom.draft.Draft&gt;</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Clear</span> <span class="k">all</span> <span class="n">drafts</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">draft</span> <span class="k">in</span> <span class="n">client</span><span class="p">.</span><span class="n">get_drafts</span><span class="p">():</span>
        <span class="n">await</span> <span class="n">draft</span><span class="p">.</span><span class="k">delete</span><span class="p">()</span>

    <span class="o">#</span> <span class="n">Getting</span> <span class="n">the</span> <span class="n">drafts</span> <span class="k">with</span> <span class="s1">'bot1'</span> <span class="k">and</span> <span class="s1">'bot2'</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">draft</span> <span class="k">in</span> <span class="n">client</span><span class="p">.</span><span class="n">iter_drafts</span><span class="p">([</span><span class="s1">'bot1'</span><span class="p">,</span> <span class="s1">'bot2'</span><span class="p">]):</span>
        <span class="n">print</span><span class="p">(</span><span class="n">draft</span><span class="p">.</span><span class="nb">text</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\dialogs.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">iter_drafts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntitiesLike'</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_DraftsIter</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Iterator over draft messages.</span>

<span class="sd">    The order is unspecified.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`hints.EntitiesLike`, optional):</span>
<span class="sd">            The entity or entities for which to fetch the draft messages.</span>
<span class="sd">            If left unspecified, all draft messages will be returned.</span>

<span class="sd">    Yields</span>
<span class="sd">        Instances of `Draft &lt;telethon.tl.custom.draft.Draft&gt;`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Clear all drafts</span>
<span class="sd">            async for draft in client.get_drafts():</span>
<span class="sd">                await draft.delete()</span>

<span class="sd">            # Getting the drafts with 'bot1' and 'bot2'</span>
<span class="sd">            async for draft in client.iter_drafts(['bot1', 'bot2']):</span>
<span class="sd">                print(draft.text)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">entity</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">entity</span><span class="p">):</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="p">(</span><span class="n">entity</span><span class="p">,)</span>

    <span class="c1"># TODO Passing a limit here makes no sense</span>
    <span class="k">return</span> <span class="n">_DraftsIter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">entities</span><span class="o">=</span><span class="n">entity</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.downloads" id="telethon.client.downloads" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.downloads" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.downloads.DownloadMethods">
<code>DownloadMethods</code>
<a class="headerlink" href="#telethon.client.downloads.DownloadMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.downloads.DownloadMethods.download_file">
<code class="highlight language-python">
download_file<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_location</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">part_size_kb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dc_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iv</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.downloads.DownloadMethods.download_file" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Low-level method to download files from their input location.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Generally</span><span class="p">,</span> <span class="n">you</span> <span class="n">should</span> <span class="n">instead</span> <span class="k">use</span> <span class="ss">`download_media`</span><span class="p">.</span>
<span class="n">This</span> <span class="n">method</span> <span class="k">is</span> <span class="n">intended</span> <span class="k">to</span> <span class="n">be</span> <span class="n">a</span> <span class="kt">bit</span> <span class="n">more</span> <span class="n">low</span><span class="o">-</span><span class="n">level</span><span class="p">.</span>
</code></pre>
</div>
<p>Arguments
    input_location (:tl:<code>InputFileLocation</code>):
        The file location from which the file will be downloaded.
        See <code>telethon.utils.get_input_location</code> source for a complete
        list of supported types.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">file</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`file`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">output</span> <span class="n">file</span> <span class="n">path</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="k">or</span> <span class="n">stream</span><span class="o">-</span><span class="k">like</span> <span class="n">object</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">the</span> <span class="n">path</span> <span class="k">exists</span> <span class="k">and</span> <span class="k">is</span> <span class="n">a</span> <span class="n">file</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">overwritten</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="n">file</span> <span class="n">path</span> <span class="k">is</span> <span class="ss">`None`</span> <span class="k">or</span> <span class="ss">`bytes`</span><span class="p">,</span> <span class="k">then</span> <span class="n">the</span> <span class="n">result</span>
    <span class="n">will</span> <span class="n">be</span> <span class="n">saved</span> <span class="k">in</span> <span class="n">memory</span> <span class="k">and</span> <span class="n">returned</span> <span class="k">as</span> <span class="ss">`bytes`</span><span class="p">.</span>

<span class="nf">part_size_kb</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Chunk</span> <span class="n">size</span> <span class="k">when</span> <span class="n">downloading</span> <span class="n">files</span><span class="p">.</span> <span class="n">The</span> <span class="n">larger</span><span class="p">,</span> <span class="n">the</span> <span class="n">less</span>
    <span class="n">requests</span> <span class="n">will</span> <span class="n">be</span> <span class="nf">made</span> <span class="p">(</span><span class="n">up</span> <span class="k">to</span> <span class="mi">512</span><span class="n">KB</span> <span class="n">maximum</span><span class="p">).</span>

<span class="nf">file_size</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">file</span> <span class="n">size</span> <span class="n">that</span> <span class="k">is</span> <span class="n">about</span> <span class="k">to</span> <span class="n">be</span> <span class="n">downloaded</span><span class="p">,</span> <span class="k">if</span> <span class="n">known</span><span class="p">.</span>
    <span class="n">Only</span> <span class="n">used</span> <span class="k">if</span> <span class="ss">``</span><span class="n">progress_callback</span><span class="ss">``</span> <span class="k">is</span> <span class="n">specified</span><span class="p">.</span>

<span class="nf">progress_callback</span> <span class="p">(</span><span class="ss">`callable`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">A</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">accepting</span> <span class="n">two</span> <span class="n">parameters</span><span class="p">:</span>
    <span class="ss">``</span><span class="p">(</span><span class="n">downloaded</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span><span class="ss">``</span><span class="p">.</span> <span class="n">Note</span> <span class="n">that</span> <span class="n">the</span>
    <span class="ss">``</span><span class="n">total</span><span class="ss">``</span> <span class="k">is</span> <span class="n">the</span> <span class="n">provided</span> <span class="ss">``</span><span class="n">file_size</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">dc_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">data</span> <span class="n">center</span> <span class="n">the</span> <span class="n">library</span> <span class="n">should</span> <span class="n">connect</span> <span class="k">to</span> <span class="k">in</span> <span class="k">order</span>
    <span class="k">to</span> <span class="n">download</span> <span class="n">the</span> <span class="n">file</span><span class="p">.</span> <span class="n">You</span> <span class="n">shouldn</span><span class="s1">'t worry about this.</span>

<span class="s1">key ('</span><span class="n">bytes</span><span class="s1">', optional):</span>
<span class="s1">    In case of an encrypted upload (secret chats) a key is supplied</span>

<span class="s1">iv ('</span><span class="n">bytes</span><span class="err">'</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">In</span> <span class="k">case</span> <span class="n">of</span> <span class="n">an</span> <span class="n">encrypted</span> <span class="nf">upload</span> <span class="p">(</span><span class="n">secret</span> <span class="n">chats</span><span class="p">)</span> <span class="n">an</span> <span class="n">iv</span> <span class="k">is</span> <span class="n">supplied</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Download a file and print its header</span>
<span class="err">    data = await client.download_file(input_file, bytes)</span>
<span class="err">    print(data[:16])</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\downloads.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">download_file</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">input_location</span><span class="p">:</span> <span class="s1">'hints.FileLike'</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'hints.OutFileLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">part_size_kb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="p">:</span> <span class="s1">'hints.ProgressCallback'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dc_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">iv</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
    <span class="sd">"""</span>
<span class="sd">    Low-level method to download files from their input location.</span>

<span class="sd">    .. note::</span>

<span class="sd">        Generally, you should instead use `download_media`.</span>
<span class="sd">        This method is intended to be a bit more low-level.</span>

<span class="sd">    Arguments</span>
<span class="sd">        input_location (:tl:`InputFileLocation`):</span>
<span class="sd">            The file location from which the file will be downloaded.</span>
<span class="sd">            See `telethon.utils.get_input_location` source for a complete</span>
<span class="sd">            list of supported types.</span>

<span class="sd">        file (`str` | `file`, optional):</span>
<span class="sd">            The output file path, directory, or stream-like object.</span>
<span class="sd">            If the path exists and is a file, it will be overwritten.</span>

<span class="sd">            If the file path is `None` or `bytes`, then the result</span>
<span class="sd">            will be saved in memory and returned as `bytes`.</span>

<span class="sd">        part_size_kb (`int`, optional):</span>
<span class="sd">            Chunk size when downloading files. The larger, the less</span>
<span class="sd">            requests will be made (up to 512KB maximum).</span>

<span class="sd">        file_size (`int`, optional):</span>
<span class="sd">            The file size that is about to be downloaded, if known.</span>
<span class="sd">            Only used if ``progress_callback`` is specified.</span>

<span class="sd">        progress_callback (`callable`, optional):</span>
<span class="sd">            A callback function accepting two parameters:</span>
<span class="sd">            ``(downloaded bytes, total)``. Note that the</span>
<span class="sd">            ``total`` is the provided ``file_size``.</span>

<span class="sd">        dc_id (`int`, optional):</span>
<span class="sd">            The data center the library should connect to in order</span>
<span class="sd">            to download the file. You shouldn't worry about this.</span>

<span class="sd">        key ('bytes', optional):</span>
<span class="sd">            In case of an encrypted upload (secret chats) a key is supplied</span>

<span class="sd">        iv ('bytes', optional):</span>
<span class="sd">            In case of an encrypted upload (secret chats) an iv is supplied</span>


<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Download a file and print its header</span>
<span class="sd">            data = await client.download_file(input_file, bytes)</span>
<span class="sd">            print(data[:16])</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">part_size_kb</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_size</span><span class="p">:</span>
            <span class="n">part_size_kb</span> <span class="o">=</span> <span class="mi">64</span>  <span class="c1"># Reasonable default</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">part_size_kb</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_appropriated_part_size</span><span class="p">(</span><span class="n">file_size</span><span class="p">)</span>

    <span class="n">part_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">part_size_kb</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">part_size</span> <span class="o">%</span> <span class="n">MIN_CHUNK_SIZE</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">'The part size must be evenly divisible by 4096.'</span><span class="p">)</span>

    <span class="n">in_memory</span> <span class="o">=</span> <span class="n">file</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">file</span> <span class="ow">is</span> <span class="nb">bytes</span>
    <span class="k">if</span> <span class="n">in_memory</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="c1"># Ensure that we'll be able to download the media</span>
        <span class="n">helpers</span><span class="o">.</span><span class="n">ensure_parent_dir_exists</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">file</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_download</span><span class="p">(</span>
                <span class="n">input_location</span><span class="p">,</span> <span class="n">request_size</span><span class="o">=</span><span class="n">part_size</span><span class="p">,</span> <span class="n">dc_id</span><span class="o">=</span><span class="n">dc_id</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">iv</span> <span class="ow">and</span> <span class="n">key</span><span class="p">:</span>
                <span class="n">chunk</span> <span class="o">=</span> <span class="n">AES</span><span class="o">.</span><span class="n">decrypt_ige</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">iv</span><span class="p">)</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
                <span class="k">await</span> <span class="n">r</span>

            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">r</span> <span class="o">=</span> <span class="n">progress_callback</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">tell</span><span class="p">(),</span> <span class="n">file_size</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
                    <span class="k">await</span> <span class="n">r</span>

        <span class="c1"># Not all IO objects have flush (see #1227)</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">'flush'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="n">f</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">in_memory</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="n">in_memory</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.downloads.DownloadMethods.download_media">
<code class="highlight language-python">
download_media<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.downloads.DownloadMethods.download_media" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Downloads the given media from a message object.</p>
<p>Note that if the download is too slow, you should consider installing
<code>cryptg</code> (through <code>pip install cryptg</code>) so that decrypting the
received data is done in C instead of Python (much faster).</p>
<p>See also <code>Message.download_media() &lt;telethon.tl.custom.message.Message.download_media&gt;</code>.</p>
<p>Arguments
    message (<code>Message &lt;telethon.tl.custom.message.Message&gt;</code> | :tl:<code>Media</code>):
        The media or message containing the media that will be downloaded.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">file</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`file`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">output</span> <span class="n">file</span> <span class="n">path</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="k">or</span> <span class="n">stream</span><span class="o">-</span><span class="k">like</span> <span class="n">object</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">the</span> <span class="n">path</span> <span class="k">exists</span> <span class="k">and</span> <span class="k">is</span> <span class="n">a</span> <span class="n">file</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">overwritten</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">file</span> <span class="k">is</span> <span class="n">the</span> <span class="n">type</span> <span class="ss">`bytes`</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">downloaded</span> <span class="k">in</span><span class="o">-</span><span class="n">memory</span>
    <span class="k">as</span> <span class="n">a</span> <span class="nf">bytestring</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="ss">``</span><span class="n">file</span><span class="o">=</span><span class="n">bytes</span><span class="ss">``</span><span class="p">).</span>

<span class="nf">progress_callback</span> <span class="p">(</span><span class="ss">`callable`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">A</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">accepting</span> <span class="n">two</span> <span class="n">parameters</span><span class="p">:</span>
    <span class="ss">``</span><span class="p">(</span><span class="n">received</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">thumb</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`PhotoSize`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Which</span> <span class="n">thumbnail</span> <span class="n">size</span> <span class="k">from</span> <span class="n">the</span> <span class="n">document</span> <span class="k">or</span> <span class="n">photo</span> <span class="k">to</span> <span class="n">download</span><span class="p">,</span>
    <span class="n">instead</span> <span class="n">of</span> <span class="n">downloading</span> <span class="n">the</span> <span class="n">document</span> <span class="k">or</span> <span class="n">photo</span> <span class="n">itself</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">it</span><span class="err">'</span><span class="n">s</span> <span class="n">specified</span> <span class="n">but</span> <span class="n">the</span> <span class="n">file</span> <span class="n">does</span> <span class="k">not</span> <span class="n">have</span> <span class="n">a</span> <span class="n">thumbnail</span><span class="p">,</span>
    <span class="n">this</span> <span class="n">method</span> <span class="n">will</span> <span class="k">return</span> <span class="ss">`None`</span><span class="p">.</span>

    <span class="n">The</span> <span class="n">parameter</span> <span class="n">should</span> <span class="n">be</span> <span class="n">an</span> <span class="kt">integer</span> <span class="k">index</span> <span class="k">between</span> <span class="ss">``</span><span class="mi">0</span><span class="ss">``</span> <span class="k">and</span>
    <span class="ss">``</span><span class="nf">len</span><span class="p">(</span><span class="n">sizes</span><span class="p">)</span><span class="ss">``</span><span class="p">.</span> <span class="ss">``</span><span class="mi">0</span><span class="ss">``</span> <span class="n">will</span> <span class="n">download</span> <span class="n">the</span> <span class="n">smallest</span> <span class="n">thumbnail</span><span class="p">,</span>
    <span class="k">and</span> <span class="ss">``</span><span class="nf">len</span><span class="p">(</span><span class="n">sizes</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="ss">``</span> <span class="n">will</span> <span class="n">download</span> <span class="n">the</span> <span class="n">largest</span> <span class="n">thumbnail</span><span class="p">.</span>
    <span class="n">You</span> <span class="n">can</span> <span class="n">also</span> <span class="k">use</span> <span class="n">negative</span> <span class="n">indices</span><span class="p">.</span>

    <span class="n">You</span> <span class="n">can</span> <span class="n">also</span> <span class="n">pass</span> <span class="n">the</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`PhotoSize`</span> <span class="n">instance</span> <span class="k">to</span> <span class="k">use</span><span class="p">.</span>

    <span class="k">In</span> <span class="n">short</span><span class="p">,</span> <span class="k">use</span> <span class="ss">``</span><span class="n">thumb</span><span class="o">=</span><span class="mi">0</span><span class="ss">``</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">the</span> <span class="n">smallest</span> <span class="n">thumbnail</span>
    <span class="k">and</span> <span class="ss">``</span><span class="n">thumb</span><span class="o">=-</span><span class="mi">1</span><span class="ss">``</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">the</span> <span class="n">largest</span> <span class="n">thumbnail</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    <code>None</code> if no media was provided, or if it was Empty. On success
    the file path is returned since it may differ from the one given.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">path</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">download_media</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">download_media</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="o">#</span> <span class="k">or</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">await</span> <span class="n">message</span><span class="p">.</span><span class="n">download_media</span><span class="p">()</span>
    <span class="n">await</span> <span class="n">message</span><span class="p">.</span><span class="n">download_media</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Printing</span> <span class="n">download</span> <span class="n">progress</span>
    <span class="n">def</span> <span class="n">callback</span><span class="p">(</span><span class="k">current</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
        <span class="n">print</span><span class="p">(</span><span class="s1">'Downloaded'</span><span class="p">,</span> <span class="k">current</span><span class="p">,</span> <span class="s1">'out of'</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span>
              <span class="s1">'bytes: {:.2%}'</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="k">current</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>

    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">download_media</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\downloads.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">download_media</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="s1">'hints.MessageLike'</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'hints.FileLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">thumb</span><span class="p">:</span> <span class="s1">'typing.Union[int, types.TypePhotoSize]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="p">:</span> <span class="s1">'hints.ProgressCallback'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">]]:</span>
    <span class="sd">"""</span>
<span class="sd">    Downloads the given media from a message object.</span>

<span class="sd">    Note that if the download is too slow, you should consider installing</span>
<span class="sd">    ``cryptg`` (through ``pip install cryptg``) so that decrypting the</span>
<span class="sd">    received data is done in C instead of Python (much faster).</span>

<span class="sd">    See also `Message.download_media() &lt;telethon.tl.custom.message.Message.download_media&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        message (`Message &lt;telethon.tl.custom.message.Message&gt;` | :tl:`Media`):</span>
<span class="sd">            The media or message containing the media that will be downloaded.</span>

<span class="sd">        file (`str` | `file`, optional):</span>
<span class="sd">            The output file path, directory, or stream-like object.</span>
<span class="sd">            If the path exists and is a file, it will be overwritten.</span>
<span class="sd">            If file is the type `bytes`, it will be downloaded in-memory</span>
<span class="sd">            as a bytestring (e.g. ``file=bytes``).</span>

<span class="sd">        progress_callback (`callable`, optional):</span>
<span class="sd">            A callback function accepting two parameters:</span>
<span class="sd">            ``(received bytes, total)``.</span>

<span class="sd">        thumb (`int` | :tl:`PhotoSize`, optional):</span>
<span class="sd">            Which thumbnail size from the document or photo to download,</span>
<span class="sd">            instead of downloading the document or photo itself.</span>

<span class="sd">            If it's specified but the file does not have a thumbnail,</span>
<span class="sd">            this method will return `None`.</span>

<span class="sd">            The parameter should be an integer index between ``0`` and</span>
<span class="sd">            ``len(sizes)``. ``0`` will download the smallest thumbnail,</span>
<span class="sd">            and ``len(sizes) - 1`` will download the largest thumbnail.</span>
<span class="sd">            You can also use negative indices.</span>

<span class="sd">            You can also pass the :tl:`PhotoSize` instance to use.</span>

<span class="sd">            In short, use ``thumb=0`` if you want the smallest thumbnail</span>
<span class="sd">            and ``thumb=-1`` if you want the largest thumbnail.</span>

<span class="sd">    Returns</span>
<span class="sd">        `None` if no media was provided, or if it was Empty. On success</span>
<span class="sd">        the file path is returned since it may differ from the one given.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            path = await client.download_media(message)</span>
<span class="sd">            await client.download_media(message, filename)</span>
<span class="sd">            # or</span>
<span class="sd">            path = await message.download_media()</span>
<span class="sd">            await message.download_media(filename)</span>

<span class="sd">            # Printing download progress</span>
<span class="sd">            def callback(current, total):</span>
<span class="sd">                print('Downloaded', current, 'out of', total,</span>
<span class="sd">                      'bytes: {:.2%}'.format(current / total))</span>

<span class="sd">            await client.download_media(message, progress_callback=callback)</span>
<span class="sd">    """</span>
    <span class="c1"># TODO This won't work for messageService</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">date</span>
        <span class="n">media</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">media</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">media</span> <span class="o">=</span> <span class="n">message</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">media</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">resolve_bot_file_id</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageMediaWebPage</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="o">.</span><span class="n">webpage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">WebPage</span><span class="p">):</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">media</span><span class="o">.</span><span class="n">webpage</span><span class="o">.</span><span class="n">document</span> <span class="ow">or</span> <span class="n">media</span><span class="o">.</span><span class="n">webpage</span><span class="o">.</span><span class="n">photo</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">MessageMediaPhoto</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Photo</span><span class="p">)):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_photo</span><span class="p">(</span>
            <span class="n">media</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">thumb</span><span class="p">,</span> <span class="n">progress_callback</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">MessageMediaDocument</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Document</span><span class="p">)):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_document</span><span class="p">(</span>
            <span class="n">media</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">thumb</span><span class="p">,</span> <span class="n">progress_callback</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageMediaContact</span><span class="p">)</span> <span class="ow">and</span> <span class="n">thumb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_contact</span><span class="p">(</span>
            <span class="n">media</span><span class="p">,</span> <span class="n">file</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">WebDocument</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">WebDocumentNoProxy</span><span class="p">))</span> <span class="ow">and</span> <span class="n">thumb</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_web_document</span><span class="p">(</span>
            <span class="n">media</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">progress_callback</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.downloads.DownloadMethods.download_profile_photo">
<code class="highlight language-python">
download_profile_photo<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">download_big</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.downloads.DownloadMethods.download_profile_photo" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Downloads the profile photo from the given user, chat or channel.</p>
<p>Arguments
    entity (<code>entity</code>):
        From who the photo will be downloaded.</p>
<div class="codehilite">
<pre><span></span><code>    <span class="p">..</span> <span class="n">note</span><span class="p">::</span>

        <span class="n">This</span> <span class="n">method</span> <span class="n">expects</span> <span class="n">the</span> <span class="n">full</span> <span class="nf">entity</span> <span class="p">(</span><span class="n">which</span> <span class="n">has</span> <span class="n">the</span> <span class="n">data</span>
        <span class="k">to</span> <span class="n">download</span> <span class="n">the</span> <span class="n">photo</span><span class="p">),</span> <span class="k">not</span> <span class="n">an</span> <span class="n">input</span> <span class="n">variant</span><span class="p">.</span>

        <span class="n">It</span><span class="s1">'s possible that sometimes you can'</span><span class="n">t</span> <span class="k">fetch</span> <span class="n">the</span> <span class="n">entity</span>
        <span class="k">from</span> <span class="n">its</span> <span class="nf">input</span> <span class="p">(</span><span class="n">since</span> <span class="n">you</span> <span class="n">can</span> <span class="n">get</span> <span class="n">errors</span> <span class="k">like</span>
        <span class="ss">``</span><span class="n">ChannelPrivateError</span><span class="ss">``</span><span class="p">)</span> <span class="n">but</span> <span class="n">you</span> <span class="n">already</span> <span class="n">have</span> <span class="n">it</span> <span class="n">through</span>
        <span class="n">another</span> <span class="k">call</span><span class="p">,</span> <span class="k">like</span> <span class="n">getting</span> <span class="n">a</span> <span class="n">forwarded</span> <span class="n">message</span> <span class="k">from</span> <span class="n">it</span><span class="p">.</span>

<span class="nf">file</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`file`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">output</span> <span class="n">file</span> <span class="n">path</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="k">or</span> <span class="n">stream</span><span class="o">-</span><span class="k">like</span> <span class="n">object</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">the</span> <span class="n">path</span> <span class="k">exists</span> <span class="k">and</span> <span class="k">is</span> <span class="n">a</span> <span class="n">file</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">overwritten</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">file</span> <span class="k">is</span> <span class="n">the</span> <span class="n">type</span> <span class="ss">`bytes`</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">downloaded</span> <span class="k">in</span><span class="o">-</span><span class="n">memory</span>
    <span class="k">as</span> <span class="n">a</span> <span class="nf">bytestring</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="ss">``</span><span class="n">file</span><span class="o">=</span><span class="n">bytes</span><span class="ss">``</span><span class="p">).</span>

<span class="nf">download_big</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="k">to</span> <span class="k">use</span> <span class="n">the</span> <span class="n">big</span> <span class="n">version</span> <span class="n">of</span> <span class="n">the</span> <span class="n">available</span> <span class="n">photos</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    <code>None</code> if no photo was provided, or if it was Empty. On success
    the file path is returned since it may differ from the one given.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Download your own profile photo</span>
<span class="err">    path = await client.download_profile_photo('me')</span>
<span class="err">    print(path)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\downloads.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">download_profile_photo</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'hints.FileLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">download_big</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
    <span class="sd">"""</span>
<span class="sd">    Downloads the profile photo from the given user, chat or channel.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            From who the photo will be downloaded.</span>

<span class="sd">            .. note::</span>

<span class="sd">                This method expects the full entity (which has the data</span>
<span class="sd">                to download the photo), not an input variant.</span>

<span class="sd">                It's possible that sometimes you can't fetch the entity</span>
<span class="sd">                from its input (since you can get errors like</span>
<span class="sd">                ``ChannelPrivateError``) but you already have it through</span>
<span class="sd">                another call, like getting a forwarded message from it.</span>

<span class="sd">        file (`str` | `file`, optional):</span>
<span class="sd">            The output file path, directory, or stream-like object.</span>
<span class="sd">            If the path exists and is a file, it will be overwritten.</span>
<span class="sd">            If file is the type `bytes`, it will be downloaded in-memory</span>
<span class="sd">            as a bytestring (e.g. ``file=bytes``).</span>

<span class="sd">        download_big (`bool`, optional):</span>
<span class="sd">            Whether to use the big version of the available photos.</span>

<span class="sd">    Returns</span>
<span class="sd">        `None` if no photo was provided, or if it was Empty. On success</span>
<span class="sd">        the file path is returned since it may differ from the one given.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Download your own profile photo</span>
<span class="sd">            path = await client.download_profile_photo('me')</span>
<span class="sd">            print(path)</span>
<span class="sd">    """</span>
    <span class="c1"># hex(crc32(x.encode('ascii'))) for x in</span>
    <span class="c1"># ('User', 'Chat', 'UserFull', 'ChatFull')</span>
    <span class="n">ENTITIES</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0x2da17977</span><span class="p">,</span> <span class="mh">0xc5af5d94</span><span class="p">,</span> <span class="mh">0x1f4661b9</span><span class="p">,</span> <span class="mh">0xd49a2697</span><span class="p">)</span>
    <span class="c1"># ('InputPeer', 'InputUser', 'InputChannel')</span>
    <span class="n">INPUTS</span> <span class="o">=</span> <span class="p">(</span><span class="mh">0xc91c90b6</span><span class="p">,</span> <span class="mh">0xe669bf46</span><span class="p">,</span> <span class="mh">0x40f202fd</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">TLObject</span><span class="p">)</span> <span class="ow">or</span> <span class="n">entity</span><span class="o">.</span><span class="n">SUBCLASS_OF_ID</span> <span class="ow">in</span> <span class="n">INPUTS</span><span class="p">:</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

    <span class="n">thumb</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="k">if</span> <span class="n">download_big</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="n">possible_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">SUBCLASS_OF_ID</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ENTITIES</span><span class="p">:</span>
        <span class="n">photo</span> <span class="o">=</span> <span class="n">entity</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s1">'photo'</span><span class="p">):</span>
            <span class="c1"># Special case: may be a ChatFull with photo:Photo</span>
            <span class="c1"># This is different from a normal UserProfilePhoto and Chat</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="s1">'chat_photo'</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">None</span>

            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_photo</span><span class="p">(</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">chat_photo</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">thumb</span><span class="o">=</span><span class="n">thumb</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'username'</span><span class="p">,</span> <span class="s1">'first_name'</span><span class="p">,</span> <span class="s1">'title'</span><span class="p">):</span>
            <span class="n">possible_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="kc">None</span><span class="p">))</span>

        <span class="n">photo</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">photo</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">photo</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UserProfilePhoto</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ChatPhoto</span><span class="p">)):</span>
        <span class="n">dc_id</span> <span class="o">=</span> <span class="n">photo</span><span class="o">.</span><span class="n">dc_id</span>
        <span class="n">which</span> <span class="o">=</span> <span class="n">photo</span><span class="o">.</span><span class="n">photo_big</span> <span class="k">if</span> <span class="n">download_big</span> <span class="k">else</span> <span class="n">photo</span><span class="o">.</span><span class="n">photo_small</span>
        <span class="n">loc</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerPhotoFileLocation</span><span class="p">(</span>
            <span class="n">peer</span><span class="o">=</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span>
            <span class="n">local_id</span><span class="o">=</span><span class="n">which</span><span class="o">.</span><span class="n">local_id</span><span class="p">,</span>
            <span class="n">volume_id</span><span class="o">=</span><span class="n">which</span><span class="o">.</span><span class="n">volume_id</span><span class="p">,</span>
            <span class="n">big</span><span class="o">=</span><span class="n">download_big</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># It doesn't make any sense to check if `photo` can be used</span>
        <span class="c1"># as input location, because then this method would be able</span>
        <span class="c1"># to "download the profile photo of a message", i.e. its</span>
        <span class="c1"># media which should be done with `download_media` instead.</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_proper_filename</span><span class="p">(</span>
        <span class="n">file</span><span class="p">,</span> <span class="s1">'profile_photo'</span><span class="p">,</span> <span class="s1">'.jpg'</span><span class="p">,</span>
        <span class="n">possible_names</span><span class="o">=</span><span class="n">possible_names</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_file</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">dc_id</span><span class="o">=</span><span class="n">dc_id</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span> <span class="k">if</span> <span class="n">file</span> <span class="ow">is</span> <span class="nb">bytes</span> <span class="k">else</span> <span class="n">file</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">LocationInvalidError</span><span class="p">:</span>
        <span class="c1"># See issue #500, Android app fails as of v4.6.0 (1155).</span>
        <span class="c1"># The fix seems to be using the full channel chat photo.</span>
        <span class="n">ie</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">ie</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span>
            <span class="n">full</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">GetFullChannelRequest</span><span class="p">(</span><span class="n">ie</span><span class="p">))</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_download_photo</span><span class="p">(</span>
                <span class="n">full</span><span class="o">.</span><span class="n">full_chat</span><span class="o">.</span><span class="n">chat_photo</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span>
                <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">thumb</span><span class="o">=</span><span class="n">thumb</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Until there's a report for chats, no need to.</span>
            <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.downloads.DownloadMethods.iter_download">
<code class="highlight language-python">
iter_download<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">stride</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">request_size</span><span class="o">=</span><span class="mi">524288</span><span class="p">,</span> <span class="n">file_size</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dc_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.downloads.DownloadMethods.iter_download" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Iterates over a file download, yielding chunks of the file.</p>
<p>This method can be used to stream files in a more convenient
way, since it offers more control (pausing, resuming, etc.)</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="k">Using</span> <span class="n">a</span> <span class="n">value</span> <span class="k">for</span> <span class="ss">`offset`</span> <span class="k">or</span> <span class="ss">`stride`</span> <span class="n">which</span> <span class="k">is</span> <span class="k">not</span> <span class="n">a</span> <span class="n">multiple</span>
<span class="n">of</span> <span class="n">the</span> <span class="n">minimum</span> <span class="n">allowed</span> <span class="ss">`request_size`</span><span class="p">,</span> <span class="k">or</span> <span class="k">if</span> <span class="ss">`chunk_size`</span> <span class="k">is</span>
<span class="n">different</span> <span class="k">from</span> <span class="ss">`request_size`</span><span class="p">,</span> <span class="n">the</span> <span class="n">library</span> <span class="n">will</span> <span class="n">need</span> <span class="k">to</span> <span class="n">do</span> <span class="n">a</span>
<span class="kt">bit</span> <span class="n">more</span> <span class="n">work</span> <span class="k">to</span> <span class="k">fetch</span> <span class="n">the</span> <span class="n">data</span> <span class="k">in</span> <span class="n">the</span> <span class="n">way</span> <span class="n">you</span> <span class="n">intend</span> <span class="n">it</span> <span class="k">to</span><span class="p">.</span>

<span class="n">You</span> <span class="n">normally</span> <span class="n">shouldn</span><span class="err">'</span><span class="n">t</span> <span class="n">worry</span> <span class="n">about</span> <span class="n">this</span><span class="p">.</span>
</code></pre>
</div>
<p>Arguments
    file (<code>hints.FileLike</code>):
        The file of which contents you want to iterate over.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">offset</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">offset</span> <span class="k">in</span> <span class="n">bytes</span> <span class="k">into</span> <span class="n">the</span> <span class="n">file</span> <span class="k">from</span> <span class="k">where</span> <span class="n">the</span>
    <span class="n">download</span> <span class="n">should</span> <span class="n">start</span><span class="p">.</span> <span class="k">For</span> <span class="n">example</span><span class="p">,</span> <span class="k">if</span> <span class="n">a</span> <span class="n">file</span> <span class="k">is</span>
    <span class="mi">1024</span><span class="n">KB</span> <span class="k">long</span> <span class="k">and</span> <span class="n">you</span> <span class="n">just</span> <span class="n">want</span> <span class="n">the</span> <span class="n">last</span> <span class="mi">512</span><span class="n">KB</span><span class="p">,</span> <span class="n">you</span>
    <span class="n">would</span> <span class="k">use</span> <span class="ss">``</span><span class="n">offset</span><span class="o">=</span><span class="mi">512</span> <span class="o">*</span> <span class="mi">1024</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">stride</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">stride</span> <span class="n">of</span> <span class="k">each</span> <span class="nf">chunk</span> <span class="p">(</span><span class="n">how</span> <span class="n">much</span> <span class="n">the</span> <span class="n">offset</span> <span class="n">should</span>
    <span class="n">advance</span> <span class="k">between</span> <span class="n">reading</span> <span class="k">each</span> <span class="n">chunk</span><span class="p">).</span> <span class="n">This</span> <span class="n">parameter</span>
    <span class="n">should</span> <span class="n">only</span> <span class="n">be</span> <span class="n">used</span> <span class="k">for</span> <span class="n">more</span> <span class="n">advanced</span> <span class="k">use</span> <span class="n">cases</span><span class="p">.</span>

    <span class="n">It</span> <span class="n">must</span> <span class="n">be</span> <span class="n">bigger</span> <span class="n">than</span> <span class="k">or</span> <span class="n">equal</span> <span class="k">to</span> <span class="n">the</span> <span class="ss">`chunk_size`</span><span class="p">.</span>

<span class="k">limit</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="k">limit</span> <span class="k">for</span> <span class="n">how</span> <span class="n">many</span> <span class="o">*</span><span class="n">chunks</span><span class="o">*</span> <span class="n">will</span> <span class="n">be</span> <span class="n">yielded</span> <span class="n">at</span> <span class="n">most</span><span class="p">.</span>

<span class="nf">chunk_size</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">maximum</span> <span class="n">size</span> <span class="n">of</span> <span class="n">the</span> <span class="n">chunks</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">yielded</span><span class="p">.</span>
    <span class="n">Note</span> <span class="n">that</span> <span class="n">the</span> <span class="n">last</span> <span class="n">chunk</span> <span class="n">may</span> <span class="n">be</span> <span class="n">less</span> <span class="n">than</span> <span class="n">this</span> <span class="n">value</span><span class="p">.</span>
    <span class="k">By</span> <span class="k">default</span><span class="p">,</span> <span class="n">it</span> <span class="n">equals</span> <span class="k">to</span> <span class="ss">`request_size`</span><span class="p">.</span>

<span class="nf">request_size</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">How</span> <span class="n">many</span> <span class="n">bytes</span> <span class="n">will</span> <span class="n">be</span> <span class="n">requested</span> <span class="k">to</span> <span class="n">Telegram</span> <span class="k">when</span> <span class="n">more</span>
    <span class="n">data</span> <span class="k">is</span> <span class="n">required</span><span class="p">.</span> <span class="k">By</span> <span class="k">default</span><span class="p">,</span> <span class="k">as</span> <span class="n">many</span> <span class="n">bytes</span> <span class="k">as</span> <span class="n">possible</span>
    <span class="n">are</span> <span class="n">requested</span><span class="p">.</span> <span class="k">If</span> <span class="n">you</span> <span class="n">would</span> <span class="k">like</span> <span class="k">to</span> <span class="n">request</span> <span class="n">data</span> <span class="k">in</span>
    <span class="n">smaller</span> <span class="n">sizes</span><span class="p">,</span> <span class="n">adjust</span> <span class="n">this</span> <span class="n">parameter</span><span class="p">.</span>

    <span class="n">Note</span> <span class="n">that</span> <span class="k">values</span> <span class="n">outside</span> <span class="n">the</span> <span class="n">valid</span> <span class="n">range</span> <span class="n">will</span> <span class="n">be</span> <span class="n">clamped</span><span class="p">,</span>
    <span class="k">and</span> <span class="n">the</span> <span class="n">final</span> <span class="n">value</span> <span class="n">will</span> <span class="n">also</span> <span class="n">be</span> <span class="n">a</span> <span class="n">multiple</span> <span class="n">of</span> <span class="n">the</span> <span class="n">minimum</span>
    <span class="n">allowed</span> <span class="n">size</span><span class="p">.</span>

<span class="nf">file_size</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="n">the</span> <span class="n">file</span> <span class="n">size</span> <span class="k">is</span> <span class="n">known</span> <span class="n">beforehand</span><span class="p">,</span> <span class="n">you</span> <span class="n">should</span> <span class="kt">set</span>
    <span class="n">this</span> <span class="n">parameter</span> <span class="k">to</span> <span class="n">said</span> <span class="n">value</span><span class="p">.</span> <span class="n">Depending</span> <span class="k">on</span> <span class="n">the</span> <span class="n">type</span> <span class="n">of</span>
    <span class="n">the</span> <span class="n">input</span> <span class="n">file</span> <span class="n">passed</span><span class="p">,</span> <span class="n">this</span> <span class="n">may</span> <span class="n">be</span> <span class="kt">set</span> <span class="n">automatically</span><span class="p">.</span>

<span class="nf">dc_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">data</span> <span class="n">center</span> <span class="n">the</span> <span class="n">library</span> <span class="n">should</span> <span class="n">connect</span> <span class="k">to</span> <span class="k">in</span> <span class="k">order</span>
    <span class="k">to</span> <span class="n">download</span> <span class="n">the</span> <span class="n">file</span><span class="p">.</span> <span class="n">You</span> <span class="n">shouldn</span><span class="err">'</span><span class="n">t</span> <span class="n">worry</span> <span class="n">about</span> <span class="n">this</span><span class="p">.</span>
</code></pre>
</div>
<p>Yields</p>
<div class="codehilite">
<pre><span></span><code><span class="ss">`bytes`</span> <span class="n">objects</span> <span class="n">representing</span> <span class="n">the</span> <span class="n">chunks</span> <span class="n">of</span> <span class="n">the</span> <span class="n">file</span> <span class="k">if</span> <span class="n">the</span>
<span class="k">right</span> <span class="n">conditions</span> <span class="n">are</span> <span class="n">met</span><span class="p">,</span> <span class="k">or</span> <span class="ss">`memoryview`</span> <span class="n">objects</span> <span class="n">instead</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="c1"># Streaming `media` to an output file</span>
    <span class="c1"># After the iteration ends, the sender is cleaned up</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="s1">'photo.jpg'</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
        <span class="n">async</span> <span class="k">for</span> <span class="n">chunk</span> <span class="n">client</span><span class="p">.</span><span class="nf">iter_download</span><span class="p">(</span><span class="n">media</span><span class="p">):</span>
            <span class="n">fd</span><span class="p">.</span><span class="k">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>

    <span class="c1"># Fetching only the header of a file (32 bytes)</span>
    <span class="c1"># You should manually close the iterator in this case.</span>
    <span class="c1">#</span>
    <span class="c1"># telethon.sync must be imported for this to work,</span>
    <span class="c1"># and you must not be inside an "async def".</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">iter_download</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">request_size</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
    <span class="n">header</span> <span class="o">=</span> <span class="nf">next</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
    <span class="n">stream</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
    <span class="n">assert</span> <span class="nf">len</span><span class="p">(</span><span class="n">header</span><span class="p">)</span> <span class="o">==</span> <span class="mi">32</span>

    <span class="c1"># Fetching only the header, inside of an ``async def``</span>
    <span class="n">async</span> <span class="n">def</span> <span class="nf">main</span><span class="p">():</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">iter_download</span><span class="p">(</span><span class="n">media</span><span class="p">,</span> <span class="n">request_size</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
        <span class="n">header</span> <span class="o">=</span> <span class="n">await</span> <span class="n">stream</span><span class="p">.</span><span class="nf">__anext__</span><span class="p">()</span>
        <span class="n">await</span> <span class="n">stream</span><span class="p">.</span><span class="nf">close</span><span class="p">()</span>
        <span class="n">assert</span> <span class="nf">len</span><span class="p">(</span><span class="n">header</span><span class="p">)</span> <span class="o">==</span> <span class="mi">32</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\downloads.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">iter_download</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'hints.FileLike'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">stride</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">request_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">MAX_CHUNK_SIZE</span><span class="p">,</span>
        <span class="n">file_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dc_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Iterates over a file download, yielding chunks of the file.</span>

<span class="sd">    This method can be used to stream files in a more convenient</span>
<span class="sd">    way, since it offers more control (pausing, resuming, etc.)</span>

<span class="sd">    .. note::</span>

<span class="sd">        Using a value for `offset` or `stride` which is not a multiple</span>
<span class="sd">        of the minimum allowed `request_size`, or if `chunk_size` is</span>
<span class="sd">        different from `request_size`, the library will need to do a</span>
<span class="sd">        bit more work to fetch the data in the way you intend it to.</span>

<span class="sd">        You normally shouldn't worry about this.</span>

<span class="sd">    Arguments</span>
<span class="sd">        file (`hints.FileLike`):</span>
<span class="sd">            The file of which contents you want to iterate over.</span>

<span class="sd">        offset (`int`, optional):</span>
<span class="sd">            The offset in bytes into the file from where the</span>
<span class="sd">            download should start. For example, if a file is</span>
<span class="sd">            1024KB long and you just want the last 512KB, you</span>
<span class="sd">            would use ``offset=512 * 1024``.</span>

<span class="sd">        stride (`int`, optional):</span>
<span class="sd">            The stride of each chunk (how much the offset should</span>
<span class="sd">            advance between reading each chunk). This parameter</span>
<span class="sd">            should only be used for more advanced use cases.</span>

<span class="sd">            It must be bigger than or equal to the `chunk_size`.</span>

<span class="sd">        limit (`int`, optional):</span>
<span class="sd">            The limit for how many *chunks* will be yielded at most.</span>

<span class="sd">        chunk_size (`int`, optional):</span>
<span class="sd">            The maximum size of the chunks that will be yielded.</span>
<span class="sd">            Note that the last chunk may be less than this value.</span>
<span class="sd">            By default, it equals to `request_size`.</span>

<span class="sd">        request_size (`int`, optional):</span>
<span class="sd">            How many bytes will be requested to Telegram when more</span>
<span class="sd">            data is required. By default, as many bytes as possible</span>
<span class="sd">            are requested. If you would like to request data in</span>
<span class="sd">            smaller sizes, adjust this parameter.</span>

<span class="sd">            Note that values outside the valid range will be clamped,</span>
<span class="sd">            and the final value will also be a multiple of the minimum</span>
<span class="sd">            allowed size.</span>

<span class="sd">        file_size (`int`, optional):</span>
<span class="sd">            If the file size is known beforehand, you should set</span>
<span class="sd">            this parameter to said value. Depending on the type of</span>
<span class="sd">            the input file passed, this may be set automatically.</span>

<span class="sd">        dc_id (`int`, optional):</span>
<span class="sd">            The data center the library should connect to in order</span>
<span class="sd">            to download the file. You shouldn't worry about this.</span>

<span class="sd">    Yields</span>

<span class="sd">        `bytes` objects representing the chunks of the file if the</span>
<span class="sd">        right conditions are met, or `memoryview` objects instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Streaming `media` to an output file</span>
<span class="sd">            # After the iteration ends, the sender is cleaned up</span>
<span class="sd">            with open('photo.jpg', 'wb') as fd:</span>
<span class="sd">                async for chunk client.iter_download(media):</span>
<span class="sd">                    fd.write(chunk)</span>

<span class="sd">            # Fetching only the header of a file (32 bytes)</span>
<span class="sd">            # You should manually close the iterator in this case.</span>
<span class="sd">            #</span>
<span class="sd">            # telethon.sync must be imported for this to work,</span>
<span class="sd">            # and you must not be inside an "async def".</span>
<span class="sd">            stream = client.iter_download(media, request_size=32)</span>
<span class="sd">            header = next(stream)</span>
<span class="sd">            stream.close()</span>
<span class="sd">            assert len(header) == 32</span>

<span class="sd">            # Fetching only the header, inside of an ``async def``</span>
<span class="sd">            async def main():</span>
<span class="sd">                stream = client.iter_download(media, request_size=32)</span>
<span class="sd">                header = await stream.__anext__()</span>
<span class="sd">                await stream.close()</span>
<span class="sd">                assert len(header) == 32</span>
<span class="sd">    """</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_get_file_info</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">info</span><span class="o">.</span><span class="n">dc_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dc_id</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">dc_id</span>

    <span class="k">if</span> <span class="n">file_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">size</span>

    <span class="n">file</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">location</span>

    <span class="k">if</span> <span class="n">chunk_size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">chunk_size</span> <span class="o">=</span> <span class="n">request_size</span>

    <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">file_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="p">(</span><span class="n">file_size</span> <span class="o">+</span> <span class="n">chunk_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">chunk_size</span>

    <span class="k">if</span> <span class="n">stride</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">stride</span> <span class="o">=</span> <span class="n">chunk_size</span>
    <span class="k">elif</span> <span class="n">stride</span> <span class="o">&lt;</span> <span class="n">chunk_size</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'stride must be &gt;= chunk_size'</span><span class="p">)</span>

    <span class="n">request_size</span> <span class="o">-=</span> <span class="n">request_size</span> <span class="o">%</span> <span class="n">MIN_CHUNK_SIZE</span>
    <span class="k">if</span> <span class="n">request_size</span> <span class="o">&lt;</span> <span class="n">MIN_CHUNK_SIZE</span><span class="p">:</span>
        <span class="n">request_size</span> <span class="o">=</span> <span class="n">MIN_CHUNK_SIZE</span>
    <span class="k">elif</span> <span class="n">request_size</span> <span class="o">&gt;</span> <span class="n">MAX_CHUNK_SIZE</span><span class="p">:</span>
        <span class="n">request_size</span> <span class="o">=</span> <span class="n">MAX_CHUNK_SIZE</span>

    <span class="k">if</span> <span class="n">chunk_size</span> <span class="o">==</span> <span class="n">request_size</span> \
            <span class="ow">and</span> <span class="n">offset</span> <span class="o">%</span> <span class="n">MIN_CHUNK_SIZE</span> <span class="o">==</span> <span class="mi">0</span> \
            <span class="ow">and</span> <span class="n">stride</span> <span class="o">%</span> <span class="n">MIN_CHUNK_SIZE</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">_DirectDownloadIter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Starting direct file download in chunks of '</span>
                                 <span class="s1">'</span><span class="si">%d</span><span class="s1"> at </span><span class="si">%d</span><span class="s1">, stride </span><span class="si">%d</span><span class="s1">'</span><span class="p">,</span> <span class="n">request_size</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">cls</span> <span class="o">=</span> <span class="n">_GenericDownloadIter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Starting indirect file download in chunks of '</span>
                                 <span class="s1">'</span><span class="si">%d</span><span class="s1"> at </span><span class="si">%d</span><span class="s1">, stride </span><span class="si">%d</span><span class="s1">'</span><span class="p">,</span> <span class="n">request_size</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">,</span>
        <span class="n">file</span><span class="o">=</span><span class="n">file</span><span class="p">,</span>
        <span class="n">dc_id</span><span class="o">=</span><span class="n">dc_id</span><span class="p">,</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
        <span class="n">stride</span><span class="o">=</span><span class="n">stride</span><span class="p">,</span>
        <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">,</span>
        <span class="n">request_size</span><span class="o">=</span><span class="n">request_size</span><span class="p">,</span>
        <span class="n">file_size</span><span class="o">=</span><span class="n">file_size</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.messageparse" id="telethon.client.messageparse" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.messageparse" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.messageparse.MessageParseMethods">
<code>MessageParseMethods</code>
<a class="headerlink" href="#telethon.client.messageparse.MessageParseMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="telethon.client.messageparse.MessageParseMethods.parse_mode">
<code class="highlight">
parse_mode        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-writable"><code>writable</code></small>
</span>
<a class="headerlink" href="#telethon.client.messageparse.MessageParseMethods.parse_mode" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>This property is the default parse mode used when sending messages.
Defaults to <code>telethon.extensions.markdown</code>. It will always
be either <code>None</code> or an object with <code>parse</code> and <code>unparse</code>
methods.</p>
<p>When setting a different value it should be one of:</p>
<ul>
<li>Object with <code>parse</code> and <code>unparse</code> methods.</li>
<li>A <code>callable</code> to act as the parse method.</li>
<li>A <code>str</code> indicating the <code>parse_mode</code>. For Markdown <code>'md'</code>
  or <code>'markdown'</code> may be used. For HTML, <code>'htm'</code> or <code>'html'</code>
  may be used.</li>
</ul>
<p>The <code>parse</code> method should be a function accepting a single
parameter, the text to parse, and returning a tuple consisting
of <code>(parsed message str, [MessageEntity instances])</code>.</p>
<p>The <code>unparse</code> method should be the inverse of <code>parse</code> such
that <code>assert text == unparse(*parse(text))</code>.</p>
<p>See :tl:<code>MessageEntity</code> for allowed message entities.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Disabling</span> <span class="k">default</span> <span class="n">formatting</span>
    <span class="n">client</span><span class="p">.</span><span class="n">parse_mode</span> <span class="o">=</span> <span class="k">None</span>

    <span class="o">#</span> <span class="n">Enabling</span> <span class="n">HTML</span> <span class="k">as</span> <span class="n">the</span> <span class="k">default</span> <span class="n">format</span>
    <span class="n">client</span><span class="p">.</span><span class="n">parse_mode</span> <span class="o">=</span> <span class="s1">'html'</span>
</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.messages" id="telethon.client.messages" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.messages" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.messages.MessageMethods">
<code>MessageMethods</code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.delete_messages">
<code class="highlight language-python">
delete_messages<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">message_ids</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">revoke</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.delete_messages" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Deletes the given messages, optionally "for everyone".</p>
<p>See also <code>Message.delete() &lt;telethon.tl.custom.message.Message.delete&gt;</code>.</p>
<p>.. warning::</p>
<div class="codehilite">
<pre><span></span><code><span class="err">This method does **not** validate that the message IDs belong</span>
<span class="err">to the chat that you passed! It's possible for the method to</span>
<span class="err">delete messages from different private chats and small group</span>
<span class="err">chats at once, so make sure to pass the right IDs.</span>
</code></pre>
</div>
<p>Arguments
    entity (<code>entity</code>):
        From who the message will be deleted. This can actually
        be <code>None</code> for normal chats, but <strong>must</strong> be present
        for channels and megagroups.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">message_ids</span> <span class="p">(</span><span class="ss">`list`</span> <span class="o">|</span> <span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">):</span>
    <span class="n">The</span> <span class="nf">IDs</span> <span class="p">(</span><span class="k">or</span> <span class="n">ID</span><span class="p">)</span> <span class="k">or</span> <span class="n">messages</span> <span class="k">to</span> <span class="n">be</span> <span class="n">deleted</span><span class="p">.</span>

<span class="k">revoke</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">message</span> <span class="n">should</span> <span class="n">be</span> <span class="n">deleted</span> <span class="k">for</span> <span class="n">everyone</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>
    <span class="k">By</span> <span class="k">default</span> <span class="n">it</span> <span class="n">has</span> <span class="n">the</span> <span class="n">opposite</span> <span class="n">behaviour</span> <span class="n">of</span> <span class="n">official</span> <span class="n">clients</span><span class="p">,</span>
    <span class="k">and</span> <span class="n">it</span> <span class="n">will</span> <span class="k">delete</span> <span class="n">the</span> <span class="n">message</span> <span class="k">for</span> <span class="n">everyone</span><span class="p">.</span>

    <span class="ss">`Since 24 March 2019</span>
<span class="ss">    &lt;https://telegram.org/blog/unsend-privacy-emoji&gt;`</span><span class="n">_</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span>
    <span class="n">also</span> <span class="k">revoke</span> <span class="n">messages</span> <span class="n">of</span> <span class="n">any</span> <span class="nf">age</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">e</span><span class="p">.</span> <span class="n">messages</span> <span class="n">sent</span> <span class="k">long</span> <span class="k">in</span>
    <span class="n">the</span> <span class="n">past</span><span class="p">)</span> <span class="n">the</span> <span class="o">*</span><span class="n">other</span><span class="o">*</span> <span class="n">person</span> <span class="n">sent</span> <span class="k">in</span> <span class="n">private</span> <span class="nf">conversations</span>
    <span class="p">(</span><span class="k">and</span> <span class="n">of</span> <span class="n">course</span> <span class="n">your</span> <span class="n">messages</span> <span class="n">too</span><span class="p">).</span>

    <span class="n">Disabling</span> <span class="n">this</span> <span class="n">has</span> <span class="n">no</span> <span class="n">effect</span> <span class="k">on</span> <span class="n">channels</span> <span class="k">or</span> <span class="n">megagroups</span><span class="p">,</span>
    <span class="n">since</span> <span class="n">it</span> <span class="n">will</span> <span class="n">unconditionally</span> <span class="k">delete</span> <span class="n">the</span> <span class="n">message</span> <span class="k">for</span> <span class="n">everyone</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    A list of :tl:<code>AffectedMessages</code>, each item being the result
    for the delete calls of the messages in chunks of 100 each.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    await client.delete_messages(chat, messages)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>1062
1063
1064
1065
1066
1067
1068
1069
1070
1071
1072
1073
1074
1075
1076
1077
1078
1079
1080
1081
1082
1083
1084
1085
1086
1087
1088
1089
1090
1091
1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109
1110
1111
1112
1113
1114
1115
1116
1117
1118
1119
1120
1121
1122
1123
1124
1125
1126
1127
1128
1129
1130
1131
1132
1133</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">message_ids</span><span class="p">:</span> <span class="s1">'typing.Union[hints.MessageIDLike, typing.Sequence[hints.MessageIDLike]]'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">revoke</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'typing.Sequence[types.messages.AffectedMessages]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes the given messages, optionally "for everyone".</span>

<span class="sd">    See also `Message.delete() &lt;telethon.tl.custom.message.Message.delete&gt;`.</span>

<span class="sd">    .. warning::</span>

<span class="sd">        This method does **not** validate that the message IDs belong</span>
<span class="sd">        to the chat that you passed! It's possible for the method to</span>
<span class="sd">        delete messages from different private chats and small group</span>
<span class="sd">        chats at once, so make sure to pass the right IDs.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            From who the message will be deleted. This can actually</span>
<span class="sd">            be `None` for normal chats, but **must** be present</span>
<span class="sd">            for channels and megagroups.</span>

<span class="sd">        message_ids (`list` | `int` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="sd">            The IDs (or ID) or messages to be deleted.</span>

<span class="sd">        revoke (`bool`, optional):</span>
<span class="sd">            Whether the message should be deleted for everyone or not.</span>
<span class="sd">            By default it has the opposite behaviour of official clients,</span>
<span class="sd">            and it will delete the message for everyone.</span>

<span class="sd">            `Since 24 March 2019</span>
<span class="sd">            &lt;https://telegram.org/blog/unsend-privacy-emoji&gt;`_, you can</span>
<span class="sd">            also revoke messages of any age (i.e. messages sent long in</span>
<span class="sd">            the past) the *other* person sent in private conversations</span>
<span class="sd">            (and of course your messages too).</span>

<span class="sd">            Disabling this has no effect on channels or megagroups,</span>
<span class="sd">            since it will unconditionally delete the message for everyone.</span>

<span class="sd">    Returns</span>
<span class="sd">        A list of :tl:`AffectedMessages`, each item being the result</span>
<span class="sd">        for the delete calls of the messages in chunks of 100 each.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            await client.delete_messages(chat, messages)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">message_ids</span><span class="p">):</span>
        <span class="n">message_ids</span> <span class="o">=</span> <span class="p">(</span><span class="n">message_ids</span><span class="p">,)</span>

    <span class="n">message_ids</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">m</span><span class="o">.</span><span class="n">id</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">(</span>
            <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageService</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageEmpty</span><span class="p">))</span>
        <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">message_ids</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">entity</span><span class="p">:</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
        <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># no entity (None), set a value that's not a channel for private delete</span>
        <span class="n">ty</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">USER</span>

    <span class="k">if</span> <span class="n">ty</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">([</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">DeleteMessagesRequest</span><span class="p">(</span>
                     <span class="n">entity</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">))</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">chunks</span><span class="p">(</span><span class="n">message_ids</span><span class="p">)])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">([</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">DeleteMessagesRequest</span><span class="p">(</span>
                     <span class="nb">list</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">revoke</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">utils</span><span class="o">.</span><span class="n">chunks</span><span class="p">(</span><span class="n">message_ids</span><span class="p">)])</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.edit_message">
<code class="highlight language-python">
edit_message<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="p">(),</span> <span class="n">link_preview</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.edit_message" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Edits the given message to change its text or media.</p>
<p>See also <code>Message.edit() &lt;telethon.tl.custom.message.Message.edit&gt;</code>.</p>
<p>Arguments
    entity (<code>entity</code> | <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>):
        From which chat to edit the message. This can also be
        the message to be edited, and the entity will be inferred
        from it, so the next parameter will be assumed to be the
        message text.</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">You</span> <span class="n">may</span> <span class="n">also</span> <span class="n">pass</span> <span class="n">a</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`InputBotInlineMessageID`</span><span class="p">,</span>
    <span class="n">which</span> <span class="k">is</span> <span class="n">the</span> <span class="n">only</span> <span class="n">way</span> <span class="k">to</span> <span class="n">edit</span> <span class="n">messages</span> <span class="n">that</span> <span class="n">were</span> <span class="n">sent</span>
    <span class="n">after</span> <span class="n">the</span> <span class="n">user</span> <span class="n">selects</span> <span class="n">an</span> <span class="n">inline</span> <span class="n">query</span> <span class="n">result</span><span class="p">.</span>

<span class="nf">message</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span> <span class="o">|</span> <span class="ss">`str`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">the</span> <span class="nf">message</span> <span class="p">(</span><span class="k">or</span> <span class="ss">`Message</span>
<span class="ss">    &lt;telethon.tl.custom.message.Message&gt;`</span> <span class="n">itself</span><span class="p">)</span> <span class="k">to</span> <span class="n">be</span> <span class="n">edited</span><span class="p">.</span>
    <span class="k">If</span> <span class="n">the</span> <span class="ss">`entity`</span> <span class="n">was</span> <span class="n">a</span> <span class="ss">`Message</span>
<span class="ss">    &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">,</span> <span class="k">then</span> <span class="n">this</span> <span class="n">message</span>
    <span class="n">will</span> <span class="n">be</span> <span class="n">treated</span> <span class="k">as</span> <span class="n">the</span> <span class="n">new</span> <span class="kt">text</span><span class="p">.</span>

<span class="kt">text</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">new</span> <span class="kt">text</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span><span class="p">.</span> <span class="n">Does</span> <span class="n">nothing</span> <span class="k">if</span> <span class="n">the</span> <span class="ss">`entity`</span>
    <span class="n">was</span> <span class="n">a</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">.</span>

<span class="nf">parse_mode</span> <span class="p">(</span><span class="ss">`object`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">See</span> <span class="n">the</span> <span class="ss">`TelegramClient.parse_mode</span>
<span class="ss">    &lt;telethon.client.messageparse.MessageParseMethods.parse_mode&gt;`</span>
    <span class="n">property</span> <span class="k">for</span> <span class="n">allowed</span> <span class="k">values</span><span class="p">.</span> <span class="n">Markdown</span> <span class="n">parsing</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="k">by</span>
    <span class="k">default</span><span class="p">.</span>

<span class="nf">link_preview</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Should</span> <span class="n">the</span> <span class="n">link</span> <span class="n">preview</span> <span class="n">be</span> <span class="n">shown</span><span class="o">?</span>

<span class="nf">file</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`bytes`</span> <span class="o">|</span> <span class="ss">`file`</span> <span class="o">|</span> <span class="ss">`media`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">file</span> <span class="n">object</span> <span class="n">that</span> <span class="n">should</span> <span class="k">replace</span> <span class="n">the</span> <span class="n">existing</span> <span class="n">media</span>
    <span class="k">in</span> <span class="n">the</span> <span class="n">message</span><span class="p">.</span>

<span class="nf">force_document</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="k">to</span> <span class="n">send</span> <span class="n">the</span> <span class="n">given</span> <span class="n">file</span> <span class="k">as</span> <span class="n">a</span> <span class="n">document</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">buttons</span> <span class="p">(</span><span class="ss">`list`</span><span class="p">,</span> <span class="ss">`custom.Button &lt;telethon.tl.custom.button.Button&gt;`</span><span class="p">,</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`KeyboardButton`</span><span class="p">):</span>
    <span class="n">The</span> <span class="nf">matrix</span> <span class="p">(</span><span class="n">list</span> <span class="n">of</span> <span class="n">lists</span><span class="p">),</span> <span class="n">row</span> <span class="n">list</span> <span class="k">or</span> <span class="n">button</span> <span class="k">to</span> <span class="n">be</span> <span class="n">shown</span>
    <span class="n">after</span> <span class="n">sending</span> <span class="n">the</span> <span class="n">message</span><span class="p">.</span> <span class="n">This</span> <span class="n">parameter</span> <span class="n">will</span> <span class="n">only</span> <span class="n">work</span> <span class="k">if</span>
    <span class="n">you</span> <span class="n">have</span> <span class="n">signed</span> <span class="k">in</span> <span class="k">as</span> <span class="n">a</span> <span class="n">bot</span><span class="p">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">also</span> <span class="n">pass</span> <span class="n">your</span> <span class="n">own</span>
    <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`ReplyMarkup`</span> <span class="n">here</span><span class="p">.</span>

<span class="nf">schedule</span> <span class="p">(</span><span class="ss">`hints.DateLike`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="kt">set</span><span class="p">,</span> <span class="n">the</span> <span class="n">message</span> <span class="n">won</span><span class="err">'</span><span class="n">t</span> <span class="n">be</span> <span class="n">edited</span> <span class="n">immediately</span><span class="p">,</span> <span class="k">and</span> <span class="n">instead</span>
    <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">scheduled</span> <span class="k">to</span> <span class="n">be</span> <span class="n">automatically</span> <span class="n">edited</span> <span class="n">at</span> <span class="n">a</span> <span class="n">later</span>
    <span class="kt">time</span><span class="p">.</span>

    <span class="n">Note</span> <span class="n">that</span> <span class="n">this</span> <span class="n">parameter</span> <span class="n">will</span> <span class="n">have</span> <span class="n">no</span> <span class="n">effect</span> <span class="k">if</span> <span class="n">you</span> <span class="n">are</span>
    <span class="n">trying</span> <span class="k">to</span> <span class="n">edit</span> <span class="n">a</span> <span class="n">message</span> <span class="n">that</span> <span class="n">was</span> <span class="n">sent</span> <span class="n">via</span> <span class="n">inline</span> <span class="n">bots</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The edited <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>,
    unless <code>entity</code> was a :tl:<code>InputBotInlineMessageID</code> in which
    case this method returns a boolean.</p>
<p>Raises
    <code>MessageAuthorRequiredError</code> if you're not the author of the
    message but tried editing it anyway.</p>
<div class="codehilite">
<pre><span></span><code><span class="ss">``</span><span class="n">MessageNotModifiedError</span><span class="ss">``</span> <span class="k">if</span> <span class="n">the</span> <span class="n">contents</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span> <span class="n">were</span>
<span class="k">not</span> <span class="n">modified</span> <span class="n">at</span> <span class="k">all</span><span class="p">.</span>

<span class="ss">``</span><span class="n">MessageIdInvalidError</span><span class="ss">``</span> <span class="k">if</span> <span class="n">the</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span> <span class="k">is</span> <span class="nf">invalid</span>
<span class="p">(</span><span class="n">the</span> <span class="n">ID</span> <span class="n">itself</span> <span class="n">may</span> <span class="n">be</span> <span class="n">correct</span><span class="p">,</span> <span class="n">but</span> <span class="n">the</span> <span class="n">message</span> <span class="k">with</span> <span class="n">that</span> <span class="n">ID</span>
<span class="n">cannot</span> <span class="n">be</span> <span class="n">edited</span><span class="p">).</span> <span class="k">For</span> <span class="n">example</span><span class="p">,</span> <span class="k">when</span> <span class="n">trying</span> <span class="k">to</span> <span class="n">edit</span> <span class="n">messages</span>
<span class="k">with</span> <span class="n">a</span> <span class="n">reply</span> <span class="nf">markup</span> <span class="p">(</span><span class="k">or</span> <span class="n">clear</span> <span class="n">markup</span><span class="p">)</span> <span class="n">this</span> <span class="n">error</span> <span class="n">will</span> <span class="n">be</span> <span class="n">raised</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">message</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'hello'</span><span class="p">)</span>

    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">edit_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="s1">'hello!'</span><span class="p">)</span>
    <span class="o">#</span> <span class="k">or</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">edit_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">message</span><span class="p">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">'hello!!'</span><span class="p">)</span>
    <span class="o">#</span> <span class="k">or</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">edit_message</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="s1">'hello!!!'</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 917
 918
 919
 920
 921
 922
 923
 924
 925
 926
 927
 928
 929
 930
 931
 932
 933
 934
 935
 936
 937
 938
 939
 940
 941
 942
 943
 944
 945
 946
 947
 948
 949
 950
 951
 952
 953
 954
 955
 956
 957
 958
 959
 960
 961
 962
 963
 964
 965
 966
 967
 968
 969
 970
 971
 972
 973
 974
 975
 976
 977
 978
 979
 980
 981
 982
 983
 984
 985
 986
 987
 988
 989
 990
 991
 992
 993
 994
 995
 996
 997
 998
 999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026
1027
1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050
1051
1052
1053
1054
1055
1056
1057
1058
1059
1060</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'typing.Union[hints.EntityLike, types.Message]'</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="s1">'hints.MessageLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">parse_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">link_preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'hints.FileLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force_document</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">buttons</span><span class="p">:</span> <span class="s1">'hints.MarkupLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schedule</span><span class="p">:</span> <span class="s1">'hints.DateLike'</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'types.Message'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Edits the given message to change its text or media.</span>

<span class="sd">    See also `Message.edit() &lt;telethon.tl.custom.message.Message.edit&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="sd">            From which chat to edit the message. This can also be</span>
<span class="sd">            the message to be edited, and the entity will be inferred</span>
<span class="sd">            from it, so the next parameter will be assumed to be the</span>
<span class="sd">            message text.</span>

<span class="sd">            You may also pass a :tl:`InputBotInlineMessageID`,</span>
<span class="sd">            which is the only way to edit messages that were sent</span>
<span class="sd">            after the user selects an inline query result.</span>

<span class="sd">        message (`int` | `Message &lt;telethon.tl.custom.message.Message&gt;` | `str`):</span>
<span class="sd">            The ID of the message (or `Message</span>
<span class="sd">            &lt;telethon.tl.custom.message.Message&gt;` itself) to be edited.</span>
<span class="sd">            If the `entity` was a `Message</span>
<span class="sd">            &lt;telethon.tl.custom.message.Message&gt;`, then this message</span>
<span class="sd">            will be treated as the new text.</span>

<span class="sd">        text (`str`, optional):</span>
<span class="sd">            The new text of the message. Does nothing if the `entity`</span>
<span class="sd">            was a `Message &lt;telethon.tl.custom.message.Message&gt;`.</span>

<span class="sd">        parse_mode (`object`, optional):</span>
<span class="sd">            See the `TelegramClient.parse_mode</span>
<span class="sd">            &lt;telethon.client.messageparse.MessageParseMethods.parse_mode&gt;`</span>
<span class="sd">            property for allowed values. Markdown parsing will be used by</span>
<span class="sd">            default.</span>

<span class="sd">        link_preview (`bool`, optional):</span>
<span class="sd">            Should the link preview be shown?</span>

<span class="sd">        file (`str` | `bytes` | `file` | `media`, optional):</span>
<span class="sd">            The file object that should replace the existing media</span>
<span class="sd">            in the message.</span>

<span class="sd">        force_document (`bool`, optional):</span>
<span class="sd">            Whether to send the given file as a document or not.</span>

<span class="sd">        buttons (`list`, `custom.Button &lt;telethon.tl.custom.button.Button&gt;`, :tl:`KeyboardButton`):</span>
<span class="sd">            The matrix (list of lists), row list or button to be shown</span>
<span class="sd">            after sending the message. This parameter will only work if</span>
<span class="sd">            you have signed in as a bot. You can also pass your own</span>
<span class="sd">            :tl:`ReplyMarkup` here.</span>

<span class="sd">        schedule (`hints.DateLike`, optional):</span>
<span class="sd">            If set, the message won't be edited immediately, and instead</span>
<span class="sd">            it will be scheduled to be automatically edited at a later</span>
<span class="sd">            time.</span>

<span class="sd">            Note that this parameter will have no effect if you are</span>
<span class="sd">            trying to edit a message that was sent via inline bots.</span>

<span class="sd">    Returns</span>
<span class="sd">        The edited `Message &lt;telethon.tl.custom.message.Message&gt;`,</span>
<span class="sd">        unless `entity` was a :tl:`InputBotInlineMessageID` in which</span>
<span class="sd">        case this method returns a boolean.</span>

<span class="sd">    Raises</span>
<span class="sd">        ``MessageAuthorRequiredError`` if you're not the author of the</span>
<span class="sd">        message but tried editing it anyway.</span>

<span class="sd">        ``MessageNotModifiedError`` if the contents of the message were</span>
<span class="sd">        not modified at all.</span>

<span class="sd">        ``MessageIdInvalidError`` if the ID of the message is invalid</span>
<span class="sd">        (the ID itself may be correct, but the message with that ID</span>
<span class="sd">        cannot be edited). For example, when trying to edit messages</span>
<span class="sd">        with a reply markup (or clear markup) this error will be raised.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            message = await client.send_message(chat, 'hello')</span>

<span class="sd">            await client.edit_message(chat, message, 'hello!')</span>
<span class="sd">            # or</span>
<span class="sd">            await client.edit_message(chat, message.id, 'hello!!')</span>
<span class="sd">            # or</span>
<span class="sd">            await client.edit_message(message, 'hello!!!')</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputBotInlineMessageID</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">message</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">entity</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">message</span>  <span class="c1"># Shift the parameters to the right</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">entity</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="n">entity</span><span class="o">.</span><span class="n">to_id</span>

    <span class="n">text</span><span class="p">,</span> <span class="n">msg_entities</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_message_text</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">parse_mode</span><span class="p">)</span>
    <span class="n">file_handle</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_file_to_media</span><span class="p">(</span><span class="n">file</span><span class="p">,</span>
            <span class="n">force_document</span><span class="o">=</span><span class="n">force_document</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputBotInlineMessageID</span><span class="p">):</span>
        <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">EditInlineBotMessageRequest</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
            <span class="n">no_webpage</span><span class="o">=</span><span class="ow">not</span> <span class="n">link_preview</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">msg_entities</span><span class="p">,</span>
            <span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">,</span>
            <span class="n">reply_markup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># Invoke `messages.editInlineBotMessage` from the right datacenter.</span>
        <span class="c1"># Otherwise, Telegram will error with `MESSAGE_ID_INVALID` and do nothing.</span>
        <span class="n">exported</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">dc_id</span> <span class="o">!=</span> <span class="n">entity</span><span class="o">.</span><span class="n">dc_id</span>
        <span class="k">if</span> <span class="n">exported</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sender</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_borrow_exported_sender</span><span class="p">(</span><span class="n">entity</span><span class="o">.</span><span class="n">dc_id</span><span class="p">)</span>
                <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_call</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">request</span><span class="p">)</span>
            <span class="k">finally</span><span class="p">:</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_return_exported_sender</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">EditMessageRequest</span><span class="p">(</span>
        <span class="n">peer</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">get_message_id</span><span class="p">(</span><span class="n">message</span><span class="p">),</span>
        <span class="n">message</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="n">no_webpage</span><span class="o">=</span><span class="ow">not</span> <span class="n">link_preview</span><span class="p">,</span>
        <span class="n">entities</span><span class="o">=</span><span class="n">msg_entities</span><span class="p">,</span>
        <span class="n">media</span><span class="o">=</span><span class="n">media</span><span class="p">,</span>
        <span class="n">reply_markup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">(</span><span class="n">buttons</span><span class="p">),</span>
        <span class="n">schedule_date</span><span class="o">=</span><span class="n">schedule</span>
    <span class="p">)</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_response_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">entity</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">msg</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.forward_messages">
<code class="highlight language-python">
forward_messages<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">messages</span><span class="p">,</span> <span class="n">from_peer</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">as_album</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.forward_messages" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Forwards the given messages to the specified entity.</p>
<p>If you want to "forward" a message without the forward header
(the "forwarded from" text), you should use <code>send_message</code> with
the original message instead. This will send a copy of it.</p>
<p>See also <code>Message.forward_to() &lt;telethon.tl.custom.message.Message.forward_to&gt;</code>.</p>
<p>Arguments
    entity (<code>entity</code>):
        To which entity the message(s) will be forwarded.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">messages</span> <span class="p">(</span><span class="ss">`list`</span> <span class="o">|</span> <span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">):</span>
    <span class="n">The</span> <span class="nf">message</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">to</span> <span class="n">forward</span><span class="p">,</span> <span class="k">or</span> <span class="n">their</span> <span class="kt">integer</span> <span class="n">IDs</span><span class="p">.</span>

<span class="nf">from_peer</span> <span class="p">(</span><span class="ss">`entity`</span><span class="p">):</span>
    <span class="k">If</span> <span class="n">the</span> <span class="n">given</span> <span class="n">messages</span> <span class="n">are</span> <span class="kt">integer</span> <span class="n">IDs</span> <span class="k">and</span> <span class="k">not</span> <span class="n">instances</span>
    <span class="n">of</span> <span class="n">the</span> <span class="ss">``</span><span class="n">Message</span><span class="ss">``</span> <span class="n">class</span><span class="p">,</span> <span class="n">this</span> <span class="o">*</span><span class="n">must</span><span class="o">*</span> <span class="n">be</span> <span class="n">specified</span> <span class="k">in</span>
    <span class="k">order</span> <span class="k">for</span> <span class="n">the</span> <span class="n">forward</span> <span class="k">to</span> <span class="n">work</span><span class="p">.</span> <span class="n">This</span> <span class="n">parameter</span> <span class="n">indicates</span>
    <span class="n">the</span> <span class="n">entity</span> <span class="k">from</span> <span class="n">which</span> <span class="n">the</span> <span class="n">messages</span> <span class="n">should</span> <span class="n">be</span> <span class="n">forwarded</span><span class="p">.</span>

<span class="nf">silent</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">message</span> <span class="n">should</span> <span class="n">notify</span> <span class="n">people</span> <span class="k">with</span> <span class="n">sound</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>
    <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">`False`</span> <span class="p">(</span><span class="n">send</span> <span class="k">with</span> <span class="n">a</span> <span class="n">notification</span> <span class="n">sound</span> <span class="n">unless</span>
    <span class="n">the</span> <span class="n">person</span> <span class="n">has</span> <span class="n">the</span> <span class="n">chat</span> <span class="n">muted</span><span class="p">).</span> <span class="kt">Set</span> <span class="n">it</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">to</span> <span class="k">alter</span>
    <span class="n">this</span> <span class="n">behaviour</span><span class="p">.</span>

<span class="nf">as_album</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">several</span> <span class="n">image</span> <span class="n">messages</span> <span class="n">should</span> <span class="n">be</span> <span class="n">forwarded</span> <span class="k">as</span> <span class="n">an</span>
    <span class="nf">album</span> <span class="p">(</span><span class="n">grouped</span><span class="p">)</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span> <span class="n">The</span> <span class="k">default</span> <span class="n">behaviour</span> <span class="k">is</span> <span class="k">to</span> <span class="n">treat</span>
    <span class="n">albums</span> <span class="n">specially</span> <span class="k">and</span> <span class="n">send</span> <span class="n">outgoing</span> <span class="n">requests</span> <span class="k">with</span>
    <span class="ss">``</span><span class="n">as_album</span><span class="o">=</span><span class="no">True</span><span class="ss">``</span> <span class="n">only</span> <span class="k">for</span> <span class="n">the</span> <span class="n">albums</span> <span class="k">if</span> <span class="n">message</span> <span class="n">objects</span>
    <span class="n">are</span> <span class="n">used</span><span class="p">.</span> <span class="k">If</span> <span class="n">IDs</span> <span class="n">are</span> <span class="n">used</span> <span class="n">it</span> <span class="n">will</span> <span class="k">group</span> <span class="k">by</span> <span class="k">default</span><span class="p">.</span>

    <span class="k">In</span> <span class="n">short</span><span class="p">,</span> <span class="n">the</span> <span class="k">default</span> <span class="n">should</span> <span class="n">do</span> <span class="n">what</span> <span class="n">you</span> <span class="n">expect</span><span class="p">,</span>
    <span class="ss">`True`</span> <span class="n">will</span> <span class="k">group</span> <span class="nf">always</span> <span class="p">(</span><span class="n">even</span> <span class="n">converting</span> <span class="n">separate</span>
    <span class="n">images</span> <span class="k">into</span> <span class="n">albums</span><span class="p">),</span> <span class="k">and</span> <span class="ss">`False`</span> <span class="n">will</span> <span class="n">never</span> <span class="k">group</span><span class="p">.</span>

<span class="nf">schedule</span> <span class="p">(</span><span class="ss">`hints.DateLike`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="kt">set</span><span class="p">,</span> <span class="n">the</span> <span class="nf">message</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">won</span><span class="err">'</span><span class="n">t</span> <span class="n">forward</span> <span class="n">immediately</span><span class="p">,</span> <span class="k">and</span>
    <span class="n">instead</span> <span class="n">they</span> <span class="n">will</span> <span class="n">be</span> <span class="n">scheduled</span> <span class="k">to</span> <span class="n">be</span> <span class="n">automatically</span> <span class="n">sent</span>
    <span class="n">at</span> <span class="n">a</span> <span class="n">later</span> <span class="kt">time</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The list of forwarded <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>,
    or a single one if a list wasn't provided as input.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Note</span> <span class="n">that</span> <span class="k">if</span> <span class="k">all</span> <span class="n">messages</span> <span class="n">are</span> <span class="nf">invalid</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">e</span><span class="p">.</span> <span class="n">deleted</span><span class="p">)</span> <span class="n">the</span> <span class="k">call</span>
<span class="n">will</span> <span class="n">fail</span> <span class="k">with</span> <span class="ss">``</span><span class="n">MessageIdInvalidError</span><span class="ss">``</span><span class="p">.</span> <span class="k">If</span> <span class="n">only</span> <span class="n">some</span> <span class="n">are</span>
<span class="n">invalid</span><span class="p">,</span> <span class="n">the</span> <span class="n">list</span> <span class="n">will</span> <span class="n">have</span> <span class="ss">`None`</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">those</span> <span class="n">messages</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">a</span> <span class="n">single</span> <span class="n">one</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">forward_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
    <span class="o">#</span> <span class="k">or</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">forward_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">message_id</span><span class="p">,</span> <span class="n">from_chat</span><span class="p">)</span>
    <span class="o">#</span> <span class="k">or</span>
    <span class="n">await</span> <span class="n">message</span><span class="p">.</span><span class="n">forward_to</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">multiple</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">forward_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">messages</span><span class="p">)</span>
    <span class="o">#</span> <span class="k">or</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">forward_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">message_ids</span><span class="p">,</span> <span class="n">from_chat</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Forwarding</span> <span class="k">as</span> <span class="n">a</span> <span class="k">copy</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812
813
814
815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875
876
877
878
879
880
881
882
883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">forward_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">messages</span><span class="p">:</span> <span class="s1">'typing.Union[hints.MessageIDLike, typing.Sequence[hints.MessageIDLike]]'</span><span class="p">,</span>
        <span class="n">from_peer</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">silent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">as_album</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schedule</span><span class="p">:</span> <span class="s1">'hints.DateLike'</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'typing.Sequence[types.Message]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Forwards the given messages to the specified entity.</span>

<span class="sd">    If you want to "forward" a message without the forward header</span>
<span class="sd">    (the "forwarded from" text), you should use `send_message` with</span>
<span class="sd">    the original message instead. This will send a copy of it.</span>

<span class="sd">    See also `Message.forward_to() &lt;telethon.tl.custom.message.Message.forward_to&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            To which entity the message(s) will be forwarded.</span>

<span class="sd">        messages (`list` | `int` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="sd">            The message(s) to forward, or their integer IDs.</span>

<span class="sd">        from_peer (`entity`):</span>
<span class="sd">            If the given messages are integer IDs and not instances</span>
<span class="sd">            of the ``Message`` class, this *must* be specified in</span>
<span class="sd">            order for the forward to work. This parameter indicates</span>
<span class="sd">            the entity from which the messages should be forwarded.</span>

<span class="sd">        silent (`bool`, optional):</span>
<span class="sd">            Whether the message should notify people with sound or not.</span>
<span class="sd">            Defaults to `False` (send with a notification sound unless</span>
<span class="sd">            the person has the chat muted). Set it to `True` to alter</span>
<span class="sd">            this behaviour.</span>

<span class="sd">        as_album (`bool`, optional):</span>
<span class="sd">            Whether several image messages should be forwarded as an</span>
<span class="sd">            album (grouped) or not. The default behaviour is to treat</span>
<span class="sd">            albums specially and send outgoing requests with</span>
<span class="sd">            ``as_album=True`` only for the albums if message objects</span>
<span class="sd">            are used. If IDs are used it will group by default.</span>

<span class="sd">            In short, the default should do what you expect,</span>
<span class="sd">            `True` will group always (even converting separate</span>
<span class="sd">            images into albums), and `False` will never group.</span>

<span class="sd">        schedule (`hints.DateLike`, optional):</span>
<span class="sd">            If set, the message(s) won't forward immediately, and</span>
<span class="sd">            instead they will be scheduled to be automatically sent</span>
<span class="sd">            at a later time.</span>

<span class="sd">    Returns</span>
<span class="sd">        The list of forwarded `Message &lt;telethon.tl.custom.message.Message&gt;`,</span>
<span class="sd">        or a single one if a list wasn't provided as input.</span>

<span class="sd">        Note that if all messages are invalid (i.e. deleted) the call</span>
<span class="sd">        will fail with ``MessageIdInvalidError``. If only some are</span>
<span class="sd">        invalid, the list will have `None` instead of those messages.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # a single one</span>
<span class="sd">            await client.forward_messages(chat, message)</span>
<span class="sd">            # or</span>
<span class="sd">            await client.forward_messages(chat, message_id, from_chat)</span>
<span class="sd">            # or</span>
<span class="sd">            await message.forward_to(chat)</span>

<span class="sd">            # multiple</span>
<span class="sd">            await client.forward_messages(chat, messages)</span>
<span class="sd">            # or</span>
<span class="sd">            await client.forward_messages(chat, message_ids, from_chat)</span>

<span class="sd">            # Forwarding as a copy</span>
<span class="sd">            await client.send_message(chat, message)</span>
<span class="sd">    """</span>
    <span class="n">single</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">single</span><span class="p">:</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">(</span><span class="n">messages</span><span class="p">,)</span>

    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">from_peer</span><span class="p">:</span>
        <span class="n">from_peer</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">from_peer</span><span class="p">)</span>
        <span class="n">from_peer_id</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="n">from_peer</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">from_peer_id</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_get_key</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">from_peer_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">from_peer_id</span><span class="p">,</span> <span class="kc">None</span>

            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'from_peer must be given if integer IDs are used'</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">chat_id</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">grouped_id</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Cannot forward messages of type </span><span class="si">{}</span><span class="s1">'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">m</span><span class="p">)))</span>

    <span class="c1"># We want to group outgoing chunks differently if we are "smart"</span>
    <span class="c1"># about sending as album.</span>
    <span class="c1">#</span>
    <span class="c1"># Why? We need separate requests for ``as_album=True/False``, so</span>
    <span class="c1"># if we want that behaviour, when we group messages to create the</span>
    <span class="c1"># chunks, we need to consider the grouped ID too. But if we don't</span>
    <span class="c1"># care about that, we don't need to consider it for creating the</span>
    <span class="c1"># chunks, so we can make less requests.</span>
    <span class="k">if</span> <span class="n">as_album</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">get_key</span> <span class="o">=</span> <span class="n">_get_key</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">get_key</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">_get_key</span><span class="p">(</span><span class="n">m</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Ignore grouped_id</span>

    <span class="n">sent</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">chat_id</span><span class="p">,</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">messages</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">get_key</span><span class="p">):</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">chunk</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">chat</span> <span class="o">=</span> <span class="n">from_peer</span>
            <span class="n">grouped</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">as_album</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">as_album</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">chat</span> <span class="o">=</span> <span class="k">await</span> <span class="n">chunk</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">as_album</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">grouped</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">grouped_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">grouped</span> <span class="o">=</span> <span class="n">as_album</span>

            <span class="n">chunk</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">]</span>

        <span class="n">req</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">ForwardMessagesRequest</span><span class="p">(</span>
            <span class="n">from_peer</span><span class="o">=</span><span class="n">chat</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">chunk</span><span class="p">,</span>
            <span class="n">to_peer</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
            <span class="c1"># Trying to send a single message as grouped will cause</span>
            <span class="c1"># GROUPED_MEDIA_INVALID. If more than one message is forwarded</span>
            <span class="c1"># (even without media...), this error goes away.</span>
            <span class="n">grouped</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">grouped</span><span class="p">,</span>
            <span class="n">schedule_date</span><span class="o">=</span><span class="n">schedule</span>
        <span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
        <span class="n">sent</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_response_message</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">entity</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">sent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">single</span> <span class="k">else</span> <span class="n">sent</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.get_messages">
<code class="highlight language-python">
get_messages<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wait_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.get_messages" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Same as <code>iter_messages()</code>, but returns a
<code>TotalList &lt;telethon.helpers.TotalList&gt;</code> instead.</p>
<p>If the <code>limit</code> is not set, it will be 1 by default unless both
<code>min_id</code> <strong>and</strong> <code>max_id</code> are set (as <em>named</em> arguments), in
which case the entire range will be returned.</p>
<p>This is so because any integer limit would be rather arbitrary and
it's common to only want to fetch one message, but if a range is
specified it makes sense that it should return the entirety of it.</p>
<p>If <code>ids</code> is present in the <em>named</em> arguments and is not a list,
a single <code>Message &lt;telethon.tl.custom.message.Message&gt;</code> will be
returned for convenience instead of a list.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="c1"># Get 0 photos and print the total to show how many photos there are</span>
    <span class="kn">from</span> <span class="nn">telethon.tl.types</span> <span class="kn">import</span> <span class="n">InputMessagesFilterPhotos</span>
    <span class="n">photos</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">InputMessagesFilterPhotos</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">photos</span><span class="o">.</span><span class="n">total</span><span class="p">)</span>

    <span class="c1"># Get all the photos</span>
    <span class="n">photos</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">InputMessagesFilterPhotos</span><span class="p">)</span>

    <span class="c1"># Get messages by ID:</span>
    <span class="n">message_1337</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="mi">1337</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'hints.TotalList'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Same as `iter_messages()`, but returns a</span>
<span class="sd">    `TotalList &lt;telethon.helpers.TotalList&gt;` instead.</span>

<span class="sd">    If the `limit` is not set, it will be 1 by default unless both</span>
<span class="sd">    `min_id` **and** `max_id` are set (as *named* arguments), in</span>
<span class="sd">    which case the entire range will be returned.</span>

<span class="sd">    This is so because any integer limit would be rather arbitrary and</span>
<span class="sd">    it's common to only want to fetch one message, but if a range is</span>
<span class="sd">    specified it makes sense that it should return the entirety of it.</span>

<span class="sd">    If `ids` is present in the *named* arguments and is not a list,</span>
<span class="sd">    a single `Message &lt;telethon.tl.custom.message.Message&gt;` will be</span>
<span class="sd">    returned for convenience instead of a list.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Get 0 photos and print the total to show how many photos there are</span>
<span class="sd">            from telethon.tl.types import InputMessagesFilterPhotos</span>
<span class="sd">            photos = await client.get_messages(chat, 0, filter=InputMessagesFilterPhotos)</span>
<span class="sd">            print(photos.total)</span>

<span class="sd">            # Get all the photos</span>
<span class="sd">            photos = await client.get_messages(chat, None, filter=InputMessagesFilterPhotos)</span>

<span class="sd">            # Get messages by ID:</span>
<span class="sd">            message_1337 = await client.get_messages(chat, ids=1337)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="s1">'limit'</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="k">if</span> <span class="s1">'min_id'</span> <span class="ow">in</span> <span class="n">kwargs</span> <span class="ow">and</span> <span class="s1">'max_id'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">'limit'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">'limit'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">it</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">ids</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'ids'</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ids</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">ids</span><span class="p">):</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">it</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">message</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Iterator exhausted = empty, to handle InputMessageReplyTo</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="k">await</span> <span class="n">it</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.iter_messages">
<code class="highlight language-python">
iter_messages<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset_date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">add_offset</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_user</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">wait_time</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.iter_messages" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Iterator over the messages for the given chat.</p>
<p>The default order is from newest to oldest, but this
behaviour can be changed with the <code>reverse</code> parameter.</p>
<p>If either <code>search</code>, <code>filter</code> or <code>from_user</code> are provided,
:tl:<code>messages.Search</code> will be used instead of :tl:<code>messages.getHistory</code>.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Telegram</span><span class="err">'</span><span class="n">s</span> <span class="n">flood</span> <span class="n">wait</span> <span class="k">limit</span> <span class="k">for</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`GetHistoryRequest`</span> <span class="n">seems</span> <span class="k">to</span>
<span class="n">be</span> <span class="n">around</span> <span class="mi">30</span> <span class="n">seconds</span> <span class="n">per</span> <span class="mi">10</span> <span class="n">requests</span><span class="p">,</span> <span class="n">therefore</span> <span class="n">a</span> <span class="n">sleep</span> <span class="n">of</span> <span class="mi">1</span>
<span class="n">second</span> <span class="k">is</span> <span class="n">the</span> <span class="k">default</span> <span class="k">for</span> <span class="n">this</span> <span class="k">limit</span> <span class="p">(</span><span class="k">or</span> <span class="n">above</span><span class="p">).</span>
</code></pre>
</div>
<p>Arguments
    entity (<code>entity</code>):
        The entity from whom to retrieve the message history.</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">It</span> <span class="n">may</span> <span class="n">be</span> <span class="ss">`None`</span> <span class="k">to</span> <span class="n">perform</span> <span class="n">a</span> <span class="n">global</span> <span class="n">search</span><span class="p">,</span> <span class="k">or</span>
    <span class="k">to</span> <span class="n">get</span> <span class="n">messages</span> <span class="k">by</span> <span class="n">their</span> <span class="n">ID</span> <span class="k">from</span> <span class="n">no</span> <span class="n">particular</span> <span class="n">chat</span><span class="p">.</span>
    <span class="n">Note</span> <span class="n">that</span> <span class="n">some</span> <span class="n">of</span> <span class="n">the</span> <span class="n">offsets</span> <span class="n">will</span> <span class="k">not</span> <span class="n">work</span> <span class="k">if</span> <span class="n">this</span>
    <span class="k">is</span> <span class="n">the</span> <span class="k">case</span><span class="p">.</span>

    <span class="n">Note</span> <span class="n">that</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="n">perform</span> <span class="n">a</span> <span class="n">global</span> <span class="n">search</span><span class="p">,</span>
    <span class="n">you</span> <span class="o">**</span><span class="n">must</span><span class="o">**</span> <span class="kt">set</span> <span class="n">a</span> <span class="n">non</span><span class="o">-</span><span class="n">empty</span> <span class="ss">`search`</span> <span class="n">string</span><span class="p">,</span> <span class="n">a</span> <span class="ss">`filter`</span><span class="p">.</span>
    <span class="k">or</span> <span class="ss">`from_user`</span><span class="p">.</span>

<span class="k">limit</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">messages</span> <span class="k">to</span> <span class="n">be</span> <span class="n">retrieved</span><span class="p">.</span> <span class="n">Due</span> <span class="k">to</span> <span class="n">limitations</span> <span class="k">with</span>
    <span class="n">the</span> <span class="n">API</span> <span class="n">retrieving</span> <span class="n">more</span> <span class="n">than</span> <span class="mi">3000</span> <span class="n">messages</span> <span class="n">will</span> <span class="n">take</span> <span class="n">longer</span>
    <span class="n">than</span> <span class="n">half</span> <span class="n">a</span> <span class="nf">minute</span> <span class="p">(</span><span class="k">or</span> <span class="n">even</span> <span class="n">more</span> <span class="n">based</span> <span class="k">on</span> <span class="n">previous</span> <span class="n">calls</span><span class="p">).</span>

    <span class="n">The</span> <span class="k">limit</span> <span class="n">may</span> <span class="n">also</span> <span class="n">be</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">which</span> <span class="n">would</span> <span class="n">eventually</span> <span class="k">return</span>
    <span class="n">the</span> <span class="n">whole</span> <span class="n">history</span><span class="p">.</span>

<span class="nf">offset_date</span> <span class="p">(</span><span class="ss">`datetime`</span><span class="p">):</span>
    <span class="n">Offset</span> <span class="kt">date</span> <span class="p">(</span><span class="n">messages</span> <span class="o">*</span><span class="n">previous</span><span class="o">*</span> <span class="k">to</span> <span class="n">this</span> <span class="kt">date</span> <span class="n">will</span> <span class="n">be</span>
    <span class="n">retrieved</span><span class="p">).</span> <span class="n">Exclusive</span><span class="p">.</span>

<span class="nf">offset_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">Offset</span> <span class="n">message</span> <span class="nf">ID</span> <span class="p">(</span><span class="n">only</span> <span class="n">messages</span> <span class="o">*</span><span class="n">previous</span><span class="o">*</span> <span class="k">to</span> <span class="n">the</span> <span class="n">given</span>
    <span class="n">ID</span> <span class="n">will</span> <span class="n">be</span> <span class="n">retrieved</span><span class="p">).</span> <span class="n">Exclusive</span><span class="p">.</span>

<span class="nf">max_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="k">All</span> <span class="n">the</span> <span class="n">messages</span> <span class="k">with</span> <span class="n">a</span> <span class="nf">higher</span> <span class="p">(</span><span class="n">newer</span><span class="p">)</span> <span class="n">ID</span> <span class="k">or</span> <span class="n">equal</span> <span class="k">to</span> <span class="n">this</span> <span class="n">will</span>
    <span class="n">be</span> <span class="n">excluded</span><span class="p">.</span>

<span class="nf">min_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="k">All</span> <span class="n">the</span> <span class="n">messages</span> <span class="k">with</span> <span class="n">a</span> <span class="nf">lower</span> <span class="p">(</span><span class="n">older</span><span class="p">)</span> <span class="n">ID</span> <span class="k">or</span> <span class="n">equal</span> <span class="k">to</span> <span class="n">this</span> <span class="n">will</span>
    <span class="n">be</span> <span class="n">excluded</span><span class="p">.</span>

<span class="nf">add_offset</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">Additional</span> <span class="n">message</span> <span class="nf">offset</span> <span class="p">(</span><span class="k">all</span> <span class="n">of</span> <span class="n">the</span> <span class="n">specified</span> <span class="n">offsets</span> <span class="o">+</span>
    <span class="n">this</span> <span class="n">offset</span> <span class="o">=</span> <span class="n">older</span> <span class="n">messages</span><span class="p">).</span>

<span class="nf">search</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">string</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span> <span class="k">as</span> <span class="n">a</span> <span class="n">search</span> <span class="n">query</span><span class="p">.</span>

<span class="nf">filter</span> <span class="p">(:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`MessagesFilter`</span> <span class="o">|</span> <span class="ss">`type`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">filter</span> <span class="k">to</span> <span class="k">use</span> <span class="k">when</span> <span class="n">returning</span> <span class="n">messages</span><span class="p">.</span> <span class="k">For</span> <span class="n">instance</span><span class="p">,</span>
    <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`InputMessagesFilterPhotos`</span> <span class="n">would</span> <span class="n">yield</span> <span class="n">only</span> <span class="n">messages</span>
    <span class="n">containing</span> <span class="n">photos</span><span class="p">.</span>

<span class="nf">from_user</span> <span class="p">(</span><span class="ss">`entity`</span><span class="p">):</span>
    <span class="n">Only</span> <span class="n">messages</span> <span class="k">from</span> <span class="n">this</span> <span class="n">user</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">parameter</span> <span class="n">will</span> <span class="n">be</span> <span class="n">ignored</span> <span class="k">if</span> <span class="n">it</span> <span class="k">is</span> <span class="k">not</span> <span class="n">an</span> <span class="n">user</span><span class="p">.</span>

<span class="nf">wait_time</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">Wait</span> <span class="kt">time</span> <span class="p">(</span><span class="k">in</span> <span class="n">seconds</span><span class="p">)</span> <span class="k">between</span> <span class="n">different</span>
    <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`GetHistoryRequest`</span><span class="p">.</span> <span class="k">Use</span> <span class="n">this</span> <span class="n">parameter</span> <span class="k">to</span> <span class="n">avoid</span> <span class="n">hitting</span>
    <span class="n">the</span> <span class="ss">``</span><span class="n">FloodWaitError</span><span class="ss">``</span> <span class="k">as</span> <span class="n">needed</span><span class="p">.</span> <span class="k">If</span> <span class="k">left</span> <span class="k">to</span> <span class="ss">`None`</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span>
    <span class="k">default</span> <span class="k">to</span> <span class="mi">1</span> <span class="n">second</span> <span class="n">only</span> <span class="k">if</span> <span class="n">the</span> <span class="k">limit</span> <span class="k">is</span> <span class="n">higher</span> <span class="n">than</span> <span class="mi">3000</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="ss">``</span><span class="n">ids</span><span class="ss">``</span> <span class="n">parameter</span> <span class="k">is</span> <span class="n">used</span><span class="p">,</span> <span class="n">this</span> <span class="kt">time</span> <span class="n">will</span> <span class="k">default</span>
    <span class="k">to</span> <span class="mi">10</span> <span class="n">seconds</span> <span class="n">only</span> <span class="k">if</span> <span class="n">the</span> <span class="n">amount</span> <span class="n">of</span> <span class="n">IDs</span> <span class="k">is</span> <span class="n">higher</span> <span class="n">than</span> <span class="mi">300</span><span class="p">.</span>

<span class="nf">ids</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="ss">`list`</span><span class="p">):</span>
    <span class="n">A</span> <span class="n">single</span> <span class="kt">integer</span> <span class="nf">ID</span> <span class="p">(</span><span class="k">or</span> <span class="n">several</span> <span class="n">IDs</span><span class="p">)</span> <span class="k">for</span> <span class="n">the</span> <span class="n">message</span> <span class="n">that</span>
    <span class="n">should</span> <span class="n">be</span> <span class="n">returned</span><span class="p">.</span> <span class="n">This</span> <span class="n">parameter</span> <span class="n">takes</span> <span class="n">precedence</span> <span class="n">over</span>
    <span class="n">the</span> <span class="nf">rest</span> <span class="p">(</span><span class="n">which</span> <span class="n">will</span> <span class="n">be</span> <span class="n">ignored</span> <span class="k">if</span> <span class="n">this</span> <span class="k">is</span> <span class="kt">set</span><span class="p">).</span> <span class="n">This</span> <span class="n">can</span>
    <span class="k">for</span> <span class="n">instance</span> <span class="n">be</span> <span class="n">used</span> <span class="k">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">message</span> <span class="k">with</span> <span class="n">ID</span> <span class="mi">123</span> <span class="k">from</span>
    <span class="n">a</span> <span class="n">channel</span><span class="p">.</span> <span class="n">Note</span> <span class="n">that</span> <span class="k">if</span> <span class="n">the</span> <span class="n">message</span> <span class="n">doesn</span><span class="err">'</span><span class="n">t</span> <span class="n">exist</span><span class="p">,</span> <span class="ss">`None`</span>
    <span class="n">will</span> <span class="n">appear</span> <span class="k">in</span> <span class="n">its</span> <span class="n">place</span><span class="p">,</span> <span class="n">so</span> <span class="n">that</span> <span class="n">zipping</span> <span class="n">the</span> <span class="n">list</span> <span class="n">of</span> <span class="n">IDs</span>
    <span class="k">with</span> <span class="n">the</span> <span class="n">messages</span> <span class="n">can</span> <span class="k">match</span> <span class="n">one</span><span class="o">-</span><span class="k">to</span><span class="o">-</span><span class="n">one</span><span class="p">.</span>

    <span class="p">..</span> <span class="n">note</span><span class="p">::</span>

        <span class="n">At</span> <span class="n">the</span> <span class="kt">time</span> <span class="n">of</span> <span class="n">writing</span><span class="p">,</span> <span class="n">Telegram</span> <span class="n">will</span> <span class="o">**</span><span class="k">not</span><span class="o">**</span> <span class="k">return</span>
        <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`MessageEmpty`</span> <span class="k">for</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`InputMessageReplyTo`</span> <span class="n">IDs</span> <span class="n">that</span>
        <span class="nf">failed</span> <span class="p">(</span><span class="n">i</span><span class="p">.</span><span class="n">e</span><span class="p">.</span> <span class="n">the</span> <span class="n">message</span> <span class="k">is</span> <span class="k">not</span> <span class="n">replying</span> <span class="k">to</span> <span class="n">any</span><span class="p">,</span> <span class="k">or</span> <span class="k">is</span>
        <span class="n">replying</span> <span class="k">to</span> <span class="n">a</span> <span class="n">deleted</span> <span class="n">message</span><span class="p">).</span> <span class="n">This</span> <span class="n">means</span> <span class="n">that</span> <span class="n">it</span> <span class="k">is</span>
        <span class="o">**</span><span class="k">not</span><span class="o">**</span> <span class="n">possible</span> <span class="k">to</span> <span class="k">match</span> <span class="n">messages</span> <span class="n">one</span><span class="o">-</span><span class="k">by</span><span class="o">-</span><span class="n">one</span><span class="p">,</span> <span class="n">so</span> <span class="n">be</span>
        <span class="n">careful</span> <span class="k">if</span> <span class="n">you</span> <span class="k">use</span> <span class="n">non</span><span class="o">-</span><span class="n">integers</span> <span class="k">in</span> <span class="n">this</span> <span class="n">parameter</span><span class="p">.</span>

<span class="nf">reverse</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="kt">set</span> <span class="k">to</span> <span class="ss">`True`</span><span class="p">,</span> <span class="n">the</span> <span class="n">messages</span> <span class="n">will</span> <span class="n">be</span> <span class="n">returned</span> <span class="k">in</span> <span class="n">reverse</span>
    <span class="k">order</span> <span class="p">(</span><span class="k">from</span> <span class="n">oldest</span> <span class="k">to</span> <span class="n">newest</span><span class="p">,</span> <span class="n">instead</span> <span class="n">of</span> <span class="n">the</span> <span class="k">default</span> <span class="n">newest</span>
    <span class="k">to</span> <span class="n">oldest</span><span class="p">).</span> <span class="n">This</span> <span class="n">also</span> <span class="n">means</span> <span class="n">that</span> <span class="n">the</span> <span class="n">meaning</span> <span class="n">of</span> <span class="ss">`offset_id`</span>
    <span class="k">and</span> <span class="ss">`offset_date`</span> <span class="n">parameters</span> <span class="k">is</span> <span class="n">reversed</span><span class="p">,</span> <span class="n">although</span> <span class="n">they</span> <span class="n">will</span>
    <span class="n">still</span> <span class="n">be</span> <span class="n">exclusive</span><span class="p">.</span> <span class="ss">`min_id`</span> <span class="n">becomes</span> <span class="n">equivalent</span> <span class="k">to</span> <span class="ss">`offset_id`</span>
    <span class="n">instead</span> <span class="n">of</span> <span class="n">being</span> <span class="ss">`max_id`</span> <span class="k">as</span> <span class="n">well</span> <span class="n">since</span> <span class="n">messages</span> <span class="n">are</span> <span class="n">returned</span>
    <span class="k">in</span> <span class="n">ascending</span> <span class="k">order</span><span class="p">.</span>

    <span class="n">You</span> <span class="n">cannot</span> <span class="k">use</span> <span class="n">this</span> <span class="k">if</span> <span class="k">both</span> <span class="ss">`entity`</span> <span class="k">and</span> <span class="ss">`ids`</span> <span class="n">are</span> <span class="ss">`None`</span><span class="p">.</span>
</code></pre>
</div>
<p>Yields
    Instances of <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="c1"># From most-recent to oldest</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># From oldest to most-recent</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># Filter by sender</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">from_user</span><span class="o">=</span><span class="s1">'me'</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># Server-side search with fuzzy text</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">search</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

    <span class="c1"># Filter by message type:</span>
    <span class="kn">from</span> <span class="nn">telethon.tl.types</span> <span class="kn">import</span> <span class="n">InputMessagesFilterPhotos</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="n">InputMessagesFilterPhotos</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">photo</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">iter_messages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">limit</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">offset_date</span><span class="p">:</span> <span class="s1">'hints.DateLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">offset_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">max_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">min_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">add_offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">search</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="nb">filter</span><span class="p">:</span> <span class="s1">'typing.Union[types.TypeMessagesFilter, typing.Type[types.TypeMessagesFilter]]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">from_user</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">wait_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">ids</span><span class="p">:</span> <span class="s1">'typing.Union[int, typing.Sequence[int]]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'typing.Union[_MessagesIter, _IDsIter]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Iterator over the messages for the given chat.</span>

<span class="sd">    The default order is from newest to oldest, but this</span>
<span class="sd">    behaviour can be changed with the `reverse` parameter.</span>

<span class="sd">    If either `search`, `filter` or `from_user` are provided,</span>
<span class="sd">    :tl:`messages.Search` will be used instead of :tl:`messages.getHistory`.</span>

<span class="sd">    .. note::</span>

<span class="sd">        Telegram's flood wait limit for :tl:`GetHistoryRequest` seems to</span>
<span class="sd">        be around 30 seconds per 10 requests, therefore a sleep of 1</span>
<span class="sd">        second is the default for this limit (or above).</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The entity from whom to retrieve the message history.</span>

<span class="sd">            It may be `None` to perform a global search, or</span>
<span class="sd">            to get messages by their ID from no particular chat.</span>
<span class="sd">            Note that some of the offsets will not work if this</span>
<span class="sd">            is the case.</span>

<span class="sd">            Note that if you want to perform a global search,</span>
<span class="sd">            you **must** set a non-empty `search` string, a `filter`.</span>
<span class="sd">            or `from_user`.</span>

<span class="sd">        limit (`int` | `None`, optional):</span>
<span class="sd">            Number of messages to be retrieved. Due to limitations with</span>
<span class="sd">            the API retrieving more than 3000 messages will take longer</span>
<span class="sd">            than half a minute (or even more based on previous calls).</span>

<span class="sd">            The limit may also be `None`, which would eventually return</span>
<span class="sd">            the whole history.</span>

<span class="sd">        offset_date (`datetime`):</span>
<span class="sd">            Offset date (messages *previous* to this date will be</span>
<span class="sd">            retrieved). Exclusive.</span>

<span class="sd">        offset_id (`int`):</span>
<span class="sd">            Offset message ID (only messages *previous* to the given</span>
<span class="sd">            ID will be retrieved). Exclusive.</span>

<span class="sd">        max_id (`int`):</span>
<span class="sd">            All the messages with a higher (newer) ID or equal to this will</span>
<span class="sd">            be excluded.</span>

<span class="sd">        min_id (`int`):</span>
<span class="sd">            All the messages with a lower (older) ID or equal to this will</span>
<span class="sd">            be excluded.</span>

<span class="sd">        add_offset (`int`):</span>
<span class="sd">            Additional message offset (all of the specified offsets +</span>
<span class="sd">            this offset = older messages).</span>

<span class="sd">        search (`str`):</span>
<span class="sd">            The string to be used as a search query.</span>

<span class="sd">        filter (:tl:`MessagesFilter` | `type`):</span>
<span class="sd">            The filter to use when returning messages. For instance,</span>
<span class="sd">            :tl:`InputMessagesFilterPhotos` would yield only messages</span>
<span class="sd">            containing photos.</span>

<span class="sd">        from_user (`entity`):</span>
<span class="sd">            Only messages from this user will be returned.</span>
<span class="sd">            This parameter will be ignored if it is not an user.</span>

<span class="sd">        wait_time (`int`):</span>
<span class="sd">            Wait time (in seconds) between different</span>
<span class="sd">            :tl:`GetHistoryRequest`. Use this parameter to avoid hitting</span>
<span class="sd">            the ``FloodWaitError`` as needed. If left to `None`, it will</span>
<span class="sd">            default to 1 second only if the limit is higher than 3000.</span>

<span class="sd">            If the ``ids`` parameter is used, this time will default</span>
<span class="sd">            to 10 seconds only if the amount of IDs is higher than 300.</span>

<span class="sd">        ids (`int`, `list`):</span>
<span class="sd">            A single integer ID (or several IDs) for the message that</span>
<span class="sd">            should be returned. This parameter takes precedence over</span>
<span class="sd">            the rest (which will be ignored if this is set). This can</span>
<span class="sd">            for instance be used to get the message with ID 123 from</span>
<span class="sd">            a channel. Note that if the message doesn't exist, `None`</span>
<span class="sd">            will appear in its place, so that zipping the list of IDs</span>
<span class="sd">            with the messages can match one-to-one.</span>

<span class="sd">            .. note::</span>

<span class="sd">                At the time of writing, Telegram will **not** return</span>
<span class="sd">                :tl:`MessageEmpty` for :tl:`InputMessageReplyTo` IDs that</span>
<span class="sd">                failed (i.e. the message is not replying to any, or is</span>
<span class="sd">                replying to a deleted message). This means that it is</span>
<span class="sd">                **not** possible to match messages one-by-one, so be</span>
<span class="sd">                careful if you use non-integers in this parameter.</span>

<span class="sd">        reverse (`bool`, optional):</span>
<span class="sd">            If set to `True`, the messages will be returned in reverse</span>
<span class="sd">            order (from oldest to newest, instead of the default newest</span>
<span class="sd">            to oldest). This also means that the meaning of `offset_id`</span>
<span class="sd">            and `offset_date` parameters is reversed, although they will</span>
<span class="sd">            still be exclusive. `min_id` becomes equivalent to `offset_id`</span>
<span class="sd">            instead of being `max_id` as well since messages are returned</span>
<span class="sd">            in ascending order.</span>

<span class="sd">            You cannot use this if both `entity` and `ids` are `None`.</span>

<span class="sd">    Yields</span>
<span class="sd">        Instances of `Message &lt;telethon.tl.custom.message.Message&gt;`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # From most-recent to oldest</span>
<span class="sd">            async for message in client.iter_messages(chat):</span>
<span class="sd">                print(message.id, message.text)</span>

<span class="sd">            # From oldest to most-recent</span>
<span class="sd">            async for message in client.iter_messages(chat, reverse=True):</span>
<span class="sd">                print(message.id, message.text)</span>

<span class="sd">            # Filter by sender</span>
<span class="sd">            async for message in client.iter_messages(chat, from_user='me'):</span>
<span class="sd">                print(message.text)</span>

<span class="sd">            # Server-side search with fuzzy text</span>
<span class="sd">            async for message in client.iter_messages(chat, search='hello'):</span>
<span class="sd">                print(message.id)</span>

<span class="sd">            # Filter by message type:</span>
<span class="sd">            from telethon.tl.types import InputMessagesFilterPhotos</span>
<span class="sd">            async for message in client.iter_messages(chat, filter=InputMessagesFilterPhotos):</span>
<span class="sd">                print(message.photo)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">ids</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">ids</span><span class="p">):</span>
            <span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">ids</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">_IDsIter</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">,</span>
            <span class="n">wait_time</span><span class="o">=</span><span class="n">wait_time</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">),</span>
            <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">ids</span><span class="o">=</span><span class="n">ids</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">_MessagesIter</span><span class="p">(</span>
        <span class="n">client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
        <span class="n">reverse</span><span class="o">=</span><span class="n">reverse</span><span class="p">,</span>
        <span class="n">wait_time</span><span class="o">=</span><span class="n">wait_time</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
        <span class="n">entity</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
        <span class="n">offset_id</span><span class="o">=</span><span class="n">offset_id</span><span class="p">,</span>
        <span class="n">min_id</span><span class="o">=</span><span class="n">min_id</span><span class="p">,</span>
        <span class="n">max_id</span><span class="o">=</span><span class="n">max_id</span><span class="p">,</span>
        <span class="n">from_user</span><span class="o">=</span><span class="n">from_user</span><span class="p">,</span>
        <span class="n">offset_date</span><span class="o">=</span><span class="n">offset_date</span><span class="p">,</span>
        <span class="n">add_offset</span><span class="o">=</span><span class="n">add_offset</span><span class="p">,</span>
        <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
        <span class="n">search</span><span class="o">=</span><span class="n">search</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.pin_message">
<code class="highlight language-python">
pin_message<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.pin_message" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Pins or unpins a message in a chat.</p>
<p>The default behaviour is to <em>not</em> notify members, unlike the
official applications.</p>
<p>See also <code>Message.pin() &lt;telethon.tl.custom.message.Message.pin&gt;</code>.</p>
<p>Arguments
    entity (<code>entity</code>):
        The chat where the message should be pinned.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">message</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">message</span> <span class="k">or</span> <span class="n">the</span> <span class="n">message</span> <span class="n">ID</span> <span class="k">to</span> <span class="n">pin</span><span class="p">.</span> <span class="k">If</span> <span class="n">it</span><span class="err">'</span><span class="n">s</span>
    <span class="ss">`None`</span><span class="p">,</span> <span class="n">the</span> <span class="n">message</span> <span class="n">will</span> <span class="n">be</span> <span class="n">unpinned</span> <span class="n">instead</span><span class="p">.</span>

<span class="nf">notify</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">pin</span> <span class="n">should</span> <span class="n">notify</span> <span class="n">people</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Send and pin a message to annoy everyone</span>
<span class="err">    message = await client.send_message(chat, 'Pinotifying is fun!')</span>
<span class="err">    await client.pin_message(chat, message, notify=True)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251
1252
1253
1254
1255
1256
1257
1258
1259
1260
1261
1262
1263
1264
1265
1266</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">pin_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="s1">'typing.Optional[hints.MessageIDLike]'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">notify</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Pins or unpins a message in a chat.</span>

<span class="sd">    The default behaviour is to *not* notify members, unlike the</span>
<span class="sd">    official applications.</span>

<span class="sd">    See also `Message.pin() &lt;telethon.tl.custom.message.Message.pin&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The chat where the message should be pinned.</span>

<span class="sd">        message (`int` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="sd">            The message or the message ID to pin. If it's</span>
<span class="sd">            `None`, the message will be unpinned instead.</span>

<span class="sd">        notify (`bool`, optional):</span>
<span class="sd">            Whether the pin should notify people or not.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Send and pin a message to annoy everyone</span>
<span class="sd">            message = await client.send_message(chat, 'Pinotifying is fun!')</span>
<span class="sd">            await client.pin_message(chat, message, notify=True)</span>
<span class="sd">    """</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_message_id</span><span class="p">(</span><span class="n">message</span><span class="p">)</span> <span class="ow">or</span> <span class="mi">0</span>
    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">UpdatePinnedMessageRequest</span><span class="p">(</span>
        <span class="n">peer</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
        <span class="n">silent</span><span class="o">=</span><span class="ow">not</span> <span class="n">notify</span>
    <span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="c1"># Unpinning does not produce a service message, and technically</span>
    <span class="c1"># users can pass negative IDs which seem to behave as unpinning too.</span>
    <span class="k">if</span> <span class="n">message</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Pinning in User chats (just with yourself really) does not produce a service message</span>
    <span class="k">if</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Pinning a message that doesn't exist would RPC-error earlier</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_response_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.send_message">
<code class="highlight language-python">
send_message<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">reply_to</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="p">(),</span> <span class="n">link_preview</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">clear_draft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.send_message" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Sends a message to the specified user, chat or channel.</p>
<p>The default parse mode is the same as the official applications
(a custom flavour of markdown). <code>**bold**, `code` or __italic__</code>
are available. In addition you can send <code>[links](https://example.com)</code>
and <code>[mentions](@username)</code> (or using IDs like in the Bot API:
<code>[mention](tg://user?id=123456789)</code>) and <code>pre</code> blocks with three
backticks.</p>
<p>Sending a <code>/start</code> command with a parameter (like <code>?start=data</code>)
is also done through this method. Simply send <code>'/start data'</code> to
the bot.</p>
<p>See also <code>Message.respond() &lt;telethon.tl.custom.message.Message.respond&gt;</code>
and <code>Message.reply() &lt;telethon.tl.custom.message.Message.reply&gt;</code>.</p>
<p>Arguments
    entity (<code>entity</code>):
        To who will it be sent.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">message</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">message</span> <span class="k">to</span> <span class="n">be</span> <span class="n">sent</span><span class="p">,</span> <span class="k">or</span> <span class="n">another</span> <span class="n">message</span> <span class="n">object</span> <span class="k">to</span> <span class="n">resend</span><span class="p">.</span>

    <span class="n">The</span> <span class="n">maximum</span> <span class="n">length</span> <span class="k">for</span> <span class="n">a</span> <span class="n">message</span> <span class="k">is</span> <span class="mi">35</span><span class="p">,</span><span class="mi">000</span> <span class="n">bytes</span> <span class="k">or</span> <span class="mi">4</span><span class="p">,</span><span class="mi">096</span>
    <span class="n">characters</span><span class="p">.</span> <span class="n">Longer</span> <span class="n">messages</span> <span class="n">will</span> <span class="k">not</span> <span class="n">be</span> <span class="n">sliced</span> <span class="n">automatically</span><span class="p">,</span>
    <span class="k">and</span> <span class="n">you</span> <span class="n">should</span> <span class="n">slice</span> <span class="n">them</span> <span class="n">manually</span> <span class="k">if</span> <span class="n">the</span> <span class="kt">text</span> <span class="k">to</span> <span class="n">send</span> <span class="k">is</span>
    <span class="n">longer</span> <span class="n">than</span> <span class="n">said</span> <span class="n">length</span><span class="p">.</span>

<span class="nf">reply_to</span> <span class="p">(</span><span class="ss">`int`</span> <span class="o">|</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="k">to</span> <span class="n">reply</span> <span class="k">to</span> <span class="n">a</span> <span class="n">message</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span> <span class="k">If</span> <span class="n">an</span> <span class="kt">integer</span> <span class="k">is</span> <span class="n">provided</span><span class="p">,</span>
    <span class="n">it</span> <span class="n">should</span> <span class="n">be</span> <span class="n">the</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span> <span class="n">that</span> <span class="n">it</span> <span class="n">should</span> <span class="n">reply</span> <span class="k">to</span><span class="p">.</span>

<span class="nf">parse_mode</span> <span class="p">(</span><span class="ss">`object`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">See</span> <span class="n">the</span> <span class="ss">`TelegramClient.parse_mode</span>
<span class="ss">    &lt;telethon.client.messageparse.MessageParseMethods.parse_mode&gt;`</span>
    <span class="n">property</span> <span class="k">for</span> <span class="n">allowed</span> <span class="k">values</span><span class="p">.</span> <span class="n">Markdown</span> <span class="n">parsing</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="k">by</span>
    <span class="k">default</span><span class="p">.</span>

<span class="nf">link_preview</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Should</span> <span class="n">the</span> <span class="n">link</span> <span class="n">preview</span> <span class="n">be</span> <span class="n">shown</span><span class="o">?</span>

<span class="nf">file</span> <span class="p">(</span><span class="ss">`file`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Sends</span> <span class="n">a</span> <span class="n">message</span> <span class="k">with</span> <span class="n">a</span> <span class="n">file</span> <span class="nf">attached</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="n">a</span> <span class="n">photo</span><span class="p">,</span>
    <span class="n">video</span><span class="p">,</span> <span class="n">audio</span> <span class="k">or</span> <span class="n">document</span><span class="p">).</span> <span class="n">The</span> <span class="ss">``</span><span class="n">message</span><span class="ss">``</span> <span class="n">may</span> <span class="n">be</span> <span class="n">empty</span><span class="p">.</span>

<span class="nf">force_document</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="k">to</span> <span class="n">send</span> <span class="n">the</span> <span class="n">given</span> <span class="n">file</span> <span class="k">as</span> <span class="n">a</span> <span class="n">document</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">clear_draft</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">existing</span> <span class="n">draft</span> <span class="n">should</span> <span class="n">be</span> <span class="n">cleared</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span>

<span class="nf">buttons</span> <span class="p">(</span><span class="ss">`list`</span><span class="p">,</span> <span class="ss">`custom.Button &lt;telethon.tl.custom.button.Button&gt;`</span><span class="p">,</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`KeyboardButton`</span><span class="p">):</span>
    <span class="n">The</span> <span class="nf">matrix</span> <span class="p">(</span><span class="n">list</span> <span class="n">of</span> <span class="n">lists</span><span class="p">),</span> <span class="n">row</span> <span class="n">list</span> <span class="k">or</span> <span class="n">button</span> <span class="k">to</span> <span class="n">be</span> <span class="n">shown</span>
    <span class="n">after</span> <span class="n">sending</span> <span class="n">the</span> <span class="n">message</span><span class="p">.</span> <span class="n">This</span> <span class="n">parameter</span> <span class="n">will</span> <span class="n">only</span> <span class="n">work</span> <span class="k">if</span>
    <span class="n">you</span> <span class="n">have</span> <span class="n">signed</span> <span class="k">in</span> <span class="k">as</span> <span class="n">a</span> <span class="n">bot</span><span class="p">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">also</span> <span class="n">pass</span> <span class="n">your</span> <span class="n">own</span>
    <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`ReplyMarkup`</span> <span class="n">here</span><span class="p">.</span>

    <span class="k">All</span> <span class="n">the</span> <span class="n">following</span> <span class="n">limits</span> <span class="n">apply</span> <span class="n">together</span><span class="p">:</span>

    <span class="o">*</span> <span class="n">There</span> <span class="n">can</span> <span class="n">be</span> <span class="mi">100</span> <span class="n">buttons</span> <span class="n">at</span> <span class="nf">most</span> <span class="p">(</span><span class="n">any</span> <span class="n">more</span> <span class="n">are</span> <span class="n">ignored</span><span class="p">).</span>
    <span class="o">*</span> <span class="n">There</span> <span class="n">can</span> <span class="n">be</span> <span class="mi">8</span> <span class="n">buttons</span> <span class="n">per</span> <span class="n">row</span> <span class="n">at</span> <span class="nf">most</span> <span class="p">(</span><span class="n">more</span> <span class="n">are</span> <span class="n">ignored</span><span class="p">).</span>
    <span class="o">*</span> <span class="n">The</span> <span class="n">maximum</span> <span class="n">callback</span> <span class="n">data</span> <span class="n">per</span> <span class="n">button</span> <span class="k">is</span> <span class="mi">64</span> <span class="n">bytes</span><span class="p">.</span>
    <span class="o">*</span> <span class="n">The</span> <span class="n">maximum</span> <span class="n">data</span> <span class="n">that</span> <span class="n">can</span> <span class="n">be</span> <span class="n">embedded</span> <span class="k">in</span> <span class="n">total</span> <span class="k">is</span> <span class="n">just</span>
      <span class="n">over</span> <span class="mi">4</span><span class="n">KB</span><span class="p">,</span> <span class="n">shared</span> <span class="k">between</span> <span class="n">inline</span> <span class="n">callback</span> <span class="n">data</span> <span class="k">and</span> <span class="kt">text</span><span class="p">.</span>

<span class="nf">silent</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">message</span> <span class="n">should</span> <span class="n">notify</span> <span class="n">people</span> <span class="k">in</span> <span class="n">a</span> <span class="n">broadcast</span>
    <span class="n">channel</span> <span class="k">or</span> <span class="k">not</span><span class="p">.</span> <span class="n">Defaults</span> <span class="k">to</span> <span class="ss">`False`</span><span class="p">,</span> <span class="n">which</span> <span class="n">means</span> <span class="n">it</span> <span class="n">will</span>
    <span class="n">notify</span> <span class="n">them</span><span class="p">.</span> <span class="kt">Set</span> <span class="n">it</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">to</span> <span class="k">alter</span> <span class="n">this</span> <span class="n">behaviour</span><span class="p">.</span>

<span class="nf">schedule</span> <span class="p">(</span><span class="ss">`hints.DateLike`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">If</span> <span class="kt">set</span><span class="p">,</span> <span class="n">the</span> <span class="n">message</span> <span class="n">won</span><span class="err">'</span><span class="n">t</span> <span class="n">send</span> <span class="n">immediately</span><span class="p">,</span> <span class="k">and</span> <span class="n">instead</span>
    <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">scheduled</span> <span class="k">to</span> <span class="n">be</span> <span class="n">automatically</span> <span class="n">sent</span> <span class="n">at</span> <span class="n">a</span> <span class="n">later</span>
    <span class="kt">time</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The sent <code>custom.Message &lt;telethon.tl.custom.message.Message&gt;</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="c1"># Markdown is the default</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'Hello **world**!'</span><span class="p">)</span>

    <span class="c1"># Default to another parse mode</span>
    <span class="n">client</span><span class="o">.</span><span class="n">parse_mode</span> <span class="o">=</span> <span class="s1">'html'</span>

    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'Some &lt;b&gt;bold&lt;/b&gt; and &lt;i&gt;italic&lt;/i&gt; text'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'An &lt;a href="https://example.com"&gt;URL&lt;/a&gt;'</span><span class="p">)</span>
    <span class="c1"># code and pre tags also work, but those break the documentation :)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'&lt;a href="tg://user?id=me"&gt;Mentions&lt;/a&gt;'</span><span class="p">)</span>

    <span class="c1"># Explicit parse mode</span>
    <span class="c1"># No parse mode by default</span>
    <span class="n">client</span><span class="o">.</span><span class="n">parse_mode</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="c1"># ...but here I want markdown</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'Hello, **world**!'</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="s1">'md'</span><span class="p">)</span>

    <span class="c1"># ...and here I need HTML</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'Hello, &lt;i&gt;world&lt;/i&gt;!'</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="s1">'html'</span><span class="p">)</span>

    <span class="c1"># If you logged in as a bot account, you can send buttons</span>
    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span><span class="p">,</span> <span class="n">Button</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">CallbackQuery</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="s1">'Thank you for clicking {}!'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">data</span><span class="p">))</span>

    <span class="c1"># Single inline button</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'A single button, with "clk1" as data'</span><span class="p">,</span>
                              <span class="n">buttons</span><span class="o">=</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'Click me'</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'clk1'</span><span class="p">))</span>

    <span class="c1"># Matrix of inline buttons</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'Pick one from this grid'</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="p">[</span>
        <span class="p">[</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'Left'</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'Right'</span><span class="p">)],</span>
        <span class="p">[</span><span class="n">Button</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">'Check this site!'</span><span class="p">,</span> <span class="s1">'https://example.com'</span><span class="p">)]</span>
    <span class="p">])</span>

    <span class="c1"># Reply keyboard</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'Welcome'</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Button</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="s1">'Thanks!'</span><span class="p">,</span> <span class="n">resize</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">single_use</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
        <span class="n">Button</span><span class="o">.</span><span class="n">request_phone</span><span class="p">(</span><span class="s1">'Send phone'</span><span class="p">),</span>
        <span class="n">Button</span><span class="o">.</span><span class="n">request_location</span><span class="p">(</span><span class="s1">'Send location'</span><span class="p">)</span>
    <span class="p">])</span>

    <span class="c1"># Forcing replies or clearing buttons.</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'Reply to me'</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="n">Button</span><span class="o">.</span><span class="n">force_reply</span><span class="p">())</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'Bye Keyboard!'</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="n">Button</span><span class="o">.</span><span class="n">clear</span><span class="p">())</span>

    <span class="c1"># Scheduling a message to be sent after 5 minutes</span>
    <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'Hi, future!'</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">5</span><span class="p">))</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672
673
674
675
676
677
678
679
680
681
682
683
684
685
686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send_message</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="s1">'hints.MessageLike'</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">reply_to</span><span class="p">:</span> <span class="s1">'typing.Union[int, types.Message]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">parse_mode</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">link_preview</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'typing.Union[hints.FileLike, typing.Sequence[hints.FileLike]]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force_document</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">clear_draft</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">buttons</span><span class="p">:</span> <span class="s1">'hints.MarkupLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">silent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">schedule</span><span class="p">:</span> <span class="s1">'hints.DateLike'</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'types.Message'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Sends a message to the specified user, chat or channel.</span>

<span class="sd">    The default parse mode is the same as the official applications</span>
<span class="sd">    (a custom flavour of markdown). ``**bold**, `code` or __italic__``</span>
<span class="sd">    are available. In addition you can send ``[links](https://example.com)``</span>
<span class="sd">    and ``[mentions](@username)`` (or using IDs like in the Bot API:</span>
<span class="sd">    ``[mention](tg://user?id=123456789)``) and ``pre`` blocks with three</span>
<span class="sd">    backticks.</span>

<span class="sd">    Sending a ``/start`` command with a parameter (like ``?start=data``)</span>
<span class="sd">    is also done through this method. Simply send ``'/start data'`` to</span>
<span class="sd">    the bot.</span>

<span class="sd">    See also `Message.respond() &lt;telethon.tl.custom.message.Message.respond&gt;`</span>
<span class="sd">    and `Message.reply() &lt;telethon.tl.custom.message.Message.reply&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            To who will it be sent.</span>

<span class="sd">        message (`str` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="sd">            The message to be sent, or another message object to resend.</span>

<span class="sd">            The maximum length for a message is 35,000 bytes or 4,096</span>
<span class="sd">            characters. Longer messages will not be sliced automatically,</span>
<span class="sd">            and you should slice them manually if the text to send is</span>
<span class="sd">            longer than said length.</span>

<span class="sd">        reply_to (`int` | `Message &lt;telethon.tl.custom.message.Message&gt;`, optional):</span>
<span class="sd">            Whether to reply to a message or not. If an integer is provided,</span>
<span class="sd">            it should be the ID of the message that it should reply to.</span>

<span class="sd">        parse_mode (`object`, optional):</span>
<span class="sd">            See the `TelegramClient.parse_mode</span>
<span class="sd">            &lt;telethon.client.messageparse.MessageParseMethods.parse_mode&gt;`</span>
<span class="sd">            property for allowed values. Markdown parsing will be used by</span>
<span class="sd">            default.</span>

<span class="sd">        link_preview (`bool`, optional):</span>
<span class="sd">            Should the link preview be shown?</span>

<span class="sd">        file (`file`, optional):</span>
<span class="sd">            Sends a message with a file attached (e.g. a photo,</span>
<span class="sd">            video, audio or document). The ``message`` may be empty.</span>

<span class="sd">        force_document (`bool`, optional):</span>
<span class="sd">            Whether to send the given file as a document or not.</span>

<span class="sd">        clear_draft (`bool`, optional):</span>
<span class="sd">            Whether the existing draft should be cleared or not.</span>

<span class="sd">        buttons (`list`, `custom.Button &lt;telethon.tl.custom.button.Button&gt;`, :tl:`KeyboardButton`):</span>
<span class="sd">            The matrix (list of lists), row list or button to be shown</span>
<span class="sd">            after sending the message. This parameter will only work if</span>
<span class="sd">            you have signed in as a bot. You can also pass your own</span>
<span class="sd">            :tl:`ReplyMarkup` here.</span>

<span class="sd">            All the following limits apply together:</span>

<span class="sd">            * There can be 100 buttons at most (any more are ignored).</span>
<span class="sd">            * There can be 8 buttons per row at most (more are ignored).</span>
<span class="sd">            * The maximum callback data per button is 64 bytes.</span>
<span class="sd">            * The maximum data that can be embedded in total is just</span>
<span class="sd">              over 4KB, shared between inline callback data and text.</span>

<span class="sd">        silent (`bool`, optional):</span>
<span class="sd">            Whether the message should notify people in a broadcast</span>
<span class="sd">            channel or not. Defaults to `False`, which means it will</span>
<span class="sd">            notify them. Set it to `True` to alter this behaviour.</span>

<span class="sd">        schedule (`hints.DateLike`, optional):</span>
<span class="sd">            If set, the message won't send immediately, and instead</span>
<span class="sd">            it will be scheduled to be automatically sent at a later</span>
<span class="sd">            time.</span>

<span class="sd">    Returns</span>
<span class="sd">        The sent `custom.Message &lt;telethon.tl.custom.message.Message&gt;`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Markdown is the default</span>
<span class="sd">            await client.send_message('me', 'Hello **world**!')</span>

<span class="sd">            # Default to another parse mode</span>
<span class="sd">            client.parse_mode = 'html'</span>

<span class="sd">            await client.send_message('me', 'Some &lt;b&gt;bold&lt;/b&gt; and &lt;i&gt;italic&lt;/i&gt; text')</span>
<span class="sd">            await client.send_message('me', 'An &lt;a href="https://example.com"&gt;URL&lt;/a&gt;')</span>
<span class="sd">            # code and pre tags also work, but those break the documentation :)</span>
<span class="sd">            await client.send_message('me', '&lt;a href="tg://user?id=me"&gt;Mentions&lt;/a&gt;')</span>

<span class="sd">            # Explicit parse mode</span>
<span class="sd">            # No parse mode by default</span>
<span class="sd">            client.parse_mode = None</span>

<span class="sd">            # ...but here I want markdown</span>
<span class="sd">            await client.send_message('me', 'Hello, **world**!', parse_mode='md')</span>

<span class="sd">            # ...and here I need HTML</span>
<span class="sd">            await client.send_message('me', 'Hello, &lt;i&gt;world&lt;/i&gt;!', parse_mode='html')</span>

<span class="sd">            # If you logged in as a bot account, you can send buttons</span>
<span class="sd">            from telethon import events, Button</span>

<span class="sd">            @client.on(events.CallbackQuery)</span>
<span class="sd">            async def callback(event):</span>
<span class="sd">                await event.edit('Thank you for clicking {}!'.format(event.data))</span>

<span class="sd">            # Single inline button</span>
<span class="sd">            await client.send_message(chat, 'A single button, with "clk1" as data',</span>
<span class="sd">                                      buttons=Button.inline('Click me', b'clk1'))</span>

<span class="sd">            # Matrix of inline buttons</span>
<span class="sd">            await client.send_message(chat, 'Pick one from this grid', buttons=[</span>
<span class="sd">                [Button.inline('Left'), Button.inline('Right')],</span>
<span class="sd">                [Button.url('Check this site!', 'https://example.com')]</span>
<span class="sd">            ])</span>

<span class="sd">            # Reply keyboard</span>
<span class="sd">            await client.send_message(chat, 'Welcome', buttons=[</span>
<span class="sd">                Button.text('Thanks!', resize=True, single_use=True),</span>
<span class="sd">                Button.request_phone('Send phone'),</span>
<span class="sd">                Button.request_location('Send location')</span>
<span class="sd">            ])</span>

<span class="sd">            # Forcing replies or clearing buttons.</span>
<span class="sd">            await client.send_message(chat, 'Reply to me', buttons=Button.force_reply())</span>
<span class="sd">            await client.send_message(chat, 'Bye Keyboard!', buttons=Button.clear())</span>

<span class="sd">            # Scheduling a message to be sent after 5 minutes</span>
<span class="sd">            from datetime import timedelta</span>
<span class="sd">            await client.send_message(chat, 'Hi, future!', schedule=timedelta(minutes=5))</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_file</span><span class="p">(</span>
            <span class="n">entity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="n">message</span><span class="p">,</span> <span class="n">reply_to</span><span class="o">=</span><span class="n">reply_to</span><span class="p">,</span>
            <span class="n">parse_mode</span><span class="o">=</span><span class="n">parse_mode</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="n">force_document</span><span class="p">,</span>
            <span class="n">buttons</span><span class="o">=</span><span class="n">buttons</span><span class="p">,</span> <span class="n">clear_draft</span><span class="o">=</span><span class="n">clear_draft</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
            <span class="n">schedule</span><span class="o">=</span><span class="n">schedule</span>
        <span class="p">)</span>

    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">buttons</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">reply_markup</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">silent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">silent</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">silent</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">media</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
                <span class="n">message</span><span class="o">.</span><span class="n">media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageMediaWebPage</span><span class="p">)):</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_file</span><span class="p">(</span>
                <span class="n">entity</span><span class="p">,</span>
                <span class="n">message</span><span class="o">.</span><span class="n">media</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="n">message</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
                <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
                <span class="n">reply_to</span><span class="o">=</span><span class="n">reply_to</span><span class="p">,</span>
                <span class="n">buttons</span><span class="o">=</span><span class="n">markup</span><span class="p">,</span>
                <span class="n">entities</span><span class="o">=</span><span class="n">message</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span>
                <span class="n">schedule</span><span class="o">=</span><span class="n">schedule</span>
            <span class="p">)</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SendMessageRequest</span><span class="p">(</span>
            <span class="n">peer</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="o">.</span><span class="n">message</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">,</span>
            <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
            <span class="n">reply_to_msg_id</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">get_message_id</span><span class="p">(</span><span class="n">reply_to</span><span class="p">),</span>
            <span class="n">reply_markup</span><span class="o">=</span><span class="n">markup</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">message</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span>
            <span class="n">clear_draft</span><span class="o">=</span><span class="n">clear_draft</span><span class="p">,</span>
            <span class="n">no_webpage</span><span class="o">=</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
                <span class="n">message</span><span class="o">.</span><span class="n">media</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageMediaWebPage</span><span class="p">),</span>
            <span class="n">schedule_date</span><span class="o">=</span><span class="n">schedule</span>
        <span class="p">)</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">message</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">message</span><span class="p">,</span> <span class="n">msg_ent</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_message_text</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">parse_mode</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">message</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">'The message cannot be empty unless a file is provided'</span>
            <span class="p">)</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SendMessageRequest</span><span class="p">(</span>
            <span class="n">peer</span><span class="o">=</span><span class="n">entity</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">msg_ent</span><span class="p">,</span>
            <span class="n">no_webpage</span><span class="o">=</span><span class="ow">not</span> <span class="n">link_preview</span><span class="p">,</span>
            <span class="n">reply_to_msg_id</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">get_message_id</span><span class="p">(</span><span class="n">reply_to</span><span class="p">),</span>
            <span class="n">clear_draft</span><span class="o">=</span><span class="n">clear_draft</span><span class="p">,</span>
            <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
            <span class="n">reply_markup</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">(</span><span class="n">buttons</span><span class="p">),</span>
            <span class="n">schedule_date</span><span class="o">=</span><span class="n">schedule</span>
        <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateShortSentMessage</span><span class="p">):</span>
        <span class="n">message</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">to_id</span><span class="o">=</span><span class="n">utils</span><span class="o">.</span><span class="n">get_peer</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">date</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="n">out</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
            <span class="n">media</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">media</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">result</span><span class="o">.</span><span class="n">entities</span><span class="p">,</span>
            <span class="n">reply_markup</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">reply_markup</span>
        <span class="p">)</span>
        <span class="n">message</span><span class="o">.</span><span class="n">_finish_init</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="p">{},</span> <span class="n">entity</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">message</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_response_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.messages.MessageMethods.send_read_acknowledge">
<code class="highlight language-python">
send_read_acknowledge<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">clear_mentions</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.messages.MessageMethods.send_read_acknowledge" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Marks messages as read and optionally clears mentions.</p>
<p>This effectively marks a message as read (or more than one) in the
given conversation.</p>
<p>If neither message nor maximum ID are provided, all messages will be
marked as read by assuming that <code>max_id = 0</code>.</p>
<p>If a message or maximum ID is provided, all the messages up to and
including such ID will be marked as read (for all messages whose ID
≤ max_id).</p>
<p>See also <code>Message.mark_read() &lt;telethon.tl.custom.message.Message.mark_read&gt;</code>.</p>
<p>Arguments
    entity (<code>entity</code>):
        The chat where these messages are located.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">message</span> <span class="p">(</span><span class="ss">`list`</span> <span class="o">|</span> <span class="ss">`Message &lt;telethon.tl.custom.message.Message&gt;`</span><span class="p">):</span>
    <span class="n">Either</span> <span class="n">a</span> <span class="n">list</span> <span class="n">of</span> <span class="n">messages</span> <span class="k">or</span> <span class="n">a</span> <span class="n">single</span> <span class="n">message</span><span class="p">.</span>

<span class="nf">max_id</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">):</span>
    <span class="n">Until</span> <span class="n">which</span> <span class="n">message</span> <span class="n">should</span> <span class="n">the</span> <span class="k">read</span> <span class="n">acknowledge</span> <span class="n">be</span> <span class="n">sent</span> <span class="k">for</span><span class="p">.</span>
    <span class="n">This</span> <span class="n">has</span> <span class="n">priority</span> <span class="n">over</span> <span class="n">the</span> <span class="ss">``</span><span class="n">message</span><span class="ss">``</span> <span class="n">parameter</span><span class="p">.</span>

<span class="nf">clear_mentions</span> <span class="p">(</span><span class="ss">`bool`</span><span class="p">):</span>
    <span class="n">Whether</span> <span class="n">the</span> <span class="n">mention</span> <span class="n">badge</span> <span class="n">should</span> <span class="n">be</span> <span class="nf">cleared</span> <span class="p">(</span><span class="n">so</span> <span class="n">that</span>
    <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">more</span> <span class="n">mentions</span><span class="p">)</span> <span class="k">or</span> <span class="k">not</span> <span class="k">for</span> <span class="n">the</span> <span class="n">given</span> <span class="n">entity</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">no</span> <span class="n">message</span> <span class="k">is</span> <span class="n">provided</span><span class="p">,</span> <span class="n">this</span> <span class="n">will</span> <span class="n">be</span> <span class="n">the</span> <span class="n">only</span> <span class="n">action</span>
    <span class="n">taken</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # using a Message object</span>
<span class="err">    await client.send_read_acknowledge(chat, message)</span>
<span class="err">    # ...or using the int ID of a Message</span>
<span class="err">    await client.send_read_acknowledge(chat, message_id)</span>
<span class="err">    # ...or passing a list of messages to mark as read</span>
<span class="err">    await client.send_read_acknowledge(chat, messages)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\messages.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>1139
1140
1141
1142
1143
1144
1145
1146
1147
1148
1149
1150
1151
1152
1153
1154
1155
1156
1157
1158
1159
1160
1161
1162
1163
1164
1165
1166
1167
1168
1169
1170
1171
1172
1173
1174
1175
1176
1177
1178
1179
1180
1181
1182
1183
1184
1185
1186
1187
1188
1189
1190
1191
1192
1193
1194
1195
1196
1197
1198
1199
1200
1201
1202
1203
1204
1205
1206
1207
1208
1209
1210
1211
1212</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send_read_acknowledge</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">message</span><span class="p">:</span> <span class="s1">'typing.Union[hints.MessageIDLike, typing.Sequence[hints.MessageIDLike]]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">max_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">clear_mentions</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Marks messages as read and optionally clears mentions.</span>

<span class="sd">    This effectively marks a message as read (or more than one) in the</span>
<span class="sd">    given conversation.</span>

<span class="sd">    If neither message nor maximum ID are provided, all messages will be</span>
<span class="sd">    marked as read by assuming that ``max_id = 0``.</span>

<span class="sd">    If a message or maximum ID is provided, all the messages up to and</span>
<span class="sd">    including such ID will be marked as read (for all messages whose ID</span>
<span class="sd">    ≤ max_id).</span>

<span class="sd">    See also `Message.mark_read() &lt;telethon.tl.custom.message.Message.mark_read&gt;`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            The chat where these messages are located.</span>

<span class="sd">        message (`list` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="sd">            Either a list of messages or a single message.</span>

<span class="sd">        max_id (`int`):</span>
<span class="sd">            Until which message should the read acknowledge be sent for.</span>
<span class="sd">            This has priority over the ``message`` parameter.</span>

<span class="sd">        clear_mentions (`bool`):</span>
<span class="sd">            Whether the mention badge should be cleared (so that</span>
<span class="sd">            there are no more mentions) or not for the given entity.</span>

<span class="sd">            If no message is provided, this will be the only action</span>
<span class="sd">            taken.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # using a Message object</span>
<span class="sd">            await client.send_read_acknowledge(chat, message)</span>
<span class="sd">            # ...or using the int ID of a Message</span>
<span class="sd">            await client.send_read_acknowledge(chat, message_id)</span>
<span class="sd">            # ...or passing a list of messages to mark as read</span>
<span class="sd">            await client.send_read_acknowledge(chat, messages)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">max_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">message</span><span class="p">:</span>
            <span class="n">max_id</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
                <span class="n">max_id</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">message</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">max_id</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">id</span>

    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clear_mentions</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">ReadMentionsRequest</span><span class="p">(</span><span class="n">entity</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">max_id</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="n">max_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span> <span class="o">==</span> <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">ReadHistoryRequest</span><span class="p">(</span>
                <span class="n">utils</span><span class="o">.</span><span class="n">get_input_channel</span><span class="p">(</span><span class="n">entity</span><span class="p">),</span> <span class="n">max_id</span><span class="o">=</span><span class="n">max_id</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">ReadHistoryRequest</span><span class="p">(</span>
                <span class="n">entity</span><span class="p">,</span> <span class="n">max_id</span><span class="o">=</span><span class="n">max_id</span><span class="p">))</span>

    <span class="k">return</span> <span class="kc">False</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.updates" id="telethon.client.updates" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.updates" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.updates.EventBuilderDict">
<code>EventBuilderDict</code>
<a class="headerlink" href="#telethon.client.updates.EventBuilderDict" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Helper "dictionary" to return events from types and cache them.</p>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.updates.UpdateMethods">
<code>UpdateMethods</code>
<a class="headerlink" href="#telethon.client.updates.UpdateMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.updates.UpdateMethods.add_event_handler">
<code class="highlight language-python">
add_event_handler<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.updates.UpdateMethods.add_event_handler" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Registers a new event handler callback.</p>
<p>The callback will be called when the specified event occurs.</p>
<p>Arguments
    callback (<code>callable</code>):
        The callable function accepting one parameter to be used.</p>
<div class="codehilite">
<pre><span></span><code>    <span class="n">Note</span> <span class="n">that</span> <span class="k">if</span> <span class="n">you</span> <span class="n">have</span> <span class="n">used</span> <span class="ss">`telethon.events.register`</span> <span class="k">in</span>
    <span class="n">the</span> <span class="n">callback</span><span class="p">,</span> <span class="ss">``</span><span class="n">event</span><span class="ss">``</span> <span class="n">will</span> <span class="n">be</span> <span class="n">ignored</span><span class="p">,</span> <span class="k">and</span> <span class="n">instead</span> <span class="n">the</span>
    <span class="n">events</span> <span class="n">you</span> <span class="n">previously</span> <span class="n">registered</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span>

<span class="nf">event</span> <span class="p">(</span><span class="ss">`_EventBuilder`</span> <span class="o">|</span> <span class="ss">`type`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">event</span> <span class="n">builder</span> <span class="n">class</span> <span class="k">or</span> <span class="n">instance</span> <span class="k">to</span> <span class="n">be</span> <span class="n">used</span><span class="p">,</span>
    <span class="k">for</span> <span class="n">instance</span> <span class="ss">``</span><span class="n">events</span><span class="p">.</span><span class="n">NewMessage</span><span class="ss">``</span><span class="p">.</span>

    <span class="k">If</span> <span class="k">left</span> <span class="n">unspecified</span><span class="p">,</span> <span class="ss">`telethon.events.raw.Raw`</span> <span class="p">(</span><span class="n">the</span>
    <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`Update`</span> <span class="n">objects</span> <span class="k">with</span> <span class="n">no</span> <span class="n">further</span> <span class="n">processing</span><span class="p">)</span> <span class="n">will</span>
    <span class="n">be</span> <span class="n">passed</span> <span class="n">instead</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span><span class="p">,</span> <span class="n">events</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="n">client</span><span class="o">.</span><span class="n">add_event_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\updates.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">add_event_handler</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">callable</span><span class="p">,</span>
        <span class="n">event</span><span class="p">:</span> <span class="n">EventBuilder</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Registers a new event handler callback.</span>

<span class="sd">    The callback will be called when the specified event occurs.</span>

<span class="sd">    Arguments</span>
<span class="sd">        callback (`callable`):</span>
<span class="sd">            The callable function accepting one parameter to be used.</span>

<span class="sd">            Note that if you have used `telethon.events.register` in</span>
<span class="sd">            the callback, ``event`` will be ignored, and instead the</span>
<span class="sd">            events you previously registered will be used.</span>

<span class="sd">        event (`_EventBuilder` | `type`, optional):</span>
<span class="sd">            The event builder class or instance to be used,</span>
<span class="sd">            for instance ``events.NewMessage``.</span>

<span class="sd">            If left unspecified, `telethon.events.raw.Raw` (the</span>
<span class="sd">            :tl:`Update` objects with no further processing) will</span>
<span class="sd">            be passed instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            from telethon import TelegramClient, events</span>
<span class="sd">            client = TelegramClient(...)</span>

<span class="sd">            async def handler(event):</span>
<span class="sd">                ...</span>

<span class="sd">            client.add_event_handler(handler, events.NewMessage)</span>
<span class="sd">    """</span>
    <span class="n">builders</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">_get_handlers</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">builders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">builders</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_event_builders</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="n">callback</span><span class="p">))</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">event</span><span class="p">()</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">event</span><span class="p">:</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="n">Raw</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_event_builders</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="n">callback</span><span class="p">))</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.updates.UpdateMethods.catch_up">
<code class="highlight language-python">
catch_up<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.updates.UpdateMethods.catch_up" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>"Catches up" on the missed updates while the client was offline.
You should call this method after registering the event handlers
so that the updates it loads can by processed by your script.</p>
<p>This can also be used to forcibly fetch new updates if there are any.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    await client.catch_up()</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\updates.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">catch_up</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    "Catches up" on the missed updates while the client was offline.</span>
<span class="sd">    You should call this method after registering the event handlers</span>
<span class="sd">    so that the updates it loads can by processed by your script.</span>

<span class="sd">    This can also be used to forcibly fetch new updates if there are any.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            await client.catch_up()</span>
<span class="sd">    """</span>
    <span class="n">pts</span><span class="p">,</span> <span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state_cache</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">pts</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">catching_up</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">updates</span><span class="o">.</span><span class="n">GetDifferenceRequest</span><span class="p">(</span>
                <span class="n">pts</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="mi">0</span>
            <span class="p">))</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">updates</span><span class="o">.</span><span class="n">DifferenceSlice</span><span class="p">,</span>
                              <span class="n">types</span><span class="o">.</span><span class="n">updates</span><span class="o">.</span><span class="n">Difference</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">updates</span><span class="o">.</span><span class="n">Difference</span><span class="p">):</span>
                    <span class="n">state</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">state</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">state</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">intermediate_state</span>

                <span class="n">pts</span><span class="p">,</span> <span class="n">date</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="n">pts</span><span class="p">,</span> <span class="n">state</span><span class="o">.</span><span class="n">date</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_handle_update</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Updates</span><span class="p">(</span>
                    <span class="n">users</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">users</span><span class="p">,</span>
                    <span class="n">chats</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">chats</span><span class="p">,</span>
                    <span class="n">date</span><span class="o">=</span><span class="n">state</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
                    <span class="n">seq</span><span class="o">=</span><span class="n">state</span><span class="o">.</span><span class="n">seq</span><span class="p">,</span>
                    <span class="n">updates</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">other_updates</span> <span class="o">+</span> <span class="p">[</span>
                        <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">new_messages</span>
                    <span class="p">]</span>
                <span class="p">))</span>

                <span class="c1"># TODO Implement upper limit (max_pts)</span>
                <span class="c1"># We don't want to fetch updates we already know about.</span>
                <span class="c1">#</span>
                <span class="c1"># We may still get duplicates because the Difference</span>
                <span class="c1"># contains a lot of updates and presumably only has</span>
                <span class="c1"># the state for the last one, but at least we don't</span>
                <span class="c1"># unnecessarily fetch too many.</span>
                <span class="c1">#</span>
                <span class="c1"># updates.getDifference's pts_total_limit seems to mean</span>
                <span class="c1"># "how many pts is the request allowed to return", and</span>
                <span class="c1"># if there is more than that, it returns "too long" (so</span>
                <span class="c1"># there would be duplicate updates since we know about</span>
                <span class="c1"># some). This can be used to detect collisions (i.e.</span>
                <span class="c1"># it would return an update we have already seen).</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">updates</span><span class="o">.</span><span class="n">DifferenceEmpty</span><span class="p">):</span>
                    <span class="n">date</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">date</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">updates</span><span class="o">.</span><span class="n">DifferenceTooLong</span><span class="p">):</span>
                    <span class="n">pts</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pts</span>
                <span class="k">break</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">ConnectionError</span><span class="p">,</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># TODO Save new pts to session</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state_cache</span><span class="o">.</span><span class="n">_pts_date</span> <span class="o">=</span> <span class="p">(</span><span class="n">pts</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">catching_up</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.updates.UpdateMethods.list_event_handlers">
<code class="highlight language-python">
list_event_handlers<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.updates.UpdateMethods.list_event_handlers" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Lists all registered event handlers.</p>
<p>Returns
    A list of pairs consisting of <code>(callback, event)</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="w">    </span><span class="nv">@client</span><span class="p">.</span><span class="k">on</span><span class="p">(</span><span class="n">events</span><span class="p">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s1">'hello'</span><span class="p">))</span><span class="w"></span>
<span class="w">    </span><span class="n">async</span><span class="w"> </span><span class="n">def</span><span class="w"> </span><span class="n">on_greeting</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">        </span><span class="s1">'''Greets someone'''</span><span class="w"></span>
<span class="w">        </span><span class="n">await</span><span class="w"> </span><span class="n">event</span><span class="p">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">'Hi'</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">callback</span><span class="p">,</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="n">list_event_handlers</span><span class="p">()</span><span class="err">:</span><span class="w"></span>
<span class="w">        </span><span class="k">print</span><span class="p">(</span><span class="n">id</span><span class="p">(</span><span class="n">callback</span><span class="p">),</span><span class="w"> </span><span class="n">type</span><span class="p">(</span><span class="n">event</span><span class="p">))</span><span class="w"></span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\updates.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">list_event_handlers</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">)</span>\
        <span class="o">-&gt;</span> <span class="s1">'typing.Sequence[typing.Tuple[callable, EventBuilder]]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Lists all registered event handlers.</span>

<span class="sd">    Returns</span>
<span class="sd">        A list of pairs consisting of ``(callback, event)``.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            @client.on(events.NewMessage(pattern='hello'))</span>
<span class="sd">            async def on_greeting(event):</span>
<span class="sd">                '''Greets someone'''</span>
<span class="sd">                await event.reply('Hi')</span>

<span class="sd">            for callback, event in client.list_event_handlers():</span>
<span class="sd">                print(id(callback), type(event))</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="p">[(</span><span class="n">callback</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> <span class="k">for</span> <span class="n">event</span><span class="p">,</span> <span class="n">callback</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_builders</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.updates.UpdateMethods.on">
<code class="highlight language-python">
on<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.updates.UpdateMethods.on" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Decorator used to <code>add_event_handler</code> more conveniently.</p>
<p>Arguments
    event (<code>_EventBuilder</code> | <code>type</code>):
        The event builder class or instance to be used,
        for instance <code>events.NewMessage</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span><span class="p">,</span> <span class="n">events</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1"># Here we use client.on</span>
    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="o">...</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\updates.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">on</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">EventBuilder</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Decorator used to `add_event_handler` more conveniently.</span>


<span class="sd">    Arguments</span>
<span class="sd">        event (`_EventBuilder` | `type`):</span>
<span class="sd">            The event builder class or instance to be used,</span>
<span class="sd">            for instance ``events.NewMessage``.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            from telethon import TelegramClient, events</span>
<span class="sd">            client = TelegramClient(...)</span>

<span class="sd">            # Here we use client.on</span>
<span class="sd">            @client.on(events.NewMessage)</span>
<span class="sd">            async def handler(event):</span>
<span class="sd">                ...</span>
<span class="sd">    """</span>
    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_event_handler</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.updates.UpdateMethods.remove_event_handler">
<code class="highlight language-python">
remove_event_handler<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.updates.UpdateMethods.remove_event_handler" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Inverse operation of <code>add_event_handler()</code>.</p>
<p>If no event is given, all events for this callback are removed.
Returns how many callbacks were removed.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="w">    </span><span class="nv">@client</span><span class="p">.</span><span class="k">on</span><span class="p">(</span><span class="n">events</span><span class="p">.</span><span class="n">Raw</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nv">@client</span><span class="p">.</span><span class="k">on</span><span class="p">(</span><span class="n">events</span><span class="p">.</span><span class="n">NewMessage</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">async</span><span class="w"> </span><span class="n">def</span><span class="w"> </span><span class="n">handler</span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">        </span><span class="p">...</span><span class="w"></span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="n">Removes</span><span class="w"> </span><span class="k">only</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="ss">"Raw"</span><span class="w"> </span><span class="n">handling</span><span class="w"></span>
<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="ss">"handler"</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">still</span><span class="w"> </span><span class="n">receive</span><span class="w"> </span><span class="ss">"events.NewMessage"</span><span class="w"></span>
<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">remove_event_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span><span class="w"> </span><span class="n">events</span><span class="p">.</span><span class="n">Raw</span><span class="p">)</span><span class="w"></span>

<span class="w">    </span><span class="err">#</span><span class="w"> </span><span class="ss">"handler"</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">receiving</span><span class="w"> </span><span class="n">anything</span><span class="w"></span>
<span class="w">    </span><span class="n">client</span><span class="p">.</span><span class="n">remove_event_handler</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span><span class="w"></span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\updates.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">remove_event_handler</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">callback</span><span class="p">:</span> <span class="n">callable</span><span class="p">,</span>
        <span class="n">event</span><span class="p">:</span> <span class="n">EventBuilder</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Inverse operation of `add_event_handler()`.</span>

<span class="sd">    If no event is given, all events for this callback are removed.</span>
<span class="sd">    Returns how many callbacks were removed.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            @client.on(events.Raw)</span>
<span class="sd">            @client.on(events.NewMessage)</span>
<span class="sd">            async def handler(event):</span>
<span class="sd">                ...</span>

<span class="sd">            # Removes only the "Raw" handling</span>
<span class="sd">            # "handler" will still receive "events.NewMessage"</span>
<span class="sd">            client.remove_event_handler(handler, events.Raw)</span>

<span class="sd">            # "handler" will stop receiving anything</span>
<span class="sd">            client.remove_event_handler(handler)</span>
<span class="sd">    """</span>
    <span class="n">found</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">event</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_event_builders</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">i</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">ev</span><span class="p">,</span> <span class="n">cb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_builders</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">cb</span> <span class="o">==</span> <span class="n">callback</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">event</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">event</span><span class="p">)):</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_event_builders</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">found</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">found</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.updates.UpdateMethods.run_until_disconnected">
<code class="highlight language-python">
run_until_disconnected<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.updates.UpdateMethods.run_until_disconnected" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Runs the event loop until the library is disconnected.</p>
<p>It also notifies Telegram that we want to receive updates
as described in <a href="https://core.telegram.org/api/updates">https://core.telegram.org/api/updates</a>.</p>
<p>Manual disconnections can be made by calling <code>disconnect()
&lt;telethon.client.telegrambaseclient.TelegramBaseClient.disconnect&gt;</code>
or sending a <code>KeyboardInterrupt</code> (e.g. by pressing <code>Ctrl+C</code> on
the console window running the script).</p>
<p>If a disconnection error occurs (i.e. the library fails to reconnect
automatically), said error will be raised through here, so you have a
chance to <code>except</code> it on your own code.</p>
<p>If the loop is already running, this method returns a coroutine
that you should await on your own code.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="k">If</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="n">handle</span> <span class="ss">``</span><span class="n">KeyboardInterrupt</span><span class="ss">``</span> <span class="k">in</span> <span class="n">your</span> <span class="n">code</span><span class="p">,</span>
<span class="n">simply</span> <span class="n">run</span> <span class="n">the</span> <span class="n">event</span> <span class="k">loop</span> <span class="k">in</span> <span class="n">your</span> <span class="n">code</span> <span class="n">too</span> <span class="k">in</span> <span class="n">any</span> <span class="n">way</span><span class="p">,</span> <span class="n">such</span> <span class="k">as</span>
<span class="ss">``</span><span class="k">loop</span><span class="p">.</span><span class="nf">run_forever</span><span class="p">()</span><span class="ss">``</span> <span class="k">or</span> <span class="ss">``</span><span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">disconnected</span><span class="ss">``</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span>
<span class="ss">``</span><span class="k">loop</span><span class="p">.</span><span class="nf">run_until_complete</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="n">disconnected</span><span class="p">)</span><span class="ss">``</span><span class="p">).</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    # Blocks the current task here until a disconnection occurs.</span>
<span class="err">    #</span>
<span class="err">    # You will still receive updates, since this prevents the</span>
<span class="err">    # script from exiting.</span>
<span class="err">    await client.run_until_disconnected()</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\updates.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">run_until_disconnected</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Runs the event loop until the library is disconnected.</span>

<span class="sd">    It also notifies Telegram that we want to receive updates</span>
<span class="sd">    as described in https://core.telegram.org/api/updates.</span>

<span class="sd">    Manual disconnections can be made by calling `disconnect()</span>
<span class="sd">    &lt;telethon.client.telegrambaseclient.TelegramBaseClient.disconnect&gt;`</span>
<span class="sd">    or sending a ``KeyboardInterrupt`` (e.g. by pressing ``Ctrl+C`` on</span>
<span class="sd">    the console window running the script).</span>

<span class="sd">    If a disconnection error occurs (i.e. the library fails to reconnect</span>
<span class="sd">    automatically), said error will be raised through here, so you have a</span>
<span class="sd">    chance to ``except`` it on your own code.</span>

<span class="sd">    If the loop is already running, this method returns a coroutine</span>
<span class="sd">    that you should await on your own code.</span>

<span class="sd">    .. note::</span>

<span class="sd">        If you want to handle ``KeyboardInterrupt`` in your code,</span>
<span class="sd">        simply run the event loop in your code too in any way, such as</span>
<span class="sd">        ``loop.run_forever()`` or ``await client.disconnected`` (e.g.</span>
<span class="sd">        ``loop.run_until_complete(client.disconnected)``).</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Blocks the current task here until a disconnection occurs.</span>
<span class="sd">            #</span>
<span class="sd">            # You will still receive updates, since this prevents the</span>
<span class="sd">            # script from exiting.</span>
<span class="sd">            await client.run_until_disconnected()</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">is_running</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_run_until_disconnected</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_run_until_disconnected</span><span class="p">())</span>
    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="c1"># No loop.run_until_complete; it's already syncified</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.uploads" id="telethon.client.uploads" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.uploads" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.uploads.UploadMethods">
<code>UploadMethods</code>
<a class="headerlink" href="#telethon.client.uploads.UploadMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.uploads.UploadMethods.send_file">
<code class="highlight language-python">
send_file<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">clear_draft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">reply_to</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">allow_cache</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">parse_mode</span><span class="o">=</span><span class="p">(),</span> <span class="n">voice_note</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">video_note</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">supports_streaming</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.uploads.UploadMethods.send_file" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Sends message with the given file to the specified entity.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="k">If</span> <span class="n">the</span> <span class="ss">``</span><span class="n">hachoir3</span><span class="ss">``</span> <span class="nf">package</span> <span class="p">(</span><span class="ss">``</span><span class="n">hachoir</span><span class="ss">``</span> <span class="n">module</span><span class="p">)</span> <span class="k">is</span> <span class="n">installed</span><span class="p">,</span>
<span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="k">to</span> <span class="n">determine</span> <span class="n">metadata</span> <span class="k">from</span> <span class="n">audio</span> <span class="k">and</span> <span class="n">video</span> <span class="n">files</span><span class="p">.</span>

<span class="k">If</span> <span class="n">the</span> <span class="ss">``</span><span class="n">pillow</span><span class="ss">``</span> <span class="n">package</span> <span class="k">is</span> <span class="n">installed</span> <span class="k">and</span> <span class="n">you</span> <span class="n">are</span> <span class="n">sending</span> <span class="n">a</span> <span class="n">photo</span><span class="p">,</span>
<span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">resized</span> <span class="k">to</span> <span class="n">fit</span> <span class="n">within</span> <span class="n">the</span> <span class="n">maximum</span> <span class="n">dimensions</span> <span class="n">allowed</span>
<span class="k">by</span> <span class="n">Telegram</span> <span class="k">to</span> <span class="n">avoid</span> <span class="ss">``</span><span class="n">errors</span><span class="p">.</span><span class="n">PhotoInvalidDimensionsError</span><span class="ss">``</span><span class="p">.</span> <span class="n">This</span>
<span class="n">cannot</span> <span class="n">be</span> <span class="n">done</span> <span class="k">if</span> <span class="n">you</span> <span class="n">are</span> <span class="n">sending</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`InputFile`</span><span class="p">,</span> <span class="n">however</span><span class="p">.</span>
</code></pre>
</div>
<p>Arguments
    entity (<code>entity</code>):
        Who will receive the file.</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">file</span> <span class="p">(</span><span class="ss">`str`</span> <span class="o">|</span> <span class="ss">`bytes`</span> <span class="o">|</span> <span class="ss">`file`</span> <span class="o">|</span> <span class="ss">`media`</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">file</span> <span class="k">to</span> <span class="n">send</span><span class="p">,</span> <span class="n">which</span> <span class="n">can</span> <span class="n">be</span> <span class="n">one</span> <span class="n">of</span><span class="p">:</span>

    <span class="o">*</span> <span class="n">A</span> <span class="n">local</span> <span class="n">file</span> <span class="n">path</span> <span class="k">to</span> <span class="n">an</span> <span class="k">in</span><span class="o">-</span><span class="n">disk</span> <span class="n">file</span><span class="p">.</span> <span class="n">The</span> <span class="n">file</span> <span class="n">name</span>
      <span class="n">will</span> <span class="n">be</span> <span class="n">the</span> <span class="n">path</span><span class="s1">'s base name.</span>

<span class="s1">    * A `bytes` byte array with the file'</span><span class="n">s</span> <span class="n">data</span> <span class="k">to</span> <span class="nf">send</span>
      <span class="p">(</span><span class="k">for</span> <span class="n">example</span><span class="p">,</span> <span class="k">by</span> <span class="k">using</span> <span class="ss">``</span><span class="kt">text</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="s1">'utf-8'</span><span class="p">)</span><span class="ss">``</span><span class="p">).</span>
      <span class="n">A</span> <span class="k">default</span> <span class="n">file</span> <span class="n">name</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span><span class="p">.</span>

    <span class="o">*</span> <span class="n">A</span> <span class="n">bytes</span> <span class="ss">`io.IOBase`</span> <span class="n">stream</span> <span class="n">over</span> <span class="n">the</span> <span class="n">file</span> <span class="k">to</span> <span class="nf">send</span>
      <span class="p">(</span><span class="k">for</span> <span class="n">example</span><span class="p">,</span> <span class="k">by</span> <span class="k">using</span> <span class="ss">``</span><span class="nf">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span><span class="ss">``</span><span class="p">).</span>
      <span class="n">Its</span> <span class="ss">``</span><span class="p">.</span><span class="n">name</span><span class="ss">``</span> <span class="n">property</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="k">for</span> <span class="n">the</span> <span class="n">file</span> <span class="n">name</span><span class="p">,</span>
      <span class="k">or</span> <span class="n">a</span> <span class="k">default</span> <span class="k">if</span> <span class="n">it</span> <span class="n">doesn</span><span class="s1">'t have one.</span>

<span class="s1">    * An external URL to a file over the internet. This will</span>
<span class="s1">      send the file as "external" media, and Telegram is the</span>
<span class="s1">      one that will fetch the media and send it.</span>

<span class="s1">    * A Bot API-like ``file_id``. You can convert previously</span>
<span class="s1">      sent media to file IDs for later reusing with</span>
<span class="s1">      `telethon.utils.pack_bot_file_id`.</span>

<span class="s1">    * A handle to an existing file (for example, if you sent a</span>
<span class="s1">      message with media before, you can use its ``message.media``</span>
<span class="s1">      as a file here).</span>

<span class="s1">    * A handle to an uploaded file (from `upload_file`).</span>

<span class="s1">    * A :tl:`InputMedia` instance. For example, if you want to</span>
<span class="s1">      send a dice use :tl:`InputMediaDice`, or if you want to</span>
<span class="s1">      send a contact use :tl:`InputMediaContact`.</span>

<span class="s1">    To send an album, you should provide a list in this parameter.</span>

<span class="s1">    If a list or similar is provided, the files in it will be</span>
<span class="s1">    sent as an album in the order in which they appear, sliced</span>
<span class="s1">    in chunks of 10 if more than 10 are given.</span>

<span class="s1">caption (`str`, optional):</span>
<span class="s1">    Optional caption for the sent media message. When sending an</span>
<span class="s1">    album, the caption may be a list of strings, which will be</span>
<span class="s1">    assigned to the files pairwise.</span>

<span class="s1">force_document (`bool`, optional):</span>
<span class="s1">    If left to `False` and the file is a path that ends with</span>
<span class="s1">    the extension of an image file or a video file, it will be</span>
<span class="s1">    sent as such. Otherwise always as a document.</span>

<span class="s1">clear_draft (`bool`, optional):</span>
<span class="s1">    Whether the existing draft should be cleared or not.</span>

<span class="s1">progress_callback (`callable`, optional):</span>
<span class="s1">    A callback function accepting two parameters:</span>
<span class="s1">    ``(sent bytes, total)``.</span>

<span class="s1">reply_to (`int` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="s1">    Same as `reply_to` from `send_message`.</span>

<span class="s1">attributes (`list`, optional):</span>
<span class="s1">    Optional attributes that override the inferred ones, like</span>
<span class="s1">    :tl:`DocumentAttributeFilename` and so on.</span>

<span class="s1">thumb (`str` | `bytes` | `file`, optional):</span>
<span class="s1">    Optional JPEG thumbnail (for documents). **Telegram will</span>
<span class="s1">    ignore this parameter** unless you pass a ``.jpg`` file!</span>

<span class="s1">    The file must also be small in dimensions and in-disk size.</span>
<span class="s1">    Successful thumbnails were files below 20kb and 200x200px.</span>
<span class="s1">    Width/height and dimensions/size ratios may be important.</span>

<span class="s1">allow_cache (`bool`, optional):</span>
<span class="s1">    This parameter currently does nothing, but is kept for</span>
<span class="s1">    backward-compatibility (and it may get its use back in</span>
<span class="s1">    the future).</span>

<span class="s1">parse_mode (`object`, optional):</span>
<span class="s1">    See the `TelegramClient.parse_mode</span>
<span class="s1">    &lt;telethon.client.messageparse.MessageParseMethods.parse_mode&gt;`</span>
<span class="s1">    property for allowed values. Markdown parsing will be used by</span>
<span class="s1">    default.</span>

<span class="s1">voice_note (`bool`, optional):</span>
<span class="s1">    If `True` the audio will be sent as a voice note.</span>

<span class="s1">video_note (`bool`, optional):</span>
<span class="s1">    If `True` the video will be sent as a video note,</span>
<span class="s1">    also known as a round video message.</span>

<span class="s1">buttons (`list`, `custom.Button &lt;telethon.tl.custom.button.Button&gt;`, :tl:`KeyboardButton`):</span>
<span class="s1">    The matrix (list of lists), row list or button to be shown</span>
<span class="s1">    after sending the message. This parameter will only work if</span>
<span class="s1">    you have signed in as a bot. You can also pass your own</span>
<span class="s1">    :tl:`ReplyMarkup` here.</span>

<span class="s1">silent (`bool`, optional):</span>
<span class="s1">    Whether the message should notify people with sound or not.</span>
<span class="s1">    Defaults to `False` (send with a notification sound unless</span>
<span class="s1">    the person has the chat muted). Set it to `True` to alter</span>
<span class="s1">    this behaviour.</span>

<span class="s1">supports_streaming (`bool`, optional):</span>
<span class="s1">    Whether the sent video supports streaming or not. Note that</span>
<span class="s1">    Telegram only recognizes as streamable some formats like MP4,</span>
<span class="s1">    and others like AVI or MKV will not work. You should convert</span>
<span class="s1">    these to MP4 before sending if you want them to be streamable.</span>
<span class="s1">    Unsupported formats will result in ``VideoContentTypeError``.</span>

<span class="s1">schedule (`hints.DateLike`, optional):</span>
<span class="s1">    If set, the file won'</span><span class="n">t</span> <span class="n">send</span> <span class="n">immediately</span><span class="p">,</span> <span class="k">and</span> <span class="n">instead</span>
    <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">scheduled</span> <span class="k">to</span> <span class="n">be</span> <span class="n">automatically</span> <span class="n">sent</span> <span class="n">at</span> <span class="n">a</span> <span class="n">later</span>
    <span class="kt">time</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    The <code>Message &lt;telethon.tl.custom.message.Message&gt;</code> (or messages)
    containing the sent file, or messages if a list of them was passed.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Normal</span> <span class="n">files</span> <span class="k">like</span> <span class="n">photos</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'/my/photos/me.jpg'</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="ss">"It's me!"</span><span class="p">)</span>
    <span class="o">#</span> <span class="k">or</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="ss">"It's me!"</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="s1">'/my/photos/me.jpg'</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Voice</span> <span class="n">notes</span> <span class="k">or</span> <span class="n">round</span> <span class="n">videos</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'/my/songs/song.mp3'</span><span class="p">,</span> <span class="n">voice_note</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'/my/videos/video.mp4'</span><span class="p">,</span> <span class="n">video_note</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Custom</span> <span class="n">thumbnails</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'/my/documents/doc.txt'</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="s1">'photo.jpg'</span><span class="p">)</span>

    <span class="o">#</span> <span class="k">Only</span> <span class="n">documents</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">'/my/photos/photo.png'</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Albums</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="p">[</span>
        <span class="s1">'/my/photos/holiday1.jpg'</span><span class="p">,</span>
        <span class="s1">'/my/photos/holiday2.jpg'</span><span class="p">,</span>
        <span class="s1">'/my/drawings/portrait.png'</span>
    <span class="p">])</span>

    <span class="o">#</span> <span class="n">Printing</span> <span class="n">upload</span> <span class="n">progress</span>
    <span class="n">def</span> <span class="n">callback</span><span class="p">(</span><span class="k">current</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
        <span class="n">print</span><span class="p">(</span><span class="s1">'Uploaded'</span><span class="p">,</span> <span class="k">current</span><span class="p">,</span> <span class="s1">'out of'</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span>
              <span class="s1">'bytes: {:.2%}'</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="k">current</span> <span class="o">/</span> <span class="n">total</span><span class="p">))</span>

    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="n">callback</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">Dices</span><span class="p">,</span> <span class="k">including</span> <span class="n">dart</span> <span class="k">and</span> <span class="n">other</span> <span class="n">future</span> <span class="n">emoji</span>
    <span class="k">from</span> <span class="n">telethon</span><span class="p">.</span><span class="n">tl</span> <span class="n">import</span> <span class="n">types</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">types</span><span class="p">.</span><span class="n">InputMediaDice</span><span class="p">(</span><span class="s1">''</span><span class="p">))</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">types</span><span class="p">.</span><span class="n">InputMediaDice</span><span class="p">(</span><span class="s1">'🎯'</span><span class="p">))</span>

    <span class="o">#</span> <span class="n">Contacts</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">types</span><span class="p">.</span><span class="n">InputMediaContact</span><span class="p">(</span>
        <span class="n">phone_number</span><span class="o">=</span><span class="s1">'+34 123 456 789'</span><span class="p">,</span>
        <span class="n">first_name</span><span class="o">=</span><span class="s1">'Example'</span><span class="p">,</span>
        <span class="n">last_name</span><span class="o">=</span><span class="s1">''</span><span class="p">,</span>
        <span class="n">vcard</span><span class="o">=</span><span class="s1">''</span>
    <span class="p">))</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\uploads.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">send_file</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'typing.Union[hints.FileLike, typing.Sequence[hints.FileLike]]'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">caption</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">typing</span><span class="o">.</span><span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force_document</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">clear_draft</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="p">:</span> <span class="s1">'hints.ProgressCallback'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">reply_to</span><span class="p">:</span> <span class="s1">'hints.MessageIDLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">attributes</span><span class="p">:</span> <span class="s1">'typing.Sequence[types.TypeDocumentAttribute]'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">thumb</span><span class="p">:</span> <span class="s1">'hints.FileLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">allow_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">parse_mode</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="p">(),</span>
        <span class="n">voice_note</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">video_note</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">buttons</span><span class="p">:</span> <span class="s1">'hints.MarkupLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">silent</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">supports_streaming</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">schedule</span><span class="p">:</span> <span class="s1">'hints.DateLike'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'types.Message'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Sends message with the given file to the specified entity.</span>

<span class="sd">    .. note::</span>

<span class="sd">        If the ``hachoir3`` package (``hachoir`` module) is installed,</span>
<span class="sd">        it will be used to determine metadata from audio and video files.</span>

<span class="sd">        If the ``pillow`` package is installed and you are sending a photo,</span>
<span class="sd">        it will be resized to fit within the maximum dimensions allowed</span>
<span class="sd">        by Telegram to avoid ``errors.PhotoInvalidDimensionsError``. This</span>
<span class="sd">        cannot be done if you are sending :tl:`InputFile`, however.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`entity`):</span>
<span class="sd">            Who will receive the file.</span>

<span class="sd">        file (`str` | `bytes` | `file` | `media`):</span>
<span class="sd">            The file to send, which can be one of:</span>

<span class="sd">            * A local file path to an in-disk file. The file name</span>
<span class="sd">              will be the path's base name.</span>

<span class="sd">            * A `bytes` byte array with the file's data to send</span>
<span class="sd">              (for example, by using ``text.encode('utf-8')``).</span>
<span class="sd">              A default file name will be used.</span>

<span class="sd">            * A bytes `io.IOBase` stream over the file to send</span>
<span class="sd">              (for example, by using ``open(file, 'rb')``).</span>
<span class="sd">              Its ``.name`` property will be used for the file name,</span>
<span class="sd">              or a default if it doesn't have one.</span>

<span class="sd">            * An external URL to a file over the internet. This will</span>
<span class="sd">              send the file as "external" media, and Telegram is the</span>
<span class="sd">              one that will fetch the media and send it.</span>

<span class="sd">            * A Bot API-like ``file_id``. You can convert previously</span>
<span class="sd">              sent media to file IDs for later reusing with</span>
<span class="sd">              `telethon.utils.pack_bot_file_id`.</span>

<span class="sd">            * A handle to an existing file (for example, if you sent a</span>
<span class="sd">              message with media before, you can use its ``message.media``</span>
<span class="sd">              as a file here).</span>

<span class="sd">            * A handle to an uploaded file (from `upload_file`).</span>

<span class="sd">            * A :tl:`InputMedia` instance. For example, if you want to</span>
<span class="sd">              send a dice use :tl:`InputMediaDice`, or if you want to</span>
<span class="sd">              send a contact use :tl:`InputMediaContact`.</span>

<span class="sd">            To send an album, you should provide a list in this parameter.</span>

<span class="sd">            If a list or similar is provided, the files in it will be</span>
<span class="sd">            sent as an album in the order in which they appear, sliced</span>
<span class="sd">            in chunks of 10 if more than 10 are given.</span>

<span class="sd">        caption (`str`, optional):</span>
<span class="sd">            Optional caption for the sent media message. When sending an</span>
<span class="sd">            album, the caption may be a list of strings, which will be</span>
<span class="sd">            assigned to the files pairwise.</span>

<span class="sd">        force_document (`bool`, optional):</span>
<span class="sd">            If left to `False` and the file is a path that ends with</span>
<span class="sd">            the extension of an image file or a video file, it will be</span>
<span class="sd">            sent as such. Otherwise always as a document.</span>

<span class="sd">        clear_draft (`bool`, optional):</span>
<span class="sd">            Whether the existing draft should be cleared or not.</span>

<span class="sd">        progress_callback (`callable`, optional):</span>
<span class="sd">            A callback function accepting two parameters:</span>
<span class="sd">            ``(sent bytes, total)``.</span>

<span class="sd">        reply_to (`int` | `Message &lt;telethon.tl.custom.message.Message&gt;`):</span>
<span class="sd">            Same as `reply_to` from `send_message`.</span>

<span class="sd">        attributes (`list`, optional):</span>
<span class="sd">            Optional attributes that override the inferred ones, like</span>
<span class="sd">            :tl:`DocumentAttributeFilename` and so on.</span>

<span class="sd">        thumb (`str` | `bytes` | `file`, optional):</span>
<span class="sd">            Optional JPEG thumbnail (for documents). **Telegram will</span>
<span class="sd">            ignore this parameter** unless you pass a ``.jpg`` file!</span>

<span class="sd">            The file must also be small in dimensions and in-disk size.</span>
<span class="sd">            Successful thumbnails were files below 20kb and 200x200px.</span>
<span class="sd">            Width/height and dimensions/size ratios may be important.</span>

<span class="sd">        allow_cache (`bool`, optional):</span>
<span class="sd">            This parameter currently does nothing, but is kept for</span>
<span class="sd">            backward-compatibility (and it may get its use back in</span>
<span class="sd">            the future).</span>

<span class="sd">        parse_mode (`object`, optional):</span>
<span class="sd">            See the `TelegramClient.parse_mode</span>
<span class="sd">            &lt;telethon.client.messageparse.MessageParseMethods.parse_mode&gt;`</span>
<span class="sd">            property for allowed values. Markdown parsing will be used by</span>
<span class="sd">            default.</span>

<span class="sd">        voice_note (`bool`, optional):</span>
<span class="sd">            If `True` the audio will be sent as a voice note.</span>

<span class="sd">        video_note (`bool`, optional):</span>
<span class="sd">            If `True` the video will be sent as a video note,</span>
<span class="sd">            also known as a round video message.</span>

<span class="sd">        buttons (`list`, `custom.Button &lt;telethon.tl.custom.button.Button&gt;`, :tl:`KeyboardButton`):</span>
<span class="sd">            The matrix (list of lists), row list or button to be shown</span>
<span class="sd">            after sending the message. This parameter will only work if</span>
<span class="sd">            you have signed in as a bot. You can also pass your own</span>
<span class="sd">            :tl:`ReplyMarkup` here.</span>

<span class="sd">        silent (`bool`, optional):</span>
<span class="sd">            Whether the message should notify people with sound or not.</span>
<span class="sd">            Defaults to `False` (send with a notification sound unless</span>
<span class="sd">            the person has the chat muted). Set it to `True` to alter</span>
<span class="sd">            this behaviour.</span>

<span class="sd">        supports_streaming (`bool`, optional):</span>
<span class="sd">            Whether the sent video supports streaming or not. Note that</span>
<span class="sd">            Telegram only recognizes as streamable some formats like MP4,</span>
<span class="sd">            and others like AVI or MKV will not work. You should convert</span>
<span class="sd">            these to MP4 before sending if you want them to be streamable.</span>
<span class="sd">            Unsupported formats will result in ``VideoContentTypeError``.</span>

<span class="sd">        schedule (`hints.DateLike`, optional):</span>
<span class="sd">            If set, the file won't send immediately, and instead</span>
<span class="sd">            it will be scheduled to be automatically sent at a later</span>
<span class="sd">            time.</span>

<span class="sd">    Returns</span>
<span class="sd">        The `Message &lt;telethon.tl.custom.message.Message&gt;` (or messages)</span>
<span class="sd">        containing the sent file, or messages if a list of them was passed.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Normal files like photos</span>
<span class="sd">            await client.send_file(chat, '/my/photos/me.jpg', caption="It's me!")</span>
<span class="sd">            # or</span>
<span class="sd">            await client.send_message(chat, "It's me!", file='/my/photos/me.jpg')</span>

<span class="sd">            # Voice notes or round videos</span>
<span class="sd">            await client.send_file(chat, '/my/songs/song.mp3', voice_note=True)</span>
<span class="sd">            await client.send_file(chat, '/my/videos/video.mp4', video_note=True)</span>

<span class="sd">            # Custom thumbnails</span>
<span class="sd">            await client.send_file(chat, '/my/documents/doc.txt', thumb='photo.jpg')</span>

<span class="sd">            # Only documents</span>
<span class="sd">            await client.send_file(chat, '/my/photos/photo.png', force_document=True)</span>

<span class="sd">            # Albums</span>
<span class="sd">            await client.send_file(chat, [</span>
<span class="sd">                '/my/photos/holiday1.jpg',</span>
<span class="sd">                '/my/photos/holiday2.jpg',</span>
<span class="sd">                '/my/drawings/portrait.png'</span>
<span class="sd">            ])</span>

<span class="sd">            # Printing upload progress</span>
<span class="sd">            def callback(current, total):</span>
<span class="sd">                print('Uploaded', current, 'out of', total,</span>
<span class="sd">                      'bytes: {:.2%}'.format(current / total))</span>

<span class="sd">            await client.send_file(chat, file, progress_callback=callback)</span>

<span class="sd">            # Dices, including dart and other future emoji</span>
<span class="sd">            from telethon.tl import types</span>
<span class="sd">            await client.send_file(chat, types.InputMediaDice(''))</span>
<span class="sd">            await client.send_file(chat, types.InputMediaDice('🎯'))</span>

<span class="sd">            # Contacts</span>
<span class="sd">            await client.send_file(chat, types.InputMediaContact(</span>
<span class="sd">                phone_number='+34 123 456 789',</span>
<span class="sd">                first_name='Example',</span>
<span class="sd">                last_name='',</span>
<span class="sd">                vcard=''</span>
<span class="sd">            ))</span>
<span class="sd">    """</span>
    <span class="c1"># TODO Properly implement allow_cache to reuse the sha256 of the file</span>
    <span class="c1"># i.e. `None` was used</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">file</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Cannot use </span><span class="si">{!r}</span><span class="s1"> as file'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">caption</span><span class="p">:</span>
        <span class="n">caption</span> <span class="o">=</span> <span class="s1">''</span>

    <span class="c1"># First check if the user passed an iterable, in which case</span>
    <span class="c1"># we may want to send as an album if all are photo files.</span>
    <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
        <span class="n">media_captions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">document_captions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">caption</span><span class="p">):</span>
            <span class="n">captions</span> <span class="o">=</span> <span class="n">caption</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">captions</span> <span class="o">=</span> <span class="p">[</span><span class="n">caption</span><span class="p">]</span>

        <span class="c1"># TODO Fix progress_callback</span>
        <span class="n">media</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">force_document</span><span class="p">:</span>
            <span class="n">documents</span> <span class="o">=</span> <span class="n">file</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">documents</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">cap</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">zip_longest</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">captions</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_image</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_video</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
                    <span class="n">media</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
                    <span class="n">media_captions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">documents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
                    <span class="n">document_captions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cap</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">media</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">+=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_album</span><span class="p">(</span>
                <span class="n">entity</span><span class="p">,</span> <span class="n">media</span><span class="p">[:</span><span class="mi">10</span><span class="p">],</span> <span class="n">caption</span><span class="o">=</span><span class="n">media_captions</span><span class="p">[:</span><span class="mi">10</span><span class="p">],</span>
                <span class="n">progress_callback</span><span class="o">=</span><span class="n">progress_callback</span><span class="p">,</span> <span class="n">reply_to</span><span class="o">=</span><span class="n">reply_to</span><span class="p">,</span>
                <span class="n">parse_mode</span><span class="o">=</span><span class="n">parse_mode</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">schedule</span><span class="p">,</span>
                <span class="n">supports_streaming</span><span class="o">=</span><span class="n">supports_streaming</span><span class="p">,</span> <span class="n">clear_draft</span><span class="o">=</span><span class="n">clear_draft</span>
            <span class="p">)</span>
            <span class="n">media</span> <span class="o">=</span> <span class="n">media</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span>
            <span class="n">media_captions</span> <span class="o">=</span> <span class="n">media_captions</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span>

        <span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">cap</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span> <span class="n">captions</span><span class="p">):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">send_file</span><span class="p">(</span>
                <span class="n">entity</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="n">allow_cache</span><span class="o">=</span><span class="n">allow_cache</span><span class="p">,</span>
                <span class="n">caption</span><span class="o">=</span><span class="n">cap</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="n">force_document</span><span class="p">,</span>
                <span class="n">progress_callback</span><span class="o">=</span><span class="n">progress_callback</span><span class="p">,</span> <span class="n">reply_to</span><span class="o">=</span><span class="n">reply_to</span><span class="p">,</span>
                <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="n">thumb</span><span class="p">,</span> <span class="n">voice_note</span><span class="o">=</span><span class="n">voice_note</span><span class="p">,</span>
                <span class="n">video_note</span><span class="o">=</span><span class="n">video_note</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="n">buttons</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
                <span class="n">supports_streaming</span><span class="o">=</span><span class="n">supports_streaming</span><span class="p">,</span> <span class="n">schedule</span><span class="o">=</span><span class="n">schedule</span><span class="p">,</span>
                <span class="n">clear_draft</span><span class="o">=</span><span class="n">clear_draft</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">))</span>

        <span class="k">return</span> <span class="n">result</span>

    <span class="n">entity</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="n">reply_to</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_message_id</span><span class="p">(</span><span class="n">reply_to</span><span class="p">)</span>

    <span class="c1"># Not document since it's subject to change.</span>
    <span class="c1"># Needed when a Message is passed to send_message and it has media.</span>
    <span class="k">if</span> <span class="s1">'entities'</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">msg_entities</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">'entities'</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">caption</span><span class="p">,</span> <span class="n">msg_entities</span> <span class="o">=</span>\
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_message_text</span><span class="p">(</span><span class="n">caption</span><span class="p">,</span> <span class="n">parse_mode</span><span class="p">)</span>

    <span class="n">file_handle</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_file_to_media</span><span class="p">(</span>
        <span class="n">file</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="n">force_document</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="o">=</span><span class="n">progress_callback</span><span class="p">,</span>
        <span class="n">attributes</span><span class="o">=</span><span class="n">attributes</span><span class="p">,</span>  <span class="n">allow_cache</span><span class="o">=</span><span class="n">allow_cache</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="n">thumb</span><span class="p">,</span>
        <span class="n">voice_note</span><span class="o">=</span><span class="n">voice_note</span><span class="p">,</span> <span class="n">video_note</span><span class="o">=</span><span class="n">video_note</span><span class="p">,</span>
        <span class="n">supports_streaming</span><span class="o">=</span><span class="n">supports_streaming</span>
    <span class="p">)</span>

    <span class="c1"># e.g. invalid cast from :tl:`MessageMediaWebPage`</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">media</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">'Cannot use </span><span class="si">{!r}</span><span class="s1"> as file'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>

    <span class="n">markup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">(</span><span class="n">buttons</span><span class="p">)</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SendMediaRequest</span><span class="p">(</span>
        <span class="n">entity</span><span class="p">,</span> <span class="n">media</span><span class="p">,</span> <span class="n">reply_to_msg_id</span><span class="o">=</span><span class="n">reply_to</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="n">caption</span><span class="p">,</span>
        <span class="n">entities</span><span class="o">=</span><span class="n">msg_entities</span><span class="p">,</span> <span class="n">reply_markup</span><span class="o">=</span><span class="n">markup</span><span class="p">,</span> <span class="n">silent</span><span class="o">=</span><span class="n">silent</span><span class="p">,</span>
        <span class="n">schedule_date</span><span class="o">=</span><span class="n">schedule</span><span class="p">,</span> <span class="n">clear_draft</span><span class="o">=</span><span class="n">clear_draft</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_response_message</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">request</span><span class="p">),</span> <span class="n">entity</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.uploads.UploadMethods.upload_file">
<code class="highlight language-python">
upload_file<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">part_size_kb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">use_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.uploads.UploadMethods.upload_file" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Uploads a file to Telegram's servers, without sending it.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Generally</span><span class="p">,</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="k">use</span> <span class="ss">`send_file`</span> <span class="n">instead</span><span class="p">.</span>
</code></pre>
</div>
<p>This method returns a handle (an instance of :tl:<code>InputFile</code> or
:tl:<code>InputFileBig</code>, as required) which can be later used before
it expires (they are usable during less than a day).</p>
<p>Uploading a file will simply return a "handle" to the file stored
remotely in the Telegram servers, which can be later used on. This
will <strong>not</strong> upload the file to your own chat or any chat at all.</p>
<p>Arguments
    file (<code>str</code> | <code>bytes</code> | <code>file</code>):
        The path of the file, byte array, or stream that will be sent.
        Note that if a byte array or a stream is given, a filename
        or its type won't be inferred, and it will be sent as an
        "unnamed application/octet-stream".</p>
<div class="codehilite">
<pre><span></span><code><span class="nf">part_size_kb</span> <span class="p">(</span><span class="ss">`int`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">Chunk</span> <span class="n">size</span> <span class="k">when</span> <span class="n">uploading</span> <span class="n">files</span><span class="p">.</span> <span class="n">The</span> <span class="n">larger</span><span class="p">,</span> <span class="n">the</span> <span class="n">less</span>
    <span class="n">requests</span> <span class="n">will</span> <span class="n">be</span> <span class="nf">made</span> <span class="p">(</span><span class="n">up</span> <span class="k">to</span> <span class="mi">512</span><span class="n">KB</span> <span class="n">maximum</span><span class="p">).</span>

<span class="nf">file_name</span> <span class="p">(</span><span class="ss">`str`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">The</span> <span class="n">file</span> <span class="n">name</span> <span class="n">which</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="k">on</span> <span class="n">the</span> <span class="n">resulting</span> <span class="n">InputFile</span><span class="p">.</span>
    <span class="k">If</span> <span class="k">not</span> <span class="n">specified</span><span class="p">,</span> <span class="n">the</span> <span class="n">name</span> <span class="n">will</span> <span class="n">be</span> <span class="n">taken</span> <span class="k">from</span> <span class="n">the</span> <span class="ss">``</span><span class="n">file</span><span class="ss">``</span>
    <span class="k">and</span> <span class="k">if</span> <span class="n">this</span> <span class="k">is</span> <span class="k">not</span> <span class="n">a</span> <span class="ss">`str`</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="ss">``</span><span class="s2">"unnamed"</span><span class="ss">``</span><span class="p">.</span>

<span class="nf">use_cache</span> <span class="p">(</span><span class="ss">`type`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">This</span> <span class="n">parameter</span> <span class="n">currently</span> <span class="n">does</span> <span class="n">nothing</span><span class="p">,</span> <span class="n">but</span> <span class="k">is</span> <span class="n">kept</span> <span class="k">for</span>
    <span class="n">backward</span><span class="o">-</span><span class="nf">compatibility</span> <span class="p">(</span><span class="k">and</span> <span class="n">it</span> <span class="n">may</span> <span class="n">get</span> <span class="n">its</span> <span class="k">use</span> <span class="n">back</span> <span class="k">in</span>
    <span class="n">the</span> <span class="n">future</span><span class="p">).</span>

<span class="k">key</span> <span class="p">(</span><span class="s1">'bytes'</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">In</span> <span class="k">case</span> <span class="n">of</span> <span class="n">an</span> <span class="n">encrypted</span> <span class="nf">upload</span> <span class="p">(</span><span class="n">secret</span> <span class="n">chats</span><span class="p">)</span> <span class="n">a</span> <span class="k">key</span> <span class="k">is</span> <span class="n">supplied</span>

<span class="nf">iv</span> <span class="p">(</span><span class="s1">'bytes'</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="k">In</span> <span class="k">case</span> <span class="n">of</span> <span class="n">an</span> <span class="n">encrypted</span> <span class="nf">upload</span> <span class="p">(</span><span class="n">secret</span> <span class="n">chats</span><span class="p">)</span> <span class="n">an</span> <span class="n">iv</span> <span class="k">is</span> <span class="n">supplied</span>

<span class="nf">progress_callback</span> <span class="p">(</span><span class="ss">`callable`</span><span class="p">,</span> <span class="n">optional</span><span class="p">):</span>
    <span class="n">A</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">accepting</span> <span class="n">two</span> <span class="n">parameters</span><span class="p">:</span>
    <span class="ss">``</span><span class="p">(</span><span class="n">sent</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span><span class="ss">``</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    :tl:<code>InputFileBig</code> if the file size is larger than 10MB,
    <code>InputSizedFile &lt;telethon.tl.custom.inputsizedfile.InputSizedFile&gt;</code>
    (subclass of :tl:<code>InputFile</code>) otherwise.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="n">Photos</span> <span class="k">as</span> <span class="n">photo</span> <span class="k">and</span> <span class="n">document</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">upload_file</span><span class="p">(</span><span class="s1">'photo.jpg'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>                       <span class="o">#</span> <span class="n">sends</span> <span class="k">as</span> <span class="n">photo</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>  <span class="o">#</span> <span class="n">sends</span> <span class="k">as</span> <span class="n">document</span>

    <span class="n">file</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">'not a photo.jpg'</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">force_document</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>  <span class="o">#</span> <span class="n">document</span><span class="p">,</span> <span class="k">new</span> <span class="n">name</span>

    <span class="o">#</span> <span class="k">As</span> <span class="n">song</span> <span class="k">or</span> <span class="k">as</span> <span class="n">voice</span> <span class="n">note</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">upload_file</span><span class="p">(</span><span class="s1">'song.ogg'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>                   <span class="o">#</span> <span class="n">sends</span> <span class="k">as</span> <span class="n">song</span>
    <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">send_file</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">voice_note</span><span class="o">=</span><span class="k">True</span><span class="p">)</span>  <span class="o">#</span> <span class="n">sends</span> <span class="k">as</span> <span class="n">voice</span> <span class="n">note</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\uploads.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">upload_file</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">file</span><span class="p">:</span> <span class="s1">'hints.FileLike'</span><span class="p">,</span>
        <span class="o">*</span><span class="p">,</span>
        <span class="n">part_size_kb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">file_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">use_cache</span><span class="p">:</span> <span class="nb">type</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">key</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">iv</span><span class="p">:</span> <span class="nb">bytes</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">progress_callback</span><span class="p">:</span> <span class="s1">'hints.ProgressCallback'</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'types.TypeInputFile'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Uploads a file to Telegram's servers, without sending it.</span>

<span class="sd">    .. note::</span>

<span class="sd">        Generally, you want to use `send_file` instead.</span>

<span class="sd">    This method returns a handle (an instance of :tl:`InputFile` or</span>
<span class="sd">    :tl:`InputFileBig`, as required) which can be later used before</span>
<span class="sd">    it expires (they are usable during less than a day).</span>

<span class="sd">    Uploading a file will simply return a "handle" to the file stored</span>
<span class="sd">    remotely in the Telegram servers, which can be later used on. This</span>
<span class="sd">    will **not** upload the file to your own chat or any chat at all.</span>

<span class="sd">    Arguments</span>
<span class="sd">        file (`str` | `bytes` | `file`):</span>
<span class="sd">            The path of the file, byte array, or stream that will be sent.</span>
<span class="sd">            Note that if a byte array or a stream is given, a filename</span>
<span class="sd">            or its type won't be inferred, and it will be sent as an</span>
<span class="sd">            "unnamed application/octet-stream".</span>

<span class="sd">        part_size_kb (`int`, optional):</span>
<span class="sd">            Chunk size when uploading files. The larger, the less</span>
<span class="sd">            requests will be made (up to 512KB maximum).</span>

<span class="sd">        file_name (`str`, optional):</span>
<span class="sd">            The file name which will be used on the resulting InputFile.</span>
<span class="sd">            If not specified, the name will be taken from the ``file``</span>
<span class="sd">            and if this is not a `str`, it will be ``"unnamed"``.</span>

<span class="sd">        use_cache (`type`, optional):</span>
<span class="sd">            This parameter currently does nothing, but is kept for</span>
<span class="sd">            backward-compatibility (and it may get its use back in</span>
<span class="sd">            the future).</span>

<span class="sd">        key ('bytes', optional):</span>
<span class="sd">            In case of an encrypted upload (secret chats) a key is supplied</span>

<span class="sd">        iv ('bytes', optional):</span>
<span class="sd">            In case of an encrypted upload (secret chats) an iv is supplied</span>

<span class="sd">        progress_callback (`callable`, optional):</span>
<span class="sd">            A callback function accepting two parameters:</span>
<span class="sd">            ``(sent bytes, total)``.</span>

<span class="sd">    Returns</span>
<span class="sd">        :tl:`InputFileBig` if the file size is larger than 10MB,</span>
<span class="sd">        `InputSizedFile &lt;telethon.tl.custom.inputsizedfile.InputSizedFile&gt;`</span>
<span class="sd">        (subclass of :tl:`InputFile`) otherwise.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Photos as photo and document</span>
<span class="sd">            file = await client.upload_file('photo.jpg')</span>
<span class="sd">            await client.send_file(chat, file)                       # sends as photo</span>
<span class="sd">            await client.send_file(chat, file, force_document=True)  # sends as document</span>

<span class="sd">            file.name = 'not a photo.jpg'</span>
<span class="sd">            await client.send_file(chat, file, force_document=True)  # document, new name</span>

<span class="sd">            # As song or as voice note</span>
<span class="sd">            file = await client.upload_file('song.ogg')</span>
<span class="sd">            await client.send_file(chat, file)                   # sends as song</span>
<span class="sd">            await client.send_file(chat, file, voice_note=True)  # sends as voice note</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">InputFile</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputFileBig</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">file</span>  <span class="c1"># Already uploaded</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_name</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">'name'</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">name</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">getsize</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># `aiofiles` shouldn't base `IOBase` because they change the</span>
        <span class="c1"># methods' definition. `seekable` would be `async` but since</span>
        <span class="c1"># we won't get to check that, there's no need to maybe-await.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">io</span><span class="o">.</span><span class="n">IOBase</span><span class="p">)</span> <span class="ow">and</span> <span class="n">file</span><span class="o">.</span><span class="n">seekable</span><span class="p">():</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># TODO Don't load the entire file in memory always</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">data</span>

        <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s1">'file descriptor returned </span><span class="si">{}</span><span class="s1">, not bytes (you must '</span>
                <span class="s1">'open the file in bytes mode)'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)))</span>

        <span class="n">file</span> <span class="o">=</span> <span class="n">data</span>
        <span class="n">file_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="c1"># File will now either be a string or bytes</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">part_size_kb</span><span class="p">:</span>
        <span class="n">part_size_kb</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_appropriated_part_size</span><span class="p">(</span><span class="n">file_size</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">part_size_kb</span> <span class="o">&gt;</span> <span class="mi">512</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">'The part size must be less or equal to 512KB'</span><span class="p">)</span>

    <span class="n">part_size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">part_size_kb</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">part_size</span> <span class="o">%</span> <span class="mi">1024</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">'The part size must be evenly divisible by 1024'</span><span class="p">)</span>

    <span class="c1"># Set a default file name if None was specified</span>
    <span class="n">file_id</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">generate_random_long</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">file_name</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">file_id</span><span class="p">)</span>

    <span class="c1"># If the file name lacks extension, add it if possible.</span>
    <span class="c1"># Else Telegram complains with `PHOTO_EXT_INVALID_ERROR`</span>
    <span class="c1"># even if the uploaded image is indeed a photo.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_name</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="n">file_name</span> <span class="o">+=</span> <span class="n">utils</span><span class="o">.</span><span class="n">_get_extension</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="c1"># Determine whether the file is too big (over 10MB) or not</span>
    <span class="c1"># Telegram does make a distinction between smaller or larger files</span>
    <span class="n">is_large</span> <span class="o">=</span> <span class="n">file_size</span> <span class="o">&gt;</span> <span class="mi">10</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
    <span class="n">hash_md5</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_large</span><span class="p">:</span>
        <span class="c1"># Calculate the MD5 hash before anything else.</span>
        <span class="c1"># As this needs to be done always for small files,</span>
        <span class="c1"># might as well do it before anything else and</span>
        <span class="c1"># check the cache.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">file</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">hash_md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

    <span class="n">part_count</span> <span class="o">=</span> <span class="p">(</span><span class="n">file_size</span> <span class="o">+</span> <span class="n">part_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="n">part_size</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">'Uploading file of </span><span class="si">%d</span><span class="s1"> bytes in </span><span class="si">%d</span><span class="s1"> chunks of </span><span class="si">%d</span><span class="s1">'</span><span class="p">,</span>
                             <span class="n">file_size</span><span class="p">,</span> <span class="n">part_count</span><span class="p">,</span> <span class="n">part_size</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">BytesIO</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>\
            <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">part_index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">part_count</span><span class="p">):</span>
            <span class="c1"># Read the file by in chunks of size part_size</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">part_size</span><span class="p">)</span>

            <span class="c1"># encryption part if needed</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">iv</span><span class="p">:</span>
                <span class="n">part</span> <span class="o">=</span> <span class="n">AES</span><span class="o">.</span><span class="n">encrypt_ige</span><span class="p">(</span><span class="n">part</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">iv</span><span class="p">)</span>

            <span class="c1"># The SavePartRequest is different depending on whether</span>
            <span class="c1"># the file is too large or not (over or less than 10MB)</span>
            <span class="k">if</span> <span class="n">is_large</span><span class="p">:</span>
                <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">upload</span><span class="o">.</span><span class="n">SaveBigFilePartRequest</span><span class="p">(</span>
                    <span class="n">file_id</span><span class="p">,</span> <span class="n">part_index</span><span class="p">,</span> <span class="n">part_count</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">request</span> <span class="o">=</span> <span class="n">functions</span><span class="o">.</span><span class="n">upload</span><span class="o">.</span><span class="n">SaveFilePartRequest</span><span class="p">(</span>
                    <span class="n">file_id</span><span class="p">,</span> <span class="n">part_index</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>

            <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">[</span><span class="vm">__name__</span><span class="p">]</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">'Uploaded </span><span class="si">%d</span><span class="s1">/</span><span class="si">%d</span><span class="s1">'</span><span class="p">,</span>
                                          <span class="n">part_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">part_count</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                    <span class="n">r</span> <span class="o">=</span> <span class="n">progress_callback</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">tell</span><span class="p">(),</span> <span class="n">file_size</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isawaitable</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
                        <span class="k">await</span> <span class="n">r</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s1">'Failed to upload file part </span><span class="si">{}</span><span class="s1">.'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">part_index</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">is_large</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">InputFileBig</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="n">part_count</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">custom</span><span class="o">.</span><span class="n">InputSizedFile</span><span class="p">(</span>
            <span class="n">file_id</span><span class="p">,</span> <span class="n">part_count</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">md5</span><span class="o">=</span><span class="n">hash_md5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">file_size</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.client.users" id="telethon.client.users" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.client.users" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.client.users.UserMethods">
<code>UserMethods</code>
<a class="headerlink" href="#telethon.client.users.UserMethods" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.users.UserMethods.get_entity">
<code class="highlight language-python">
get_entity<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.users.UserMethods.get_entity" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Turns the given entity into a valid Telegram :tl:<code>User</code>, :tl:<code>Chat</code>
or :tl:<code>Channel</code>. You can also pass a list or iterable of entities,
and they will be efficiently fetched from the network.</p>
<p>Arguments
    entity (<code>str</code> | <code>int</code> | :tl:<code>Peer</code> | :tl:<code>InputPeer</code>):
        If a username is given, <strong>the username will be resolved</strong> making
        an API call every time. Resolving usernames is an expensive
        operation and will start hitting flood waits around 50 usernames
        in a short period of time.</p>
<div class="codehilite">
<pre><span></span><code>    <span class="k">If</span> <span class="n">you</span> <span class="n">want</span> <span class="k">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">entity</span> <span class="k">for</span> <span class="n">a</span> <span class="o">*</span><span class="n">cached</span><span class="o">*</span> <span class="n">username</span><span class="p">,</span> <span class="n">you</span> <span class="n">should</span>
    <span class="n">first</span> <span class="ss">`get_input_entity(username) &lt;get_input_entity&gt;`</span> <span class="n">which</span> <span class="n">will</span>
    <span class="k">use</span> <span class="n">the</span> <span class="n">cache</span><span class="p">),</span> <span class="k">and</span> <span class="k">then</span> <span class="k">use</span> <span class="ss">`get_entity`</span> <span class="k">with</span> <span class="n">the</span> <span class="n">result</span> <span class="n">of</span> <span class="n">the</span>
    <span class="n">previous</span> <span class="k">call</span><span class="p">.</span>

    <span class="n">Similar</span> <span class="n">limits</span> <span class="n">apply</span> <span class="k">to</span> <span class="n">invite</span> <span class="n">links</span><span class="p">,</span> <span class="k">and</span> <span class="n">you</span> <span class="n">should</span> <span class="k">use</span> <span class="n">their</span>
    <span class="n">ID</span> <span class="n">instead</span><span class="p">.</span>

    <span class="k">Using</span> <span class="n">phone</span> <span class="nf">numbers</span> <span class="p">(</span><span class="k">from</span> <span class="n">people</span> <span class="k">in</span> <span class="n">your</span> <span class="n">contact</span> <span class="n">list</span><span class="p">),</span> <span class="n">exact</span>
    <span class="n">names</span><span class="p">,</span> <span class="kt">integer</span> <span class="n">IDs</span> <span class="k">or</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`Peer`</span> <span class="n">rely</span> <span class="k">on</span> <span class="n">a</span> <span class="ss">`get_input_entity`</span>
    <span class="n">first</span><span class="p">,</span> <span class="n">which</span> <span class="k">in</span> <span class="n">turn</span> <span class="n">needs</span> <span class="n">the</span> <span class="n">entity</span> <span class="k">to</span> <span class="n">be</span> <span class="k">in</span> <span class="n">cache</span><span class="p">,</span> <span class="n">unless</span>
    <span class="n">a</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`InputPeer`</span> <span class="n">was</span> <span class="n">passed</span><span class="p">.</span>

    <span class="n">Unsupported</span> <span class="n">types</span> <span class="n">will</span> <span class="n">raise</span> <span class="ss">``</span><span class="n">TypeError</span><span class="ss">``</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="n">entity</span> <span class="n">can</span><span class="err">'</span><span class="n">t</span> <span class="n">be</span> <span class="n">found</span><span class="p">,</span> <span class="ss">``</span><span class="n">ValueError</span><span class="ss">``</span> <span class="n">will</span> <span class="n">be</span> <span class="n">raised</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    :tl:<code>User</code>, :tl:<code>Chat</code> or :tl:<code>Channel</code> corresponding to the
    input entity. A list will be returned if more than one was given.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">utils</span>

    <span class="n">me</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_entity</span><span class="p">(</span><span class="s1">'me'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_display_name</span><span class="p">(</span><span class="n">me</span><span class="p">))</span>

    <span class="n">chat</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="s1">'username'</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="c1"># Note that you could have used the username directly, but it's</span>
    <span class="c1"># good to use get_input_entity if you will reuse it a lot.</span>
    <span class="n">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="s1">'username'</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="c1"># Note that for this to work the phone number must be in your contacts</span>
    <span class="n">some_id</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="s1">'+34123456789'</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\users.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_entity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">entity</span><span class="p">:</span> <span class="s1">'hints.EntitiesLike'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'hints.Entity'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Turns the given entity into a valid Telegram :tl:`User`, :tl:`Chat`</span>
<span class="sd">    or :tl:`Channel`. You can also pass a list or iterable of entities,</span>
<span class="sd">    and they will be efficiently fetched from the network.</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`str` | `int` | :tl:`Peer` | :tl:`InputPeer`):</span>
<span class="sd">            If a username is given, **the username will be resolved** making</span>
<span class="sd">            an API call every time. Resolving usernames is an expensive</span>
<span class="sd">            operation and will start hitting flood waits around 50 usernames</span>
<span class="sd">            in a short period of time.</span>

<span class="sd">            If you want to get the entity for a *cached* username, you should</span>
<span class="sd">            first `get_input_entity(username) &lt;get_input_entity&gt;` which will</span>
<span class="sd">            use the cache), and then use `get_entity` with the result of the</span>
<span class="sd">            previous call.</span>

<span class="sd">            Similar limits apply to invite links, and you should use their</span>
<span class="sd">            ID instead.</span>

<span class="sd">            Using phone numbers (from people in your contact list), exact</span>
<span class="sd">            names, integer IDs or :tl:`Peer` rely on a `get_input_entity`</span>
<span class="sd">            first, which in turn needs the entity to be in cache, unless</span>
<span class="sd">            a :tl:`InputPeer` was passed.</span>

<span class="sd">            Unsupported types will raise ``TypeError``.</span>

<span class="sd">            If the entity can't be found, ``ValueError`` will be raised.</span>

<span class="sd">    Returns</span>
<span class="sd">        :tl:`User`, :tl:`Chat` or :tl:`Channel` corresponding to the</span>
<span class="sd">        input entity. A list will be returned if more than one was given.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            from telethon import utils</span>

<span class="sd">            me = await client.get_entity('me')</span>
<span class="sd">            print(utils.get_display_name(me))</span>

<span class="sd">            chat = await client.get_input_entity('username')</span>
<span class="sd">            async for message in client.iter_messages(chat):</span>
<span class="sd">                ...</span>

<span class="sd">            # Note that you could have used the username directly, but it's</span>
<span class="sd">            # good to use get_input_entity if you will reuse it a lot.</span>
<span class="sd">            async for message in client.iter_messages('username'):</span>
<span class="sd">                ...</span>

<span class="sd">            # Note that for this to work the phone number must be in your contacts</span>
<span class="sd">            some_id = await client.get_peer_id('+34123456789')</span>
<span class="sd">    """</span>
    <span class="n">single</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">entity</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">single</span><span class="p">:</span>
        <span class="n">entity</span> <span class="o">=</span> <span class="p">(</span><span class="n">entity</span><span class="p">,)</span>

    <span class="c1"># Group input entities by string (resolve username),</span>
    <span class="c1"># input users (get users), input chat (get chats) and</span>
    <span class="c1"># input channels (get channels) to get the most entities</span>
    <span class="c1"># in the less amount of calls possible.</span>
    <span class="n">inputs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">entity</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">inputs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="n">lists</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">USER</span><span class="p">:</span> <span class="p">[],</span>
        <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHAT</span><span class="p">:</span> <span class="p">[],</span>
        <span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">:</span> <span class="p">[],</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">lists</span><span class="p">[</span><span class="n">helpers</span><span class="o">.</span><span class="n">_entity_type</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="n">users</span> <span class="o">=</span> <span class="n">lists</span><span class="p">[</span><span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">USER</span><span class="p">]</span>
    <span class="n">chats</span> <span class="o">=</span> <span class="n">lists</span><span class="p">[</span><span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHAT</span><span class="p">]</span>
    <span class="n">channels</span> <span class="o">=</span> <span class="n">lists</span><span class="p">[</span><span class="n">helpers</span><span class="o">.</span><span class="n">_EntityType</span><span class="o">.</span><span class="n">CHANNEL</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">users</span><span class="p">:</span>
        <span class="c1"># GetUsersRequest has a limit of 200 per call</span>
        <span class="n">tmp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="n">users</span><span class="p">:</span>
            <span class="n">curr</span><span class="p">,</span> <span class="n">users</span> <span class="o">=</span> <span class="n">users</span><span class="p">[:</span><span class="mi">200</span><span class="p">],</span> <span class="n">users</span><span class="p">[</span><span class="mi">200</span><span class="p">:]</span>
            <span class="n">tmp</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">GetUsersRequest</span><span class="p">(</span><span class="n">curr</span><span class="p">)))</span>
        <span class="n">users</span> <span class="o">=</span> <span class="n">tmp</span>
    <span class="k">if</span> <span class="n">chats</span><span class="p">:</span>  <span class="c1"># TODO Handle chats slice?</span>
        <span class="n">chats</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="p">(</span>
            <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">GetChatsRequest</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">chat_id</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">chats</span><span class="p">])))</span><span class="o">.</span><span class="n">chats</span>
    <span class="k">if</span> <span class="n">channels</span><span class="p">:</span>
        <span class="n">channels</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="p">(</span>
            <span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">GetChannelsRequest</span><span class="p">(</span><span class="n">channels</span><span class="p">)))</span><span class="o">.</span><span class="n">chats</span>

    <span class="c1"># Merge users, chats and channels into a single dictionary</span>
    <span class="n">id_entity</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="n">x</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">chain</span><span class="p">(</span><span class="n">users</span><span class="p">,</span> <span class="n">chats</span><span class="p">,</span> <span class="n">channels</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1"># We could check saved usernames and put them into the users,</span>
    <span class="c1"># chats and channels list from before. While this would reduce</span>
    <span class="c1"># the amount of ResolveUsername calls, it would fail to catch</span>
    <span class="c1"># username changes.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_from_string</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerSelf</span><span class="p">):</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">id_entity</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="n">x</span><span class="p">)])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span>
                <span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">id_entity</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">User</span><span class="p">)</span> <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">is_self</span>
            <span class="p">))</span>

    <span class="k">return</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">single</span> <span class="k">else</span> <span class="n">result</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.users.UserMethods.get_input_entity">
<code class="highlight language-python">
get_input_entity<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peer</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.users.UserMethods.get_input_entity" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Turns the given entity into its input entity version.</p>
<p>Most requests use this kind of :tl:<code>InputPeer</code>, so this is the most
suitable call to make for those cases. <strong>Generally you should let the
library do its job</strong> and don't worry about getting the input entity
first, but if you're going to use an entity often, consider making the
call:</p>
<p>Arguments
    entity (<code>str</code> | <code>int</code> | :tl:<code>Peer</code> | :tl:<code>InputPeer</code>):
        If a username or invite link is given, <strong>the library will
        use the cache</strong>. This means that it's possible to be using
        a username that <em>changed</em> or an old invite link (this only
        happens if an invite link for a small group chat is used
        after it was upgraded to a mega-group).</p>
<div class="codehilite">
<pre><span></span><code>    <span class="k">If</span> <span class="n">the</span> <span class="n">username</span> <span class="k">or</span> <span class="n">ID</span> <span class="k">from</span> <span class="n">the</span> <span class="n">invite</span> <span class="n">link</span> <span class="k">is</span> <span class="k">not</span> <span class="n">found</span> <span class="k">in</span>
    <span class="n">the</span> <span class="n">cache</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">fetched</span><span class="p">.</span> <span class="n">The</span> <span class="n">same</span> <span class="n">rules</span> <span class="n">apply</span> <span class="k">to</span> <span class="n">phone</span>
    <span class="nf">numbers</span> <span class="p">(</span><span class="ss">``</span><span class="s1">'+34 123456789'</span><span class="ss">``</span><span class="p">)</span> <span class="k">from</span> <span class="n">people</span> <span class="k">in</span> <span class="n">your</span> <span class="n">contact</span> <span class="n">list</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">an</span> <span class="n">exact</span> <span class="n">name</span> <span class="k">is</span> <span class="n">given</span><span class="p">,</span> <span class="n">it</span> <span class="n">must</span> <span class="n">be</span> <span class="k">in</span> <span class="n">the</span> <span class="n">cache</span> <span class="n">too</span><span class="p">.</span> <span class="n">This</span>
    <span class="k">is</span> <span class="k">not</span> <span class="n">reliable</span> <span class="k">as</span> <span class="n">different</span> <span class="n">people</span> <span class="n">can</span> <span class="n">share</span> <span class="n">the</span> <span class="n">same</span> <span class="n">name</span>
    <span class="k">and</span> <span class="n">which</span> <span class="n">entity</span> <span class="k">is</span> <span class="n">returned</span> <span class="k">is</span> <span class="n">arbitrary</span><span class="p">,</span> <span class="k">and</span> <span class="n">should</span> <span class="n">be</span> <span class="n">used</span>
    <span class="n">only</span> <span class="k">for</span> <span class="n">quick</span> <span class="n">tests</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">a</span> <span class="n">positive</span> <span class="kt">integer</span> <span class="n">ID</span> <span class="k">is</span> <span class="n">given</span><span class="p">,</span> <span class="n">the</span> <span class="n">entity</span> <span class="n">will</span> <span class="n">be</span> <span class="n">searched</span>
    <span class="k">in</span> <span class="n">cached</span> <span class="n">users</span><span class="p">,</span> <span class="n">chats</span> <span class="k">or</span> <span class="n">channels</span><span class="p">,</span> <span class="n">without</span> <span class="n">making</span> <span class="n">any</span> <span class="k">call</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">a</span> <span class="n">negative</span> <span class="kt">integer</span> <span class="n">ID</span> <span class="k">is</span> <span class="n">given</span><span class="p">,</span> <span class="n">the</span> <span class="n">entity</span> <span class="n">will</span> <span class="n">be</span> <span class="n">searched</span>
    <span class="n">exactly</span> <span class="k">as</span> <span class="n">either</span> <span class="n">a</span> <span class="nf">chat</span> <span class="p">(</span><span class="n">prefixed</span> <span class="k">with</span> <span class="ss">``</span><span class="o">-</span><span class="ss">``</span><span class="p">)</span> <span class="k">or</span> <span class="k">as</span> <span class="n">a</span> <span class="nf">channel</span>
    <span class="p">(</span><span class="n">prefixed</span> <span class="k">with</span> <span class="ss">``</span><span class="o">-</span><span class="mi">100</span><span class="ss">``</span><span class="p">).</span>

    <span class="k">If</span> <span class="n">a</span> <span class="p">:</span><span class="n">tl</span><span class="p">:</span><span class="ss">`Peer`</span> <span class="k">is</span> <span class="n">given</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">searched</span> <span class="n">exactly</span> <span class="k">in</span> <span class="n">the</span>
    <span class="n">cache</span> <span class="k">as</span> <span class="n">either</span> <span class="n">a</span> <span class="n">user</span><span class="p">,</span> <span class="n">chat</span> <span class="k">or</span> <span class="n">channel</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="n">given</span> <span class="n">object</span> <span class="n">can</span> <span class="n">be</span> <span class="n">turned</span> <span class="k">into</span> <span class="n">an</span> <span class="n">input</span> <span class="n">entity</span> <span class="n">directly</span><span class="p">,</span>
    <span class="n">said</span> <span class="n">operation</span> <span class="n">will</span> <span class="n">be</span> <span class="n">done</span><span class="p">.</span>

    <span class="n">Unsupported</span> <span class="n">types</span> <span class="n">will</span> <span class="n">raise</span> <span class="ss">``</span><span class="n">TypeError</span><span class="ss">``</span><span class="p">.</span>

    <span class="k">If</span> <span class="n">the</span> <span class="n">entity</span> <span class="n">can</span><span class="err">'</span><span class="n">t</span> <span class="n">be</span> <span class="n">found</span><span class="p">,</span> <span class="ss">``</span><span class="n">ValueError</span><span class="ss">``</span> <span class="n">will</span> <span class="n">be</span> <span class="n">raised</span><span class="p">.</span>
</code></pre>
</div>
<p>Returns
    :tl:<code>InputPeerUser</code>, :tl:<code>InputPeerChat</code> or :tl:<code>InputPeerChannel</code>
    or :tl:<code>InputPeerSelf</code> if the parameter is <code>'me'</code> or <code>'self'</code>.</p>
<div class="codehilite">
<pre><span></span><code><span class="k">If</span> <span class="n">you</span> <span class="n">need</span> <span class="k">to</span> <span class="n">get</span> <span class="n">the</span> <span class="n">ID</span> <span class="n">of</span> <span class="n">yourself</span><span class="p">,</span> <span class="n">you</span> <span class="n">should</span> <span class="k">use</span>
<span class="ss">`get_me`</span> <span class="k">with</span> <span class="ss">``</span><span class="n">input_peer</span><span class="o">=</span><span class="no">True</span><span class="ss">``</span><span class="p">)</span> <span class="n">instead</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="o">#</span> <span class="k">If</span> <span class="n">you</span><span class="s1">'re going to use "username" often in your code</span>
<span class="s1">    # (make a lot of calls), consider getting its input entity</span>
<span class="s1">    # once, and then using the "user" everywhere instead.</span>
<span class="s1">    user = await client.get_input_entity('</span><span class="n">username</span><span class="err">'</span><span class="p">)</span>

    <span class="o">#</span> <span class="n">The</span> <span class="n">same</span> <span class="n">applies</span> <span class="k">to</span> <span class="n">IDs</span><span class="p">,</span> <span class="n">chats</span> <span class="k">or</span> <span class="n">channels</span><span class="p">.</span>
    <span class="n">chat</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="o">-</span><span class="mi">123456789</span><span class="p">)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\users.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_entity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">peer</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">'types.TypeInputPeer'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Turns the given entity into its input entity version.</span>

<span class="sd">    Most requests use this kind of :tl:`InputPeer`, so this is the most</span>
<span class="sd">    suitable call to make for those cases. **Generally you should let the</span>
<span class="sd">    library do its job** and don't worry about getting the input entity</span>
<span class="sd">    first, but if you're going to use an entity often, consider making the</span>
<span class="sd">    call:</span>

<span class="sd">    Arguments</span>
<span class="sd">        entity (`str` | `int` | :tl:`Peer` | :tl:`InputPeer`):</span>
<span class="sd">            If a username or invite link is given, **the library will</span>
<span class="sd">            use the cache**. This means that it's possible to be using</span>
<span class="sd">            a username that *changed* or an old invite link (this only</span>
<span class="sd">            happens if an invite link for a small group chat is used</span>
<span class="sd">            after it was upgraded to a mega-group).</span>

<span class="sd">            If the username or ID from the invite link is not found in</span>
<span class="sd">            the cache, it will be fetched. The same rules apply to phone</span>
<span class="sd">            numbers (``'+34 123456789'``) from people in your contact list.</span>

<span class="sd">            If an exact name is given, it must be in the cache too. This</span>
<span class="sd">            is not reliable as different people can share the same name</span>
<span class="sd">            and which entity is returned is arbitrary, and should be used</span>
<span class="sd">            only for quick tests.</span>

<span class="sd">            If a positive integer ID is given, the entity will be searched</span>
<span class="sd">            in cached users, chats or channels, without making any call.</span>

<span class="sd">            If a negative integer ID is given, the entity will be searched</span>
<span class="sd">            exactly as either a chat (prefixed with ``-``) or as a channel</span>
<span class="sd">            (prefixed with ``-100``).</span>

<span class="sd">            If a :tl:`Peer` is given, it will be searched exactly in the</span>
<span class="sd">            cache as either a user, chat or channel.</span>

<span class="sd">            If the given object can be turned into an input entity directly,</span>
<span class="sd">            said operation will be done.</span>

<span class="sd">            Unsupported types will raise ``TypeError``.</span>

<span class="sd">            If the entity can't be found, ``ValueError`` will be raised.</span>

<span class="sd">    Returns</span>
<span class="sd">        :tl:`InputPeerUser`, :tl:`InputPeerChat` or :tl:`InputPeerChannel`</span>
<span class="sd">        or :tl:`InputPeerSelf` if the parameter is ``'me'`` or ``'self'``.</span>

<span class="sd">        If you need to get the ID of yourself, you should use</span>
<span class="sd">        `get_me` with ``input_peer=True``) instead.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            # If you're going to use "username" often in your code</span>
<span class="sd">            # (make a lot of calls), consider getting its input entity</span>
<span class="sd">            # once, and then using the "user" everywhere instead.</span>
<span class="sd">            user = await client.get_input_entity('username')</span>

<span class="sd">            # The same applies to IDs, chats or channels.</span>
<span class="sd">            chat = await client.get_input_entity(-123456789)</span>
<span class="sd">    """</span>
    <span class="c1"># Short-circuit if the input parameter directly maps to an InputPeer</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_input_peer</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># Next in priority is having a peer (or its ID) cached in-memory</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># 0x2d45687 == crc32(b'Peer')</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">peer</span><span class="o">.</span><span class="n">SUBCLASS_OF_ID</span> <span class="o">==</span> <span class="mh">0x2d45687</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_entity_cache</span><span class="p">[</span><span class="n">peer</span><span class="p">]</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="c1"># Then come known strings that take precedence</span>
    <span class="k">if</span> <span class="n">peer</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">'me'</span><span class="p">,</span> <span class="s1">'self'</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerSelf</span><span class="p">()</span>

    <span class="c1"># No InputPeer, cached peer, or known string. Fetch from disk cache</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="c1"># Only network left to try</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_input_peer</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_entity_from_string</span><span class="p">(</span><span class="n">peer</span><span class="p">))</span>

    <span class="c1"># If we're a bot and the user has messaged us privately users.getUsers</span>
    <span class="c1"># will work with access_hash = 0. Similar for channels.getChannels.</span>
    <span class="c1"># If we're not a bot but the user is in our contacts, it seems to work</span>
    <span class="c1"># regardless. These are the only two special-cased requests.</span>
    <span class="n">peer</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_peer</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerUser</span><span class="p">):</span>
        <span class="n">users</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">GetUsersRequest</span><span class="p">([</span>
            <span class="n">types</span><span class="o">.</span><span class="n">InputUser</span><span class="p">(</span><span class="n">peer</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span> <span class="n">access_hash</span><span class="o">=</span><span class="mi">0</span><span class="p">)]))</span>
        <span class="k">if</span> <span class="n">users</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">users</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">types</span><span class="o">.</span><span class="n">UserEmpty</span><span class="p">):</span>
            <span class="c1"># If the user passed a valid ID they expect to work for</span>
            <span class="c1"># channels but would be valid for users, we get UserEmpty.</span>
            <span class="c1"># Avoid returning the invalid empty input peer for that.</span>
            <span class="c1">#</span>
            <span class="c1"># We *could* try to guess if it's a channel first, and if</span>
            <span class="c1"># it's not, work as a chat and try to validate it through</span>
            <span class="c1"># another request, but that becomes too much work.</span>
            <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_input_peer</span><span class="p">(</span><span class="n">users</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerChat</span><span class="p">(</span><span class="n">peer</span><span class="o">.</span><span class="n">chat_id</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">channels</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">channels</span><span class="o">.</span><span class="n">GetChannelsRequest</span><span class="p">([</span>
                <span class="n">types</span><span class="o">.</span><span class="n">InputChannel</span><span class="p">(</span><span class="n">peer</span><span class="o">.</span><span class="n">channel_id</span><span class="p">,</span> <span class="n">access_hash</span><span class="o">=</span><span class="mi">0</span><span class="p">)]))</span>
            <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_input_peer</span><span class="p">(</span><span class="n">channels</span><span class="o">.</span><span class="n">chats</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">ChannelInvalidError</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
        <span class="s1">'Could not find the input entity for </span><span class="si">{!r}</span><span class="s1">. Please read https://'</span>
        <span class="s1">'docs.telethon.dev/en/latest/concepts/entities.html to'</span>
        <span class="s1">' find out more details.'</span>
        <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.users.UserMethods.get_me">
<code class="highlight language-python">
get_me<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_peer</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.users.UserMethods.get_me" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Gets "me", the current :tl:<code>User</code> who is logged in.</p>
<p>If the user has not logged in yet, this method returns <code>None</code>.</p>
<p>Arguments
    input_peer (<code>bool</code>, optional):
        Whether to return the :tl:<code>InputPeerUser</code> version or the normal
        :tl:<code>User</code>. This can be useful if you just need to know the ID
        of yourself.</p>
<p>Returns
    Your own :tl:<code>User</code>.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    me = await client.get_me()</span>
<span class="err">    print(me.username)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\users.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_me</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span> <span class="n">input_peer</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="s1">'typing.Union[types.User, types.InputPeerUser]'</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Gets "me", the current :tl:`User` who is logged in.</span>

<span class="sd">    If the user has not logged in yet, this method returns `None`.</span>

<span class="sd">    Arguments</span>
<span class="sd">        input_peer (`bool`, optional):</span>
<span class="sd">            Whether to return the :tl:`InputPeerUser` version or the normal</span>
<span class="sd">            :tl:`User`. This can be useful if you just need to know the ID</span>
<span class="sd">            of yourself.</span>

<span class="sd">    Returns</span>
<span class="sd">        Your own :tl:`User`.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            me = await client.get_me()</span>
<span class="sd">            print(me.username)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">input_peer</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_self_input_peer</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_self_input_peer</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">me</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="p">(</span>
            <span class="n">functions</span><span class="o">.</span><span class="n">users</span><span class="o">.</span><span class="n">GetUsersRequest</span><span class="p">([</span><span class="n">types</span><span class="o">.</span><span class="n">InputUserSelf</span><span class="p">()])))[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_bot</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">bot</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_self_input_peer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_self_input_peer</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_input_peer</span><span class="p">(</span>
                <span class="n">me</span><span class="p">,</span> <span class="n">allow_self</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_self_input_peer</span> <span class="k">if</span> <span class="n">input_peer</span> <span class="k">else</span> <span class="n">me</span>
    <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">UnauthorizedError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.users.UserMethods.get_peer_id">
<code class="highlight language-python">
get_peer_id<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">peer</span><span class="p">,</span> <span class="n">add_mark</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.users.UserMethods.get_peer_id" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Gets the ID for the given entity.</p>
<p>This method needs to be <code>async</code> because <code>peer</code> supports usernames,
invite-links, phone numbers (from people in your contact list), etc.</p>
<p>If <code>add_mark is False</code>, then a positive ID will be returned
instead. By default, bot-API style IDs (signed) are returned.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    print(await client.get_peer_id('me'))</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\users.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_peer_id</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">,</span>
        <span class="n">peer</span><span class="p">:</span> <span class="s1">'hints.EntityLike'</span><span class="p">,</span>
        <span class="n">add_mark</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Gets the ID for the given entity.</span>

<span class="sd">    This method needs to be ``async`` because `peer` supports usernames,</span>
<span class="sd">    invite-links, phone numbers (from people in your contact list), etc.</span>

<span class="sd">    If ``add_mark is False``, then a positive ID will be returned</span>
<span class="sd">    instead. By default, bot-API style IDs (signed) are returned.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            print(await client.get_peer_id('me'))</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="n">add_mark</span><span class="o">=</span><span class="n">add_mark</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">peer</span><span class="o">.</span><span class="n">SUBCLASS_OF_ID</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="mh">0x2d45687</span><span class="p">,</span> <span class="mh">0xc91c90b6</span><span class="p">):</span>
            <span class="c1"># 0x2d45687, 0xc91c90b6 == crc32(b'Peer') and b'InputPeer'</span>
            <span class="n">peer</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">peer</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_entity</span><span class="p">(</span><span class="n">peer</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputPeerSelf</span><span class="p">):</span>
        <span class="n">peer</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_me</span><span class="p">(</span><span class="n">input_peer</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span> <span class="n">add_mark</span><span class="o">=</span><span class="n">add_mark</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.users.UserMethods.is_bot">
<code class="highlight language-python">
is_bot<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.users.UserMethods.is_bot" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Return <code>True</code> if the signed-in user is a bot, <code>False</code> otherwise.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    if await client.is_bot():</span>
<span class="err">        print('Beep')</span>
<span class="err">    !!! else</span>
<span class="err">        print('Hello')</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\users.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">is_bot</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Return `True` if the signed-in user is a bot, `False` otherwise.</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            if await client.is_bot():</span>
<span class="sd">                print('Beep')</span>
<span class="sd">            else:</span>
<span class="sd">                print('Hello')</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bot</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_bot</span> <span class="o">=</span> <span class="p">(</span><span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_me</span><span class="p">())</span><span class="o">.</span><span class="n">bot</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_bot</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.client.users.UserMethods.is_user_authorized">
<code class="highlight language-python">
is_user_authorized<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.client.users.UserMethods.is_user_authorized" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns <code>True</code> if the user is authorized (logged in).</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">    if not await client.is_user_authorized():</span>
<span class="err">        await client.send_code_request(phone)</span>
<span class="err">        code = input('enter code: ')</span>
<span class="err">        await client.sign_in(phone, code)</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\client\users.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">is_user_authorized</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="s1">'TelegramClient'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `True` if the user is authorized (logged in).</span>

<span class="sd">    Example</span>
<span class="sd">        .. code-block:: python</span>

<span class="sd">            if not await client.is_user_authorized():</span>
<span class="sd">                await client.send_code_request(phone)</span>
<span class="sd">                code = input('enter code: ')</span>
<span class="sd">                await client.sign_in(phone, code)</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_authorized</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Any request that requires authorization will work</span>
            <span class="k">await</span> <span class="bp">self</span><span class="p">(</span><span class="n">functions</span><span class="o">.</span><span class="n">updates</span><span class="o">.</span><span class="n">GetStateRequest</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_authorized</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">errors</span><span class="o">.</span><span class="n">RPCError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_authorized</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_authorized</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../../misc/compatibility-and-convenience/" rel="prev" title="Compatibility and Convenience">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Compatibility and Convenience
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../events/" rel="next" title="Update Events">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Update Events
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 Telethon
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://github.com/LonamiWebs/Telethon" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://t.me/TelethonChat" rel="noopener" target="_blank" title="t.me">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
<script src="../../assets/javascripts/bundle.5f27aba8.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "../..",
          features: ["instant", "tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>