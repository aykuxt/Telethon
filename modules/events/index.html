
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://aykuxt.github.io/Telethon/modules/events/" rel="canonical"/>
<link href="../../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-5.2.2" name="generator"/>
<title>Update Events - Telethon Docs</title>
<link href="../../assets/stylesheets/main.a2408e81.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.a46bcfb3.min.css" rel="stylesheet"/>
<meta content="#3f51b5" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
<link href="../../assets/css/custom.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="amber" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#update-events">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="Telethon Docs" class="md-header-nav__button md-logo" href="https://aykuxt.github.io/Telethon/" title="Telethon Docs">
<img alt="logo" src="../../assets/images/nav-logo.svg"/>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            Telethon Docs
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              Update Events
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/LonamiWebs/Telethon/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    LonamiWebs/Telethon
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
          First Steps
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../quick-references/faq/">
          Quick References
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../concepts/strings/">
          Concepts
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../developing/philosophy/">
          Developing
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../examples/word-of-warning/">
          Full API Examples
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../misc/changelog/">
          Miscellaneous
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../client/">
          Modules
        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Telethon Docs" class="md-nav__button md-logo" href="https://aykuxt.github.io/Telethon/" title="Telethon Docs">
<img alt="logo" src="../../assets/images/nav-logo.svg"/>
</a>
    Telethon Docs
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/LonamiWebs/Telethon/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    LonamiWebs/Telethon
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" id="nav-1" type="checkbox"/>
<label class="md-nav__link" for="nav-1">
      First Steps
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="First Steps" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-1">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        First Steps
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../.." title="Getting Started">
      Getting Started
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/installation/" title="Installation">
      Installation
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/signing-in/" title="Signing In">
      Signing In
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/quick-start/" title="Quick-Start">
      Quick-Start
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/updates/" title="Updates">
      Updates
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../basic/next-steps/" title="Next Steps">
      Next Steps
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Quick References
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Quick References" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-2">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Quick References
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quick-references/faq/" title="FAQ">
      FAQ
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../quick-references/events-reference/" title="Events Reference">
      Events Reference
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      Concepts
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Concepts" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-3">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Concepts
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/strings/" title="String-based Debugging">
      String-based Debugging
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/entities/" title="Entities">
      Entities
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/updates/" title="Updates in Depth">
      Updates in Depth
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/sessions/" title="Session Files">
      Session Files
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/full-api/" title="The Full API">
      The Full API
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/errors/" title="RPC Errors">
      RPC Errors
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/botapi-vs-mtproto/" title="HTTP Bot API vs MTProto">
      HTTP Bot API vs MTProto
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../concepts/asyncio/" title="Mastering asyncio">
      Mastering asyncio
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Developing
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Developing" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-4">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Developing
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/philosophy/" title="Philosophy">
      Philosophy
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/test-servers/" title="Test Servers">
      Test Servers
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/project-structure/" title="Project Structure">
      Project Structure
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/coding-style/" title="Coding Style">
      Coding Style
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/testing/" title="Tests">
      Tests
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/understanding-the-type-language/" title="Understanding the Type Language">
      Understanding the Type Language
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/tips-for-porting-the-project/" title="Tips for Porting the Project">
      Tips for Porting the Project
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../developing/telegram-api-in-other-languages/" title="Telegram API in Other Languages">
      Telegram API in Other Languages
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" id="nav-5" type="checkbox"/>
<label class="md-nav__link" for="nav-5">
      Full API Examples
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Full API Examples" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-5">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Full API Examples
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/word-of-warning/" title="A Word of Warning">
      A Word of Warning
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/chats-and-channels/" title="Working with Chats and Channels">
      Working with Chats and Channels
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/users/" title="Users">
      Users
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/working-with-messages/" title="Working with messages">
      Working with messages
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../examples/projects-using-telethon/" title="Projects using Telethon">
      Projects using Telethon
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" id="nav-6" type="checkbox"/>
<label class="md-nav__link" for="nav-6">
      Miscellaneous
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Miscellaneous" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-6">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Miscellaneous
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../misc/changelog/" title="Changelog (Version History)">
      Changelog (Version History)
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../misc/wall-of-shame/" title="Wall of Shame">
      Wall of Shame
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../misc/compatibility-and-convenience/" title="Compatibility and Convenience">
      Compatibility and Convenience
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-7" id="nav-7" type="checkbox"/>
<label class="md-nav__link" for="nav-7">
      Modules
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Modules" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-7">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Modules
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../client/" title="TelegramClient">
      TelegramClient
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        Update Events
        <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg>
</span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="Update Events">
      Update Events
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common">
    telethon.events.common
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder">
    EventBuilder
  </a>
<nav aria-label="EventBuilder" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder.filter">
    filter()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder.resolve">
    resolve()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventCommon">
    EventCommon
  </a>
<nav aria-label="EventCommon" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventCommon.client">
    client
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.name_inner_event">
    name_inner_event()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage">
    telethon.events.newmessage
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage">
    NewMessage
  </a>
<nav aria-label="NewMessage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage.Event">
    Event
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction">
    telethon.events.chataction
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction">
    ChatAction
  </a>
<nav aria-label="ChatAction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.added_by">
    added_by
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.input_user">
    input_user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.input_users">
    input_users
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.kicked_by">
    kicked_by
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.user">
    user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.user_id">
    user_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.user_ids">
    user_ids
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.users">
    users
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.delete">
    delete()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_added_by">
    get_added_by()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_input_user">
    get_input_user()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_input_users">
    get_input_users()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_kicked_by">
    get_kicked_by()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_pinned_message">
    get_pinned_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_user">
    get_user()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_users">
    get_users()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.reply">
    reply()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.respond">
    respond()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate">
    telethon.events.userupdate
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate">
    UserUpdate
  </a>
<nav aria-label="UserUpdate" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.audio">
    audio
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.cancel">
    cancel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.contact">
    contact
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.document">
    document
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.geo">
    geo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.input_user">
    input_user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.last_seen">
    last_seen
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.online">
    online
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.photo">
    photo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.playing">
    playing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.recently">
    recently
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.recording">
    recording
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.round">
    round
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.typing">
    typing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.until">
    until
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.uploading">
    uploading
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.user">
    user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.user_id">
    user_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.video">
    video
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.within_months">
    within_months
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.within_weeks">
    within_weeks
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.get_input_user">
    get_input_user()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.get_user">
    get_user()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageedited">
    telethon.events.messageedited
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageedited.MessageEdited">
    MessageEdited
  </a>
<nav aria-label="MessageEdited" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageedited.MessageEdited.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messagedeleted">
    telethon.events.messagedeleted
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messagedeleted.MessageDeleted">
    MessageDeleted
  </a>
<nav aria-label="MessageDeleted" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messagedeleted.MessageDeleted.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread">
    telethon.events.messageread
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead">
    MessageRead
  </a>
<nav aria-label="MessageRead" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.inbox">
    inbox
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.message_ids">
    message_ids
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.__contains__">
    __contains__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.get_messages">
    get_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.is_read">
    is_read()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery">
    telethon.events.callbackquery
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery">
    CallbackQuery
  </a>
<nav aria-label="CallbackQuery" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.chat_instance">
    chat_instance
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.data">
    data
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.id">
    id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.message_id">
    message_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.via_inline">
    via_inline
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.answer">
    answer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.delete">
    delete()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.edit">
    edit()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.get_message">
    get_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.reply">
    reply()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.respond">
    respond()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery">
    telethon.events.inlinequery
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery">
    InlineQuery
  </a>
<nav aria-label="InlineQuery" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.builder">
    builder
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.geo">
    geo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.id">
    id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.offset">
    offset
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.text">
    text
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.answer">
    answer()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album">
    telethon.events.album
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album">
    Album
  </a>
<nav aria-label="Album" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.forward">
    forward
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.grouped_id">
    grouped_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.is_reply">
    is_reply
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.raw_text">
    raw_text
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.text">
    text
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.__getitem__">
    __getitem__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.__iter__">
    __iter__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.__len__">
    __len__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.delete">
    delete()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.edit">
    edit()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.forward_to">
    forward_to()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.get_reply_message">
    get_reply_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.mark_read">
    mark_read()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.pin">
    pin()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.reply">
    reply()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.respond">
    respond()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.AlbumHack">
    AlbumHack
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw">
    telethon.events.raw
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw">
    Raw
  </a>
<nav aria-label="Raw" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw.filter">
    filter()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw.resolve">
    resolve()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events">
    telethon.events
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.StopPropagation">
    StopPropagation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.is_handler">
    is_handler()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.list">
    list()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.register">
    register()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../custom/" title="Custom package">
      Custom package
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../utils/" title="Utilities">
      Utilities
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../errors/" title="API Errors">
      API Errors
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../sessions/" title="Sessions">
      Sessions
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../network/" title="Connection Modes">
      Connection Modes
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../helpers/" title="Helpers">
      Helpers
    </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common">
    telethon.events.common
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder">
    EventBuilder
  </a>
<nav aria-label="EventBuilder" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder.filter">
    filter()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventBuilder.resolve">
    resolve()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventCommon">
    EventCommon
  </a>
<nav aria-label="EventCommon" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.EventCommon.client">
    client
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.common.name_inner_event">
    name_inner_event()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage">
    telethon.events.newmessage
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage">
    NewMessage
  </a>
<nav aria-label="NewMessage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage.Event">
    Event
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.newmessage.NewMessage.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction">
    telethon.events.chataction
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction">
    ChatAction
  </a>
<nav aria-label="ChatAction" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.added_by">
    added_by
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.input_user">
    input_user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.input_users">
    input_users
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.kicked_by">
    kicked_by
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.user">
    user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.user_id">
    user_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.user_ids">
    user_ids
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.users">
    users
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.delete">
    delete()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_added_by">
    get_added_by()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_input_user">
    get_input_user()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_input_users">
    get_input_users()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_kicked_by">
    get_kicked_by()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_pinned_message">
    get_pinned_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_user">
    get_user()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.get_users">
    get_users()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.reply">
    reply()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.Event.respond">
    respond()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.chataction.ChatAction.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate">
    telethon.events.userupdate
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate">
    UserUpdate
  </a>
<nav aria-label="UserUpdate" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.audio">
    audio
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.cancel">
    cancel
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.contact">
    contact
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.document">
    document
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.geo">
    geo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.input_user">
    input_user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.last_seen">
    last_seen
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.online">
    online
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.photo">
    photo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.playing">
    playing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.recently">
    recently
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.recording">
    recording
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.round">
    round
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.typing">
    typing
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.until">
    until
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.uploading">
    uploading
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.user">
    user
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.user_id">
    user_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.video">
    video
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.within_months">
    within_months
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.within_weeks">
    within_weeks
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.get_input_user">
    get_input_user()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.Event.get_user">
    get_user()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.userupdate.UserUpdate.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageedited">
    telethon.events.messageedited
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageedited.MessageEdited">
    MessageEdited
  </a>
<nav aria-label="MessageEdited" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageedited.MessageEdited.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messagedeleted">
    telethon.events.messagedeleted
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messagedeleted.MessageDeleted">
    MessageDeleted
  </a>
<nav aria-label="MessageDeleted" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messagedeleted.MessageDeleted.build">
    build()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread">
    telethon.events.messageread
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead">
    MessageRead
  </a>
<nav aria-label="MessageRead" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.inbox">
    inbox
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.message_ids">
    message_ids
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.__contains__">
    __contains__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.get_messages">
    get_messages()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.Event.is_read">
    is_read()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.messageread.MessageRead.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery">
    telethon.events.callbackquery
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery">
    CallbackQuery
  </a>
<nav aria-label="CallbackQuery" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.chat_instance">
    chat_instance
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.data">
    data
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.id">
    id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.message_id">
    message_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.via_inline">
    via_inline
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.answer">
    answer()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.delete">
    delete()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.edit">
    edit()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.get_message">
    get_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.reply">
    reply()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.Event.respond">
    respond()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.callbackquery.CallbackQuery.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery">
    telethon.events.inlinequery
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery">
    InlineQuery
  </a>
<nav aria-label="InlineQuery" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.builder">
    builder
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.geo">
    geo
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.id">
    id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.offset">
    offset
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.text">
    text
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.Event.answer">
    answer()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.inlinequery.InlineQuery.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album">
    telethon.events.album
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album">
    Album
  </a>
<nav aria-label="Album" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event">
    Event
  </a>
<nav aria-label="Event" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.forward">
    forward
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.grouped_id">
    grouped_id
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.is_reply">
    is_reply
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.raw_text">
    raw_text
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.text">
    text
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.__getitem__">
    __getitem__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.__iter__">
    __iter__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.__len__">
    __len__()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.delete">
    delete()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.edit">
    edit()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.forward_to">
    forward_to()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.get_reply_message">
    get_reply_message()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.mark_read">
    mark_read()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.pin">
    pin()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.reply">
    reply()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.Event.respond">
    respond()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.Album.filter">
    filter()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.album.AlbumHack">
    AlbumHack
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw">
    telethon.events.raw
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw">
    Raw
  </a>
<nav aria-label="Raw" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw.build">
    build()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw.filter">
    filter()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.raw.Raw.resolve">
    resolve()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events">
    telethon.events
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.StopPropagation">
    StopPropagation
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.is_handler">
    is_handler()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.list">
    list()
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#telethon.events.register">
    register()
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/LonamiWebs/Telethon/edit/master/docs/modules/events.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="update-events">Update Events<a class="headerlink" href="#update-events" title="Permanent link">¶</a></h1>
<p>Every event (builder) subclasses <code>common.EventBuilder</code>,
so all the methods in it can be used from any event builder/event instance.</p>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.common" id="telethon.events.common" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.common" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.common.EventBuilder">
<code>EventBuilder</code>
<a class="headerlink" href="#telethon.events.common.EventBuilder" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>The common event builder, with builtin support to filter per chat.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>chats</code></td>
<td><code>`entity`</code></td>
<td>
<p>May be one or more entities (username/peer/etc.), preferably IDs.
By default, only matching chats will be handled.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>blacklist_chats</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether to treat the chats as a blacklist instead of
as a whitelist (default). This means that every chat
will be handled <em>except</em> those specified in <code>chats</code>
which will be ignored if <code>blacklist_chats=True</code>.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>func</code></td>
<td><code>`callable`</code></td>
<td>
<p>A callable (async or not) function that should accept the event as input
parameter, and return a value indicating whether the event
should be dispatched or not (any truthy value will do, it
does not need to be a <code>bool</code>). It works like a custom filter:</p>
<p>.. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">@client.on(events.NewMessage(func=lambda e: e.is_private))</span>
<span class="err">async def handler(event):</span>
<span class="err">    pass  # code here</span>
</code></pre>
</div>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.common.EventBuilder.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.common.EventBuilder.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>76
77
78
79
80
81
82
83
84
85
86
87</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Builds an event for the given update if possible, or returns None.</span>

<span class="sd">    `others` are the rest of updates that came in the same container</span>
<span class="sd">    as the current `update`.</span>

<span class="sd">    `self_id` should be the current user's ID, since it is required</span>
<span class="sd">    for some events which lack this information but still need it.</span>
<span class="sd">    """</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.common.EventBuilder.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.common.EventBuilder.filter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns a truthy value if the event passed the filter and should be</span>
<span class="sd">    used, or falsy otherwise. The return value may need to be awaited.</span>

<span class="sd">    The events must have been resolved before this can be called.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Note: the `event.chat_id` property checks if it's `None` for us</span>
        <span class="n">inside</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span>
        <span class="k">if</span> <span class="n">inside</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">blacklist_chats</span><span class="p">:</span>
            <span class="c1"># If this chat matches but it's a blacklist ignore.</span>
            <span class="c1"># If it doesn't match but it's a whitelist ignore.</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># Return the result of func directly as it may need to be awaited</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.common.EventBuilder.resolve">
<code class="highlight language-python">
resolve<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.common.EventBuilder.resolve" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Helper method to allow event builders to be resolved before usage</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
    <span class="sd">"""Helper method to allow event builders to be resolved before usage"""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">(</span><span class="n">loop</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_lock</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.common.EventCommon">
<code>EventCommon</code>
<a class="headerlink" href="#telethon.events.common.EventCommon" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Intermediate class with common things to all events.</p>
<p>Remember that this class implements <code>ChatGetter
&lt;telethon.tl.custom.chatgetter.ChatGetter&gt;</code> which
means you have access to all chat properties and methods.</p>
<p>In addition, you can access the <code>original_update</code>
field which contains the original :tl:<code>Update</code>.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h3 class="doc doc-heading" id="telethon.events.common.EventCommon.client">
<code class="highlight">
client        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.common.EventCommon.client" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>The <code>telethon.TelegramClient</code> that created this event.</p>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="telethon.events.common.name_inner_event">
<code class="highlight language-python">
name_inner_event<span class="p">(</span><span class="bp">cls</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.common.name_inner_event" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Decorator to rename cls.Event 'Event' as 'cls.Event'</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>181
182
183
184
185
186
187</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">name_inner_event</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">"""Decorator to rename cls.Event 'Event' as 'cls.Event'"""</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">'Event'</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">_event_name</span> <span class="o">=</span> <span class="s1">'</span><span class="si">{}</span><span class="s1">.Event'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">'Class </span><span class="si">{}</span><span class="s1"> does not have a inner Event'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">cls</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.newmessage" id="telethon.events.newmessage" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.newmessage" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.newmessage.NewMessage">
<code>NewMessage</code>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever a new text message or a message with media arrives.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>incoming</code></td>
<td><code>`bool`</code></td>
<td>
<p>If set to <code>True</code>, only <strong>incoming</strong> messages will be handled.
Mutually exclusive with <code>outgoing</code> (can only set one of either).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>outgoing</code></td>
<td><code>`bool`</code></td>
<td>
<p>If set to <code>True</code>, only <strong>outgoing</strong> messages will be handled.
Mutually exclusive with <code>incoming</code> (can only set one of either).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>from_users</code></td>
<td><code>`entity`</code></td>
<td>
<p>Unlike <code>chats</code>, this parameter filters the <em>senders</em> of the
message. That is, only messages <em>sent by these users</em> will be
handled. Use <code>chats</code> if you want private messages with this/these
users. <code>from_users</code> lets you filter by messages sent by <em>one or
more</em> users across the desired chats (doesn't need a list).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>forwards</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether forwarded messages should be handled or not. By default,
both forwarded and normal messages are included. If it's <code>True</code>
<em>only</em> forwards will be handled. If it's <code>False</code> only messages
that are <em>not</em> forwards will be handled.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>pattern</code></td>
<td><code>`str`, `callable`, `Pattern`</code></td>
<td>
<p>If set, only messages matching this pattern will be handled.
You can specify a regex-like string which will be matched
against the message, a callable function that returns <code>True</code>
if a message is acceptable, or a compiled regex pattern.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">import</span> <span class="nn">asyncio</span>
    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s1">'(?i)hello.+'</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Respond whenever someone says "Hello" and something else</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">'Hey!'</span><span class="p">)</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="n">outgoing</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s1">'!ping'</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Say "!pong" whenever you send "!ping", then delete both messages</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">'!pong'</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">chat_id</span><span class="p">,</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">id</span><span class="p">])</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.newmessage.NewMessage.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage.Event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Represents the event of a new message. This event can be treated
to all effects as a <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>,
so please <strong>refer to its documentation</strong> to know what you can do
with this event.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>message (<code>Message &lt;telethon.tl.custom.message.Message&gt;</code>):
    This is the only difference with the received
    <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>, and will
    return the <code>telethon.tl.custom.message.Message</code> itself,
    not the text.</p>
<div class="codehilite">
<pre><span></span><code><span class="err">See `Message &lt;telethon.tl.custom.message.Message&gt;` for</span>
<span class="err">the rest of available members and methods.</span>
</code></pre>
</div>
<p>pattern_match (<code>obj</code>):
    The resulting object from calling the passed <code>pattern</code> function.
    Here's an example using a string (defaults to regex match):</p>
<div class="codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span><span class="p">,</span> <span class="n">events</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">'hi (\w+)!'</span><span class="p">))</span>
<span class="o">...</span> <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
<span class="o">...</span>     <span class="c1"># In this case, the result is a ``Match`` object</span>
<span class="o">...</span>     <span class="c1"># since the `str` pattern was converted into</span>
<span class="o">...</span>     <span class="c1"># the ``re.compile(pattern).match`` function.</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="s1">'Welcomed'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre>
</div>
</div>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.newmessage.NewMessage.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\newmessage.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span>
                  <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">)):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># We don't care about MessageService's here</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateShortMessage</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span>
            <span class="n">out</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
            <span class="n">mentioned</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">mentioned</span><span class="p">,</span>
            <span class="n">media_unread</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">media_unread</span><span class="p">,</span>
            <span class="n">silent</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">silent</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="c1"># Note that to_id/from_id complement each other in private</span>
            <span class="c1"># messages, depending on whether the message was outgoing.</span>
            <span class="n">to_id</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">PeerUser</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span> <span class="k">if</span> <span class="n">update</span><span class="o">.</span><span class="n">out</span> <span class="k">else</span> <span class="n">self_id</span><span class="p">),</span>
            <span class="n">from_id</span><span class="o">=</span><span class="n">self_id</span> <span class="k">if</span> <span class="n">update</span><span class="o">.</span><span class="n">out</span> <span class="k">else</span> <span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
            <span class="n">date</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="n">fwd_from</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">,</span>
            <span class="n">via_bot_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">via_bot_id</span><span class="p">,</span>
            <span class="n">reply_to_msg_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">entities</span>
        <span class="p">))</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateShortChatMessage</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span>
            <span class="n">out</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
            <span class="n">mentioned</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">mentioned</span><span class="p">,</span>
            <span class="n">media_unread</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">media_unread</span><span class="p">,</span>
            <span class="n">silent</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">silent</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">from_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
            <span class="n">to_id</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
            <span class="n">message</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
            <span class="n">date</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="n">fwd_from</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">,</span>
            <span class="n">via_bot_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">via_bot_id</span><span class="p">,</span>
            <span class="n">reply_to_msg_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">entities</span>
        <span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Make messages sent to ourselves outgoing unless they're forwarded.</span>
    <span class="c1"># This makes it consistent with official client's appearance.</span>
    <span class="n">ori</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ori</span><span class="o">.</span><span class="n">to_id</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerUser</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ori</span><span class="o">.</span><span class="n">from_id</span> <span class="o">==</span> <span class="n">ori</span><span class="o">.</span><span class="n">to_id</span><span class="o">.</span><span class="n">user_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">ori</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="n">event</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.newmessage.NewMessage.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage.filter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\newmessage.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_no_check</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">event</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">incoming</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">out</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">outgoing</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">out</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">forwards</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forwards</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">):</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_users</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">from_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_users</span><span class="p">:</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">message</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span> <span class="o">=</span> <span class="n">match</span>

    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.chataction" id="telethon.events.chataction" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.chataction" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.chataction.ChatAction">
<code>ChatAction</code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs on certain chat actions:</p>
<ul>
<li>Whenever a new chat is created.</li>
<li>Whenever a chat's title or photo is changed or removed.</li>
<li>Whenever a new message is pinned.</li>
<li>Whenever a user joins or is added to the group.</li>
<li>Whenever a user is removed or leaves a group if it has
  less than 50 members or the removed user was a bot.</li>
</ul>
<p>Note that "chat" refers to "small group, megagroup and broadcast
channel", whereas "group" refers to "small group and megagroup" only.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">ChatAction</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Welcome every new user</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">user_joined</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">'Welcome to the group!'</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Represents the event of a new chat action.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>action_message  (<code>MessageAction &lt;https://tl.telethon.dev/types/message_action.html&gt;</code>_):
    The message invoked by this Chat Action.</p>
<p>new_pin (<code>bool</code>):
    <code>True</code> if there is a new pin.</p>
<p>new_photo (<code>bool</code>):
    <code>True</code> if there's a new chat photo (or it was removed).</p>
<p>photo (:tl:<code>Photo</code>, optional):
    The new photo (or <code>None</code> if it was removed).</p>
<p>user_added (<code>bool</code>):
    <code>True</code> if the user was added by some other.</p>
<p>user_joined (<code>bool</code>):
    <code>True</code> if the user joined on their own.</p>
<p>user_left (<code>bool</code>):
    <code>True</code> if the user left on their own.</p>
<p>user_kicked (<code>bool</code>):
    <code>True</code> if the user was kicked by some other.</p>
<p>created (<code>bool</code>, optional):
    <code>True</code> if this chat was just created.</p>
<p>new_title (<code>str</code>, optional):
    The new title string for the chat, if applicable.</p>
<p>unpin (<code>bool</code>):
    <code>True</code> if the existing pin gets unpinned.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.added_by">
<code class="highlight">
added_by        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.added_by" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The user who added <code>users</code>, if applicable (<code>None</code> otherwise).</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.input_user">
<code class="highlight">
input_user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.input_user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Input version of the <code>self.user</code> property.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.input_users">
<code class="highlight">
input_users        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.input_users" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Input version of the <code>self.users</code> property.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.kicked_by">
<code class="highlight">
kicked_by        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.kicked_by" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The user who kicked <code>users</code>, if applicable (<code>None</code> otherwise).</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.user">
<code class="highlight">
user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The first user that takes part in this action. For example, who joined.</p>
<p>Might be <code>None</code> if the information can't be retrieved or
there is no user taking part.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.user_id">
<code class="highlight">
user_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.user_id" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the marked signed ID of the first user, if any.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.user_ids">
<code class="highlight">
user_ids        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.user_ids" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the marked signed ID of the users, if any.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.users">
<code class="highlight">
users        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.users" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>A list of users that take part in this action. For example, who joined.</p>
<p>Might be empty if the information can't be retrieved or there
are no users taking part.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.delete">
<code class="highlight language-python">
delete<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.delete" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Deletes the chat action message. You're responsible for checking
whether you have the permission to do so, or to except the error
otherwise. Shorthand for
<code>telethon.client.messages.MessageMethods.delete_messages</code> with
<code>entity</code> and <code>message_ids</code> already set.</p>
<p>Does nothing if no message action triggered this event.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes the chat action message. You're responsible for checking</span>
<span class="sd">    whether you have the permission to do so, or to except the error</span>
<span class="sd">    otherwise. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.delete_messages` with</span>
<span class="sd">    ``entity`` and ``message_ids`` already set.</span>

<span class="sd">    Does nothing if no message action triggered this event.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">],</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_added_by">
<code class="highlight language-python">
get_added_by<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_added_by" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns <code>added_by</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>282
283
284
285
286
287
288
289</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_added_by</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `added_by` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">added_by</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_entity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_input_user">
<code class="highlight language-python">
get_input_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_input_user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns <code>input_user</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>338
339
340
341
342
343</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `input_user` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_users</span> <span class="ow">or</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_users</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_input_users">
<code class="highlight language-python">
get_input_users<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_input_users" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns <code>input_users</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>413
414
415
416
417
418
419
420
421
422
423
424
425
426
427</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `input_users` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># Note: we access the property first so that it fills if needed</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_users</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">))</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">get_input_peer</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">action_entities</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UserEmpty</span><span class="p">))]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span> <span class="ow">or</span> <span class="p">[]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_kicked_by">
<code class="highlight language-python">
get_kicked_by<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_kicked_by" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns <code>kicked_by</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>303
304
305
306
307
308
309
310</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_kicked_by</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `kicked_by` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">kicked_by</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_entity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_pinned_message">
<code class="highlight language-python">
get_pinned_message<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_pinned_message" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>If <code>new_pin</code> is <code>True</code>, this returns the <code>Message
&lt;telethon.tl.custom.message.Message&gt;</code> object that was pinned.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>254
255
256
257
258
259
260
261
262
263
264
265
266
267
268</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_pinned_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    If ``new_pin`` is `True`, this returns the `Message</span>
<span class="sd">    &lt;telethon.tl.custom.message.Message&gt;` object that was pinned.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>\
            <span class="ow">and</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_input_chat</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_user">
<code class="highlight language-python">
get_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns <code>user</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>323
324
325
326
327
328</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `user` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="ow">or</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_users</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_users">
<code class="highlight language-python">
get_users<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_users" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns <code>users</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>373
374
375
376
377
378
379
380
381
382
383
384
385
386
387</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `users` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># Note: we access the property first so that it fills if needed</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_users</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">))</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">_reload_message</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_users</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">action_entities</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UserEmpty</span><span class="p">))]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_users</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.reply">
<code class="highlight language-python">
reply<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.reply" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Replies to the chat action message (as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
both <code>entity</code> and <code>reply_to</code> already set.</p>
<p>Has the same effect as <code>respond</code> if there is no message.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>221
222
223
224
225
226
227
228
229
230
231
232
233
234</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Replies to the chat action message (as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    both ``entity`` and ``reply_to`` already set.</span>

<span class="sd">    Has the same effect as `respond` if there is no message.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">kwargs</span><span class="p">[</span><span class="s1">'reply_to'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">id</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.respond">
<code class="highlight language-python">
respond<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.respond" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Responds to the chat action message (not as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
<code>entity</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>212
213
214
215
216
217
218
219</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Responds to the chat action message (not as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    ``entity`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.chataction.ChatAction.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChannelPinnedMessage</span><span class="p">)</span> <span class="ow">and</span> <span class="n">update</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Telegram does not always send</span>
        <span class="c1"># UpdateChannelPinnedMessage for new pins</span>
        <span class="c1"># but always for unpin, with update.id = 0</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">unpin</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatPinnedMessage</span><span class="p">)</span> <span class="ow">and</span> <span class="n">update</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
                         <span class="n">unpin</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatParticipantAdd</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
                         <span class="n">added_by</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">inviter_id</span> <span class="ow">or</span> <span class="kc">True</span><span class="p">,</span>
                         <span class="n">users</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatParticipantDelete</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
                         <span class="n">kicked_by</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">users</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChannel</span><span class="p">):</span>
        <span class="c1"># We rely on the fact that update._entities is set by _process_update</span>
        <span class="c1"># This update only has the channel ID, and Telegram *should* have sent</span>
        <span class="c1"># the entity in the Updates.chats list. If it did, check Channel.left</span>
        <span class="c1"># to determine what happened.</span>
        <span class="n">peer</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="n">peer</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ChannelForbidden</span><span class="p">)</span> <span class="ow">or</span> <span class="n">channel</span><span class="o">.</span><span class="n">left</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span>
                                 <span class="n">kicked_by</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span>
                                 <span class="n">added_by</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">elif</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="p">(</span>
            <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">))</span>
          <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageService</span><span class="p">)):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">action</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatJoinedByLink</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">added_by</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatAddUser</span><span class="p">):</span>
            <span class="c1"># If a user adds itself, it means they joined</span>
            <span class="n">added_by</span> <span class="o">=</span> <span class="p">([</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">]</span> <span class="o">==</span> <span class="n">action</span><span class="o">.</span><span class="n">users</span><span class="p">)</span> <span class="ow">or</span> <span class="n">msg</span><span class="o">.</span><span class="n">from_id</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">added_by</span><span class="o">=</span><span class="n">added_by</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatDeleteUser</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">kicked_by</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span> <span class="ow">or</span> <span class="kc">True</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatCreate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">users</span><span class="p">,</span>
                             <span class="n">created</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">new_title</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChannelCreate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">created</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_title</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatEditTitle</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_title</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatEditPhoto</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_photo</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">photo</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatDeletePhoto</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_photo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionPinMessage</span><span class="p">)</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">:</span>
            <span class="c1"># Seems to not be reliable on unpins, but when pinning</span>
            <span class="c1"># we prefer this because we know who caused it.</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_pin</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.userupdate" id="telethon.events.userupdate" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.userupdate" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate">
<code>UserUpdate</code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever a user goes online, starts typing, etc.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">UserUpdate</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># If someone is uploading, say something</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">uploading</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span> <span class="s1">'What are you sending?'</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Represents the event of a user update
such as gone online, started typing, etc.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>status (:tl:<code>UserStatus</code>, optional):
    The user status if the update is about going online or offline.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">You</span> <span class="n">should</span> <span class="k">check</span> <span class="n">this</span> <span class="n">attribute</span> <span class="n">first</span> <span class="k">before</span> <span class="n">checking</span> <span class="n">any</span>
<span class="n">of</span> <span class="n">the</span> <span class="n">seen</span> <span class="n">within</span> <span class="n">properties</span><span class="p">,</span> <span class="n">since</span> <span class="n">they</span> <span class="n">will</span> <span class="k">all</span> <span class="n">be</span> <span class="ss">`None`</span>
<span class="k">if</span> <span class="n">the</span> <span class="n">status</span> <span class="k">is</span> <span class="k">not</span> <span class="kt">set</span><span class="p">.</span>
</code></pre>
</div>
<p>action (:tl:<code>SendMessageAction</code>, optional):
    The "typing" action if any the user is performing if any.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">You</span> <span class="n">should</span> <span class="k">check</span> <span class="n">this</span> <span class="n">attribute</span> <span class="n">first</span> <span class="k">before</span> <span class="n">checking</span> <span class="n">any</span>
<span class="n">of</span> <span class="n">the</span> <span class="n">typing</span> <span class="n">properties</span><span class="p">,</span> <span class="n">since</span> <span class="n">they</span> <span class="n">will</span> <span class="k">all</span> <span class="n">be</span> <span class="ss">`None`</span>
<span class="k">if</span> <span class="n">the</span> <span class="n">action</span> <span class="k">is</span> <span class="k">not</span> <span class="kt">set</span><span class="p">.</span>
</code></pre>
</div>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.audio">
<code class="highlight">
audio        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.audio" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if what's being recorded/uploaded is an audio.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.cancel">
<code class="highlight">
cancel        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.cancel" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the action was cancelling other actions.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.contact">
<code class="highlight">
contact        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.contact" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded (selected) is a contact.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.document">
<code class="highlight">
document        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.document" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded is document.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.geo">
<code class="highlight">
geo        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.geo" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded is a geo.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.input_user">
<code class="highlight">
input_user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.input_user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Alias for <code>input_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.input_sender&gt;</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.last_seen">
<code class="highlight">
last_seen        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.last_seen" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Exact <code>datetime.datetime</code> when the user was last seen if known.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.online">
<code class="highlight">
online        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.online" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the user is currently online,</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.photo">
<code class="highlight">
photo        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.photo" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded is a photo.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.playing">
<code class="highlight">
playing        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.playing" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the action is playing a game.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.recently">
<code class="highlight">
recently        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.recently" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the user was seen within a day.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.recording">
<code class="highlight">
recording        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.recording" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the action is recording something.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.round">
<code class="highlight">
round        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.round" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if what's being recorded/uploaded is a round video.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.typing">
<code class="highlight">
typing        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.typing" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the action is typing a message.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.until">
<code class="highlight">
until        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.until" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The <code>datetime.datetime</code> until when the user should appear online.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.uploading">
<code class="highlight">
uploading        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.uploading" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the action is uploading something.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.user">
<code class="highlight">
user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Alias for <code>sender &lt;telethon.tl.custom.sendergetter.SenderGetter.sender&gt;</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.user_id">
<code class="highlight">
user_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.user_id" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Alias for <code>sender_id &lt;telethon.tl.custom.sendergetter.SenderGetter.sender_id&gt;</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.video">
<code class="highlight">
video        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.video" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if what's being recorded/uploaded is an video.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.within_months">
<code class="highlight">
within_months        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.within_months" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the user was seen within 30 days.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.within_weeks">
<code class="highlight">
within_weeks        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.within_weeks" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the user was seen within 7 days.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.get_input_user">
<code class="highlight language-python">
get_input_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.get_input_user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Alias for <code>get_input_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_input_sender&gt;</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\userupdate.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>132
133
134</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Alias for `get_input_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_input_sender&gt;`."""</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_sender</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.get_user">
<code class="highlight language-python">
get_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.get_user" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Alias for <code>get_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_sender&gt;</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\userupdate.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>123
124
125</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Alias for `get_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_sender&gt;`."""</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\userupdate.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>51
52
53
54
55
56
57
58
59
60
61
62
63</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateUserStatus</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
                         <span class="n">status</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatUserTyping</span><span class="p">):</span>
        <span class="c1"># Unfortunately, we can't know whether `chat_id`'s type</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
                         <span class="n">chat_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">,</span>
                         <span class="n">typing</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateUserTyping</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
                         <span class="n">typing</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.messageedited" id="telethon.events.messageedited" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.messageedited" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.messageedited.MessageEdited">
<code>MessageEdited</code>
<a class="headerlink" href="#telethon.events.messageedited.MessageEdited" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever a message is edited. Just like <code>NewMessage
&lt;telethon.events.newmessage.NewMessage&gt;</code>, you should treat
this event as a <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>.</p>
<p>.. warning::</p>
<div class="codehilite">
<pre><span></span><code><span class="k">On</span> <span class="n">channels</span><span class="p">,</span> <span class="ss">`Message.out &lt;telethon.tl.custom.message.Message&gt;`</span>
<span class="n">will</span> <span class="n">be</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">sent</span> <span class="n">the</span> <span class="n">message</span> <span class="n">originally</span><span class="p">,</span> <span class="o">**</span><span class="k">not</span> <span class="k">if</span>
<span class="n">you</span> <span class="n">edited</span> <span class="n">it</span><span class="o">**!</span> <span class="n">This</span> <span class="n">can</span> <span class="n">be</span> <span class="n">dangerous</span> <span class="k">if</span> <span class="n">you</span> <span class="n">run</span> <span class="n">outgoing</span>
<span class="n">commands</span> <span class="k">on</span> <span class="n">edits</span><span class="p">.</span>

<span class="n">Some</span> <span class="n">examples</span> <span class="n">follow</span><span class="p">:</span>

<span class="o">*</span> <span class="n">You</span> <span class="n">send</span> <span class="n">a</span> <span class="n">message</span> <span class="s2">"A"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">True</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">You</span> <span class="n">edit</span> <span class="s2">"A"</span> <span class="k">to</span> <span class="s2">"B"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">True</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">Someone</span> <span class="k">else</span> <span class="n">edits</span> <span class="s2">"B"</span> <span class="k">to</span> <span class="s2">"C"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">True</span><span class="ss">``</span> <span class="p">(</span><span class="o">**</span><span class="n">be</span> <span class="n">careful</span><span class="o">!**</span><span class="p">).</span>
<span class="o">*</span> <span class="n">Someone</span> <span class="n">sends</span> <span class="s2">"X"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">False</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">Someone</span> <span class="n">edits</span> <span class="s2">"X"</span> <span class="k">to</span> <span class="s2">"Y"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">False</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">You</span> <span class="n">edit</span> <span class="s2">"Y"</span> <span class="k">to</span> <span class="s2">"Z"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">False</span><span class="ss">``</span><span class="p">.</span>

<span class="n">Since</span> <span class="n">there</span> <span class="n">are</span> <span class="n">useful</span> <span class="n">cases</span> <span class="k">where</span> <span class="n">you</span> <span class="n">need</span> <span class="n">the</span> <span class="k">right</span> <span class="ss">``</span><span class="k">out</span><span class="ss">``</span>
<span class="n">value</span><span class="p">,</span> <span class="n">the</span> <span class="n">library</span> <span class="n">cannot</span> <span class="n">do</span> <span class="n">anything</span> <span class="n">automatically</span> <span class="k">to</span> <span class="n">help</span> <span class="n">you</span><span class="p">.</span>
<span class="n">Instead</span><span class="p">,</span> <span class="n">consider</span> <span class="k">using</span> <span class="ss">``</span><span class="n">from_users</span><span class="o">=</span><span class="s1">'me'</span><span class="ss">``</span> <span class="p">(</span><span class="n">it</span> <span class="n">won</span><span class="err">'</span><span class="n">t</span> <span class="n">work</span> <span class="k">in</span>
<span class="n">broadcast</span> <span class="n">channels</span> <span class="n">at</span> <span class="k">all</span> <span class="n">since</span> <span class="n">the</span> <span class="n">sender</span> <span class="k">is</span> <span class="n">the</span> <span class="n">channel</span> <span class="k">and</span>
<span class="k">not</span> <span class="n">you</span><span class="p">).</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageEdited</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log the date of new edits</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'Message'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">'changed at'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">date</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.messageedited.MessageEdited.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageedited.MessageEdited.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageedited.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>45
46
47
48
49</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateEditMessage</span><span class="p">,</span>
                           <span class="n">types</span><span class="o">.</span><span class="n">UpdateEditChannelMessage</span><span class="p">)):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.messagedeleted" id="telethon.events.messagedeleted" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.messagedeleted" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.messagedeleted.MessageDeleted">
<code>MessageDeleted</code>
<a class="headerlink" href="#telethon.events.messagedeleted.MessageDeleted" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever a message is deleted. Note that this event isn't 100%
reliable, since Telegram doesn't always notify the clients that a message
was deleted.</p>
<p>.. important::</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Telegram</span> <span class="o">**</span><span class="n">does</span> <span class="k">not</span><span class="o">**</span> <span class="n">send</span> <span class="n">information</span> <span class="n">about</span> <span class="o">*</span><span class="k">where</span><span class="o">*</span> <span class="n">a</span> <span class="n">message</span>
<span class="n">was</span> <span class="n">deleted</span> <span class="k">if</span> <span class="n">it</span> <span class="n">occurs</span> <span class="k">in</span> <span class="n">private</span> <span class="n">conversations</span> <span class="k">with</span> <span class="n">other</span> <span class="n">users</span>
<span class="k">or</span> <span class="k">in</span> <span class="n">small</span> <span class="k">group</span> <span class="n">chats</span><span class="p">,</span> <span class="n">because</span> <span class="n">message</span> <span class="n">IDs</span> <span class="k">are</span> <span class="o">*</span><span class="k">unique</span><span class="o">*</span> <span class="k">and</span> <span class="n">you</span>
<span class="n">can</span> <span class="n">identify</span> <span class="n">the</span> <span class="n">chat</span> <span class="k">with</span> <span class="n">the</span> <span class="n">message</span> <span class="n">ID</span> <span class="n">alone</span> <span class="k">if</span> <span class="n">you</span> <span class="n">saved</span> <span class="n">it</span>
<span class="n">previously</span><span class="p">.</span>

<span class="n">Telethon</span> <span class="o">**</span><span class="n">does</span> <span class="k">not</span><span class="o">**</span> <span class="n">save</span> <span class="n">information</span> <span class="k">of</span> <span class="k">where</span> <span class="n">messages</span> <span class="n">occur</span><span class="p">,</span>
<span class="n">so</span> <span class="n">it</span> <span class="n">cannot</span> <span class="n">know</span> <span class="k">in</span> <span class="n">which</span> <span class="n">chat</span> <span class="n">a</span> <span class="n">message</span> <span class="n">was</span> <span class="n">deleted</span> <span class="p">(</span><span class="n">this</span> <span class="n">will</span>
<span class="k">only</span> <span class="k">work</span> <span class="k">in</span> <span class="n">channels</span><span class="p">,</span> <span class="k">where</span> <span class="n">the</span> <span class="n">channel</span> <span class="n">ID</span> <span class="o">*</span><span class="k">is</span><span class="o">*</span> <span class="n">present</span><span class="p">).</span>

<span class="n">This</span> <span class="n">means</span> <span class="n">that</span> <span class="n">the</span> <span class="o">``</span><span class="n">chats</span><span class="o">=``</span> <span class="k">parameter</span> <span class="n">will</span> <span class="k">not</span> <span class="k">work</span> <span class="n">reliably</span><span class="p">,</span>
<span class="n">unless</span> <span class="n">you</span> <span class="n">intend</span> <span class="k">on</span> <span class="n">working</span> <span class="k">with</span> <span class="n">channels</span> <span class="k">and</span> <span class="n">super</span><span class="o">-</span><span class="n">groups</span> <span class="k">only</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageDeleted</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log all deleted message IDs</span>
        <span class="k">for</span> <span class="n">msg_id</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">deleted_ids</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">'Message'</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">,</span> <span class="s1">'was deleted in'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.messagedeleted.MessageDeleted.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.messagedeleted.MessageDeleted.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messagedeleted.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>38
39
40
41
42
43
44
45
46
47
48
49</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateDeleteMessages</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span>
            <span class="n">deleted_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">peer</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateDeleteChannelMessages</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span>
            <span class="n">deleted_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">peer</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.messageread" id="telethon.events.messageread" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.messageread" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.messageread.MessageRead">
<code>MessageRead</code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever one or more messages are read in a chat.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>inbox</code></td>
<td><code>`bool`</code></td>
<td>
<p>If this argument is <code>True</code>, then when you read someone else's
messages the event will be fired. By default (<code>False</code>) only
when messages you sent are read by someone else will fire it.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageRead</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log when someone reads your messages</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'Someone has read all your messages until'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">max_id</span><span class="p">)</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageRead</span><span class="p">(</span><span class="n">inbox</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log when you read message in a chat (from your "inbox")</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'You have read messages until'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">max_id</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Represents the event of one or more messages being read.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>max_id (<code>int</code>):
    Up to which message ID has been read. Every message
    with an ID equal or lower to it have been read.</p>
<p>outbox (<code>bool</code>):
    <code>True</code> if someone else has read your messages.</p>
<p>contents (<code>bool</code>):
    <code>True</code> if what was read were the contents of a message.
    This will be the case when e.g. you play a voice note.
    It may only be set on <code>inbox</code> events.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.inbox">
<code class="highlight">
inbox        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.inbox" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if you have read someone else's messages.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.message_ids">
<code class="highlight">
message_ids        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.message_ids" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The IDs of the messages <strong>which contents'</strong> were read.</p>
<p>Use :meth:<code>is_read</code> if you need to check whether a message
was read instead checking if it's in here.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.__contains__">
<code class="highlight language-python">
__contains__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.__contains__" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the message(s) are read message.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>138
139
140
141
142
143</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="sd">"""`True` if the message(s) are read message."""</span>
    <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_read</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_read</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.get_messages">
<code class="highlight language-python">
get_messages<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.get_messages" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the list of <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>
<strong>which contents'</strong> were read.</p>
<p>Use :meth:<code>is_read</code> if you need to check whether a message
was read instead checking if it's in here.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns the list of `Message &lt;telethon.tl.custom.message.Message&gt;`</span>
<span class="sd">    **which contents'** were read.</span>

<span class="sd">    Use :meth:`is_read` if you need to check whether a message</span>
<span class="sd">    was read instead checking if it's in here.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">chat</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">chat</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span>
                <span class="n">chat</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_ids</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.is_read">
<code class="highlight language-python">
is_read<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.is_read" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns <code>True</code> if the given message (or its ID) has been read.</p>
<p>If a list-like argument is provided, this method will return a
list of booleans indicating which messages have been read.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `True` if the given message (or its ID) has been read.</span>

<span class="sd">    If a list-like argument is provided, this method will return a</span>
<span class="sd">    list of booleans indicating which messages have been read.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">m</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">m</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">message</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">message</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
                <span class="k">else</span> <span class="n">message</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.messageread.MessageRead.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadHistoryInbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">peer</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadHistoryOutbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">peer</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadChannelInbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadChannelOutbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadMessagesContents</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">message_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
                         <span class="n">contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChannelReadMessagesContents</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">message_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
                         <span class="n">contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.messageread.MessageRead.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.filter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>57
58
59
60
61</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inbox</span> <span class="o">==</span> <span class="n">event</span><span class="o">.</span><span class="n">outbox</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.callbackquery" id="telethon.events.callbackquery" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.callbackquery" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery">
<code>CallbackQuery</code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever you sign in as a bot and a user
clicks one of the inline buttons on your messages.</p>
<p>Note that the <code>chats</code> parameter will <strong>not</strong> work with normal
IDs or peers if the clicked inline button comes from a "via bot"
message. The <code>chats</code> parameter also supports checking against the
<code>chat_instance</code> which should be used for inline callbacks.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data</code></td>
<td><code>`bytes`, `str`, `callable`</code></td>
<td>
<p>If set, the inline button payload data must match this data.
A UTF-8 string can also be given, a regex or a callable. For
instance, to check against <code>'data_1'</code> and <code>'data_2'</code> you
can use <code>re.compile(b'data_')</code>.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>pattern</code></td>
<td><code>`bytes`, `str`, `callable`, `Pattern`</code></td>
<td>
<p>If set, only buttons with payload matching this pattern will be handled.
You can specify a regex-like string which will be matched
against the payload data, a callable function that returns <code>True</code>
if a the payload data is acceptable, or a compiled regex pattern.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span><span class="p">,</span> <span class="n">Button</span>

    <span class="c1"># Handle all callback queries and check data inside the handler</span>
    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">CallbackQuery</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">'yes'</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">answer</span><span class="p">(</span><span class="s1">'Correct answer!'</span><span class="p">)</span>

    <span class="c1"># Handle only callback queries with data being b'no'</span>
    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">CallbackQuery</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="sa">b</span><span class="s1">'no'</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Pop-up message with alert</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">answer</span><span class="p">(</span><span class="s1">'Wrong answer!'</span><span class="p">,</span> <span class="n">alert</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># Send a message with buttons users can click</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
        <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s1">'Yes or no?'</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="p">[</span>
            <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'Yes!'</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'yes'</span><span class="p">),</span>
            <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'Nope'</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'no'</span><span class="p">)</span>
        <span class="p">])</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Represents the event of a new callback query.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>query (:tl:<code>UpdateBotCallbackQuery</code>):
    The original :tl:<code>UpdateBotCallbackQuery</code>.</p>
<p>data_match (<code>obj</code>, optional):
    The object returned by the <code>data=</code> parameter
    when creating the event builder, if any. Similar
    to <code>pattern_match</code> for the new message event.</p>
<p>pattern_match (<code>obj</code>, optional):
    Alias for <code>data_match</code>.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.chat_instance">
<code class="highlight">
chat_instance        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.chat_instance" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Unique identifier for the chat where the callback occurred.
Useful for high scores in games.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.data">
<code class="highlight">
data        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.data" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the data payload from the original inline button.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.id">
<code class="highlight">
id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.id" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the query ID. The user clicking the inline
button is the one who generated this random ID.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.message_id">
<code class="highlight">
message_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.message_id" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the message ID to which the clicked inline button belongs.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.via_inline">
<code class="highlight">
via_inline        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.via_inline" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Whether this callback was generated from an inline button sent
via an inline query or not. If the bot sent the message itself
with buttons, and one of those is clicked, this will be <code>False</code>.
If a user sent the message coming from an inline query to the
bot, and one of those is clicked, this will be <code>True</code>.</p>
<p>If it's <code>True</code>, it's likely that the bot is <strong>not</strong> in the
chat, so methods like <code>respond</code> or <code>delete</code> won't work (but
<code>edit</code> will always work).</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.answer">
<code class="highlight language-python">
answer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.answer" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Answers the callback query (and stops the loading circle).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>message</code></td>
<td><code>`str`</code></td>
<td>
<p>The toast message to show feedback to the user.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>cache_time</code></td>
<td><code>`int`</code></td>
<td>
<p>For how long this result should be cached on
the user's client. Defaults to 0 for no cache.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>url</code></td>
<td><code>`str`</code></td>
<td>
<p>The URL to be opened in the user's client. Note that
the only valid URLs are those of games your bot has,
or alternatively a 't.me/your_bot?start=xyz' parameter.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>alert</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether an alert (a pop-up dialog) should be used
instead of showing a toast. Defaults to <code>False</code>.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">answer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alert</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Answers the callback query (and stops the loading circle).</span>

<span class="sd">    Args:</span>
<span class="sd">        message (`str`, optional):</span>
<span class="sd">            The toast message to show feedback to the user.</span>

<span class="sd">        cache_time (`int`, optional):</span>
<span class="sd">            For how long this result should be cached on</span>
<span class="sd">            the user's client. Defaults to 0 for no cache.</span>

<span class="sd">        url (`str`, optional):</span>
<span class="sd">            The URL to be opened in the user's client. Note that</span>
<span class="sd">            the only valid URLs are those of games your bot has,</span>
<span class="sd">            or alternatively a 't.me/your_bot?start=xyz' parameter.</span>

<span class="sd">        alert (`bool`, optional):</span>
<span class="sd">            Whether an alert (a pop-up dialog) should be used</span>
<span class="sd">            instead of showing a toast. Defaults to `False`.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_answered</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_answered</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">(</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SetBotCallbackAnswerRequest</span><span class="p">(</span>
            <span class="n">query_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_id</span><span class="p">,</span>
            <span class="n">cache_time</span><span class="o">=</span><span class="n">cache_time</span><span class="p">,</span>
            <span class="n">alert</span><span class="o">=</span><span class="n">alert</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.delete">
<code class="highlight language-python">
delete<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.delete" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Deletes the message. Shorthand for
<code>telethon.client.messages.MessageMethods.delete_messages</code> with
<code>entity</code> and <code>message_ids</code> already set.</p>
<p>If you need to delete more than one message at once, don't use
this <code>delete</code> method. Use a
<code>telethon.client.telegramclient.TelegramClient</code> instance directly.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>This method will likely fail if <code>via_inline</code> is <code>True</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes the message. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.delete_messages` with</span>
<span class="sd">    ``entity`` and ``message_ids`` already set.</span>

<span class="sd">    If you need to delete more than one message at once, don't use</span>
<span class="sd">    this `delete` method. Use a</span>
<span class="sd">    `telethon.client.telegramclient.TelegramClient` instance directly.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    This method will likely fail if `via_inline` is `True`.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">],</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.edit">
<code class="highlight language-python">
edit<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.edit" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Edits the message. Shorthand for
<code>telethon.client.messages.MessageMethods.edit_message</code> with
the <code>entity</code> set to the correct :tl:<code>InputBotInlineMessageID</code>.</p>
<p>Returns <code>True</code> if the edit was successful.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="err">This method won't respect the previous message unlike</span>
<span class="err">`Message.edit &lt;telethon.tl.custom.message.Message.edit&gt;`,</span>
<span class="err">since the message object is normally not present.</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Edits the message. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.edit_message` with</span>
<span class="sd">    the ``entity`` set to the correct :tl:`InputBotInlineMessageID`.</span>

<span class="sd">    Returns `True` if the edit was successful.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    .. note::</span>

<span class="sd">        This method won't respect the previous message unlike</span>
<span class="sd">        `Message.edit &lt;telethon.tl.custom.message.Message.edit&gt;`,</span>
<span class="sd">        since the message object is normally not present.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputBotInlineMessageID</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">edit_message</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">edit_message</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.get_message">
<code class="highlight language-python">
get_message<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.get_message" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the message to which the clicked inline button belongs.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns the message to which the clicked inline button belongs.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">chat</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_channel</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span>
            <span class="n">chat</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.reply">
<code class="highlight language-python">
reply<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.reply" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Replies to the message (as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
both <code>entity</code> and <code>reply_to</code> already set.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>This method will likely fail if <code>via_inline</code> is <code>True</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Replies to the message (as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    both ``entity`` and ``reply_to`` already set.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    This method will likely fail if `via_inline` is `True`.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">'reply_to'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.respond">
<code class="highlight language-python">
respond<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.respond" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Responds to the message (not as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
<code>entity</code> already set.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>This method will likely fail if <code>via_inline</code> is <code>True</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>269
270
271
272
273
274
275
276
277
278
279
280
281</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Responds to the message (not as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    ``entity`` already set.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    This method will likely fail if `via_inline` is `True`.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>89
90
91
92
93
94
95
96
97
98</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateBotCallbackQuery</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">peer</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">msg_id</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateInlineBotCallbackQuery</span><span class="p">):</span>
        <span class="c1"># See https://github.com/LonamiWebs/Telethon/pull/1005</span>
        <span class="c1"># The long message ID is actually just msg_id + peer_id</span>
        <span class="n">mid</span><span class="p">,</span> <span class="n">pid</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">'&lt;ii'</span><span class="p">,</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">'&lt;q'</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">msg_id</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="n">peer</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="o">-</span><span class="n">pid</span><span class="p">)</span> <span class="k">if</span> <span class="n">pid</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerUser</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">peer</span><span class="p">,</span> <span class="n">mid</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.filter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="c1"># We can't call super().filter(...) because it ignores chat_instance</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_no_check</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">event</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">inside</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">chat_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span><span class="p">:</span>
            <span class="n">inside</span> <span class="o">|=</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span>

        <span class="k">if</span> <span class="n">inside</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">blacklist_chats</span><span class="p">:</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">):</span>
            <span class="n">event</span><span class="o">.</span><span class="n">data_match</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">data_match</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">data</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">:</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span>
        <span class="c1"># Return the result of func directly as it may need to be awaited</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.inlinequery" id="telethon.events.inlinequery" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.inlinequery" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery">
<code>InlineQuery</code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever you sign in as a bot and a user
sends an inline query such as <code>@bot query</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>users</code></td>
<td><code>`entity`</code></td>
<td>
<p>May be one or more entities (username/peer/etc.), preferably IDs.
By default, only inline queries from these users will be handled.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>blacklist_users</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether to treat the users as a blacklist instead of
as a whitelist (default). This means that every chat
will be handled <em>except</em> those specified in <code>users</code>
which will be ignored if <code>blacklist_users=True</code>.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>pattern</code></td>
<td><code>`str`, `callable`, `Pattern`</code></td>
<td>
<p>If set, only queries matching this pattern will be handled.
You can specify a regex-like string which will be matched
against the message, a callable function that returns <code>True</code>
if a message is acceptable, or a compiled regex pattern.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">InlineQuery</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="n">builder</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">builder</span>

        <span class="c1"># Two options (convert user text to UPPERCASE or lowercase)</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">answer</span><span class="p">([</span>
            <span class="n">builder</span><span class="o">.</span><span class="n">article</span><span class="p">(</span><span class="s1">'UPPERCASE'</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">builder</span><span class="o">.</span><span class="n">article</span><span class="p">(</span><span class="s1">'lowercase'</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span>
        <span class="p">])</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Represents the event of a new callback query.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>query (:tl:<code>UpdateBotInlineQuery</code>):
    The original :tl:<code>UpdateBotInlineQuery</code>.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Make</span> <span class="n">sure</span> <span class="k">to</span> <span class="n">access</span> <span class="n">the</span> <span class="ss">`text`</span> <span class="n">property</span> <span class="n">of</span> <span class="n">the</span> <span class="n">query</span> <span class="k">if</span>
<span class="n">you</span> <span class="n">want</span> <span class="n">the</span> <span class="kt">text</span> <span class="n">rather</span> <span class="n">than</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">query</span> <span class="n">object</span><span class="p">.</span>
</code></pre>
</div>
<p>pattern_match (<code>obj</code>, optional):
    The resulting object from calling the passed <code>pattern</code>
    function, which is <code>re.compile(...).match</code> by default.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.builder">
<code class="highlight">
builder        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.builder" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a new <code>InlineBuilder
&lt;telethon.tl.custom.inlinebuilder.InlineBuilder&gt;</code> instance.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.geo">
<code class="highlight">
geo        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.geo" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>If the user location is requested when using inline mode
and the user's device is able to send it, this will return
the :tl:<code>GeoPoint</code> with the position of the user.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.id">
<code class="highlight">
id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.id" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the unique identifier for the query ID.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.offset">
<code class="highlight">
offset        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.offset" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The string the user's client used as an offset for the query.
This will either be empty or equal to offsets passed to <code>answer</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.text">
<code class="highlight">
text        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.text" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns the text the user used to make the inline query.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.answer">
<code class="highlight language-python">
answer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">gallery</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">next_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">switch_pm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">switch_pm_param</span><span class="o">=</span><span class="s1">''</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.answer" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Answers the inline query with the given results.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>results</code></td>
<td><code>`list`</code></td>
<td>
<p>A list of :tl:<code>InputBotInlineResult</code> to use.
You should use <code>builder</code> to create these:</p>
<p>.. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">builder = inline.builder</span>
<span class="err">r1 = builder.article('Be nice', text='Have a nice day')</span>
<span class="err">r2 = builder.article('Be bad', text="I don't like you")</span>
<span class="err">await inline.answer([r1, r2])</span>
</code></pre>
</div>
<p>You can send up to 50 results as documented in
<a href="https://core.telegram.org/bots/api#answerinlinequery">https://core.telegram.org/bots/api#answerinlinequery</a>.
Sending more will raise <code>ResultsTooMuchError</code>,
and you should consider using <code>next_offset</code> to
paginate them.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>cache_time</code></td>
<td><code>`int`</code></td>
<td>
<p>For how long this result should be cached on
the user's client. Defaults to 0 for no cache.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>gallery</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether the results should show as a gallery (grid) or not.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>next_offset</code></td>
<td><code>`str`</code></td>
<td>
<p>The offset the client will send when the user scrolls the 
results and it repeats the request.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>private</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether the results should be cached by Telegram
(not private) or by the user's client (private).</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>switch_pm</code></td>
<td><code>`str`</code></td>
<td>
<p>If set, this text will be shown in the results
to allow the user to switch to private messages.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>switch_pm_param</code></td>
<td><code>`str`</code></td>
<td>
<p>Optional parameter to start the bot with if
<code>switch_pm</code> was used.</p>
</td>
<td><code>''</code></td>
</tr>
</tbody>
</table>
<div class="codehilite">
<pre><span></span><code><span class="p">..</span> <span class="s s-Atom">code</span><span class="o">-</span><span class="nn">block</span><span class="p">:</span><span class="s s-Atom">:</span> <span class="s s-Atom">python</span>

    <span class="s s-Atom">@bot</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="s s-Atom">events</span><span class="p">.</span><span class="nv">InlineQuery</span><span class="p">)</span>
    <span class="s s-Atom">async</span> <span class="s s-Atom">def</span> <span class="nf">handler</span><span class="p">(</span><span class="s s-Atom">event</span><span class="p">)</span><span class="s s-Atom">:</span>
        <span class="s s-Atom">builder</span> <span class="o">=</span> <span class="s s-Atom">event</span><span class="p">.</span><span class="s s-Atom">builder</span>

        <span class="s s-Atom">rev_text</span> <span class="o">=</span> <span class="s s-Atom">event</span><span class="p">.</span><span class="s s-Atom">text</span><span class="p">[</span><span class="s s-Atom">::-</span><span class="mi">1</span><span class="p">]</span>
        <span class="s s-Atom">await</span> <span class="s s-Atom">event</span><span class="p">.</span><span class="nf">answer</span><span class="p">([</span>
            <span class="s s-Atom">builder</span><span class="p">.</span><span class="nf">article</span><span class="p">(</span><span class="s s-Atom">'Reverse text'</span><span class="p">,</span> <span class="s s-Atom">text</span><span class="o">=</span><span class="s s-Atom">rev_text</span><span class="p">),</span>
            <span class="s s-Atom">builder</span><span class="p">.</span><span class="nf">photo</span><span class="p">(</span><span class="s s-Atom">'/path/to/photo.jpg'</span><span class="p">)</span>
        <span class="p">])</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\events\inlinequery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">answer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
        <span class="n">gallery</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">next_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">switch_pm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">switch_pm_param</span><span class="o">=</span><span class="s1">''</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Answers the inline query with the given results.</span>

<span class="sd">    Args:</span>
<span class="sd">        results (`list`, optional):</span>
<span class="sd">            A list of :tl:`InputBotInlineResult` to use.</span>
<span class="sd">            You should use `builder` to create these:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                builder = inline.builder</span>
<span class="sd">                r1 = builder.article('Be nice', text='Have a nice day')</span>
<span class="sd">                r2 = builder.article('Be bad', text="I don't like you")</span>
<span class="sd">                await inline.answer([r1, r2])</span>

<span class="sd">            You can send up to 50 results as documented in</span>
<span class="sd">            https://core.telegram.org/bots/api#answerinlinequery.</span>
<span class="sd">            Sending more will raise ``ResultsTooMuchError``,</span>
<span class="sd">            and you should consider using `next_offset` to</span>
<span class="sd">            paginate them.</span>

<span class="sd">        cache_time (`int`, optional):</span>
<span class="sd">            For how long this result should be cached on</span>
<span class="sd">            the user's client. Defaults to 0 for no cache.</span>

<span class="sd">        gallery (`bool`, optional):</span>
<span class="sd">            Whether the results should show as a gallery (grid) or not.</span>

<span class="sd">        next_offset (`str`, optional):</span>
<span class="sd">            The offset the client will send when the user scrolls the </span>
<span class="sd">            results and it repeats the request.</span>

<span class="sd">        private (`bool`, optional):</span>
<span class="sd">            Whether the results should be cached by Telegram</span>
<span class="sd">            (not private) or by the user's client (private).</span>

<span class="sd">        switch_pm (`str`, optional):</span>
<span class="sd">            If set, this text will be shown in the results</span>
<span class="sd">            to allow the user to switch to private messages.</span>

<span class="sd">        switch_pm_param (`str`, optional):</span>
<span class="sd">            Optional parameter to start the bot with if</span>
<span class="sd">            `switch_pm` was used.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            @bot.on(events.InlineQuery)</span>
<span class="sd">            async def handler(event):</span>
<span class="sd">                builder = event.builder</span>

<span class="sd">                rev_text = event.text[::-1]</span>
<span class="sd">                await event.answer([</span>
<span class="sd">                    builder.article('Reverse text', text=rev_text),</span>
<span class="sd">                    builder.photo('/path/to/photo.jpg')</span>
<span class="sd">                ])</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_answered</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_as_future</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>
                   <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>

        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">futures</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>

        <span class="c1"># All futures will be in the `done` *set* that `wait` returns.</span>
        <span class="c1">#</span>
        <span class="c1"># Precisely because it's a `set` and not a `list`, it</span>
        <span class="c1"># will not preserve the order, but since all futures</span>
        <span class="c1"># completed we can use our original, ordered `list`.</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">futures</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">switch_pm</span><span class="p">:</span>
        <span class="n">switch_pm</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">InlineBotSwitchPM</span><span class="p">(</span><span class="n">switch_pm</span><span class="p">,</span> <span class="n">switch_pm_param</span><span class="p">)</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">(</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SetInlineBotResultsRequest</span><span class="p">(</span>
            <span class="n">query_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_id</span><span class="p">,</span>
            <span class="n">results</span><span class="o">=</span><span class="n">results</span><span class="p">,</span>
            <span class="n">cache_time</span><span class="o">=</span><span class="n">cache_time</span><span class="p">,</span>
            <span class="n">gallery</span><span class="o">=</span><span class="n">gallery</span><span class="p">,</span>
            <span class="n">next_offset</span><span class="o">=</span><span class="n">next_offset</span><span class="p">,</span>
            <span class="n">private</span><span class="o">=</span><span class="n">private</span><span class="p">,</span>
            <span class="n">switch_pm</span><span class="o">=</span><span class="n">switch_pm</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\inlinequery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>63
64
65
66</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateBotInlineQuery</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.filter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\inlinequery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>68
69
70
71
72
73
74
75</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span> <span class="o">=</span> <span class="n">match</span>

    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.album" id="telethon.events.album" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.album" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.album.Album">
<code>Album</code>
<a class="headerlink" href="#telethon.events.album.Album" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Occurs whenever you receive an album. This event only exists
to ease dealing with an unknown amount of messages that belong
to the same album.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">Album</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Counting how many photos or videos the album has</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'Got an album with'</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="p">),</span> <span class="s1">'items'</span><span class="p">)</span>

        <span class="c1"># Forwarding the album as a whole to some chat</span>
        <span class="n">event</span><span class="o">.</span><span class="n">forward_to</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span>

        <span class="c1"># Printing the caption</span>
        <span class="k">print</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

        <span class="c1"># Replying to the fifth item in the album</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">'Cool!'</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.album.Album.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.album.Album.Event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Represents the event of a new album.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>messages (Sequence[<code>Message &lt;telethon.tl.custom.message.Message&gt;</code>]):
    The list of messages belonging to the same album.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.forward">
<code class="highlight">
forward        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.forward" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The <code>Forward &lt;telethon.tl.custom.forward.Forward&gt;</code>
information for the first message in the album if it was forwarded.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.grouped_id">
<code class="highlight">
grouped_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.grouped_id" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The shared <code>grouped_id</code> between all the messages.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.is_reply">
<code class="highlight">
is_reply        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.is_reply" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p><code>True</code> if the album is a reply to some other message.</p>
<p>Remember that you can access the ID of the message
this one is replying to through <code>reply_to_msg_id</code>,
and the <code>Message</code> object with <code>get_reply_message()</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.raw_text">
<code class="highlight">
raw_text        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.raw_text" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The raw message text of the first photo
with a caption, ignoring any formatting.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.text">
<code class="highlight">
text        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.text" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The message text of the first photo with a caption,
formatted using the client's default parse mode.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.__getitem__">
<code class="highlight language-python">
__getitem__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.__getitem__" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Access the n'th message in the album.</p>
<p>Equivalent to <code>event.messages[n]</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>344
345
346
347
348
349
350</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Access the n'th message in the album.</span>

<span class="sd">    Equivalent to ``event.messages[n]``.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.__iter__">
<code class="highlight language-python">
__iter__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.__iter__" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Iterate over the messages in the album.</p>
<p>Equivalent to <code>iter(self.messages)</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>336
337
338
339
340
341
342</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Iterate over the messages in the album.</span>

<span class="sd">    Equivalent to ``iter(self.messages)``.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.__len__">
<code class="highlight language-python">
__len__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.__len__" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Return the amount of messages in the album.</p>
<p>Equivalent to <code>len(self.messages)</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>328
329
330
331
332
333
334</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Return the amount of messages in the album.</span>

<span class="sd">    Equivalent to ``len(self.messages)``.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.delete">
<code class="highlight language-python">
delete<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.delete" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Deletes the entire album. You're responsible for checking whether
you have the permission to do so, or to except the error otherwise.
Shorthand for
<code>telethon.client.messages.MessageMethods.delete_messages</code> with
<code>entity</code> and <code>message_ids</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>295
296
297
298
299
300
301
302
303
304
305
306
307</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes the entire album. You're responsible for checking whether</span>
<span class="sd">    you have the permission to do so, or to except the error otherwise.</span>
<span class="sd">    Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.delete_messages` with</span>
<span class="sd">    ``entity`` and ``message_ids`` already set.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.edit">
<code class="highlight language-python">
edit<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.edit" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Edits the first caption or the message, or the first messages'
caption if no caption is set, iff it's outgoing. Shorthand for
<code>telethon.client.messages.MessageMethods.edit_message</code>
with both <code>entity</code> and <code>message</code> already set.</p>
<p>Returns <code>None</code> if the message was incoming,
or the edited <code>Message</code> otherwise.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="n">This</span> <span class="k">is</span> <span class="n">different</span> <span class="k">from</span> <span class="ss">`client.edit_message</span>
<span class="ss">&lt;telethon.client.messages.MessageMethods.edit_message&gt;`</span>
<span class="k">and</span> <span class="o">**</span><span class="n">will</span> <span class="n">respect</span><span class="o">**</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span><span class="p">.</span>
<span class="k">For</span> <span class="n">example</span><span class="p">,</span> <span class="k">if</span> <span class="n">the</span> <span class="n">message</span> <span class="n">didn</span><span class="s1">'t have a link preview,</span>
<span class="s1">the edit won'</span><span class="n">t</span> <span class="k">add</span> <span class="n">one</span> <span class="k">by</span> <span class="k">default</span><span class="p">,</span> <span class="k">and</span> <span class="n">you</span> <span class="n">should</span> <span class="k">force</span>
<span class="n">it</span> <span class="k">by</span> <span class="n">setting</span> <span class="n">it</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">it</span><span class="p">.</span>

<span class="n">This</span> <span class="k">is</span> <span class="n">generally</span> <span class="n">the</span> <span class="n">most</span> <span class="n">desired</span> <span class="k">and</span> <span class="n">convenient</span> <span class="n">behaviour</span><span class="p">,</span>
<span class="k">and</span> <span class="n">will</span> <span class="n">work</span> <span class="k">for</span> <span class="n">link</span> <span class="n">previews</span> <span class="k">and</span> <span class="n">message</span> <span class="n">buttons</span><span class="p">.</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Edits the first caption or the message, or the first messages'</span>
<span class="sd">    caption if no caption is set, iff it's outgoing. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.edit_message`</span>
<span class="sd">    with both ``entity`` and ``message`` already set.</span>

<span class="sd">    Returns `None` if the message was incoming,</span>
<span class="sd">    or the edited `Message` otherwise.</span>

<span class="sd">    .. note::</span>

<span class="sd">        This is different from `client.edit_message</span>
<span class="sd">        &lt;telethon.client.messages.MessageMethods.edit_message&gt;`</span>
<span class="sd">        and **will respect** the previous state of the message.</span>
<span class="sd">        For example, if the message didn't have a link preview,</span>
<span class="sd">        the edit won't add one by default, and you should force</span>
<span class="sd">        it by setting it to `True` if you want it.</span>

<span class="sd">        This is generally the most desired and convenient behaviour,</span>
<span class="sd">        and will work for link previews and message buttons.</span>
<span class="sd">    """</span>
    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">raw_text</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">msg</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.forward_to">
<code class="highlight language-python">
forward_to<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.forward_to" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Forwards the entire album. Shorthand for
<code>telethon.client.messages.MessageMethods.forward_messages</code>
with both <code>messages</code> and <code>from_peer</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>255
256
257
258
259
260
261
262
263
264
265</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">forward_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Forwards the entire album. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.forward_messages`</span>
<span class="sd">    with both ``messages`` and ``from_peer`` already set.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'messages'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'as_album'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'from_peer'</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">()</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">forward_messages</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.get_reply_message">
<code class="highlight language-python">
get_reply_message<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.get_reply_message" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>
that this album is replying to, or <code>None</code>.</p>
<p>The result will be cached after its first use.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>230
231
232
233
234
235
236
237</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_reply_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    The `Message &lt;telethon.tl.custom.message.Message&gt;`</span>
<span class="sd">    that this album is replying to, or `None`.</span>

<span class="sd">    The result will be cached after its first use.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_reply_message</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.mark_read">
<code class="highlight language-python">
mark_read<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.mark_read" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Marks the entire album as read. Shorthand for
<code>client.send_read_acknowledge()
&lt;telethon.client.messages.MessageMethods.send_read_acknowledge&gt;</code>
with both <code>entity</code> and <code>message</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>309
310
311
312
313
314
315
316
317
318</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mark_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Marks the entire album as read. Shorthand for</span>
<span class="sd">    `client.send_read_acknowledge()</span>
<span class="sd">    &lt;telethon.client.messages.MessageMethods.send_read_acknowledge&gt;`</span>
<span class="sd">    with both ``entity`` and ``message`` already set.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_read_acknowledge</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="n">max_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.pin">
<code class="highlight language-python">
pin<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.pin" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Pins the first photo in the album. Shorthand for
<code>telethon.client.messages.MessageMethods.pin_message</code>
with both <code>entity</code> and <code>message</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>320
321
322
323
324
325
326</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">pin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Pins the first photo in the album. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.pin_message`</span>
<span class="sd">    with both ``entity`` and ``message`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pin</span><span class="p">(</span><span class="n">notify</span><span class="o">=</span><span class="n">notify</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.reply">
<code class="highlight language-python">
reply<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.reply" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Replies to the first photo in the album (as a reply). Shorthand
for <code>telethon.client.messages.MessageMethods.send_message</code>
with both <code>entity</code> and <code>reply_to</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>247
248
249
250
251
252
253</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Replies to the first photo in the album (as a reply). Shorthand</span>
<span class="sd">    for `telethon.client.messages.MessageMethods.send_message`</span>
<span class="sd">    with both ``entity`` and ``reply_to`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event.respond">
<code class="highlight language-python">
respond<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.respond" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Responds to the album (not as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code>
with <code>entity</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>239
240
241
242
243
244
245</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Responds to the album (not as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message`</span>
<span class="sd">    with ``entity`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.album.Album.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">others</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># We only care about albums which come inside the same Updates</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span>
                  <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">)):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># We don't care about MessageService's here</span>

        <span class="n">group</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">grouped_id</span>
        <span class="k">if</span> <span class="n">group</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c1"># It must be grouped</span>

        <span class="c1"># Check whether we are supposed to skip this update, and</span>
        <span class="c1"># if we do also remove it from the ignore list since we</span>
        <span class="c1"># won't need to check against it again.</span>
        <span class="k">if</span> <span class="n">_IGNORE_DICT</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">update</span><span class="p">),</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="c1"># Check if the ignore list is too big, and if it is clean it</span>
        <span class="c1"># TODO time could technically go backwards; time is not monotonic</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_IGNORE_DICT</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">_IGNORE_MAX_SIZE</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">_IGNORE_DICT</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">now</span> <span class="o">-</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">_IGNORE_MAX_AGE</span><span class="p">]:</span>
                <span class="k">del</span> <span class="n">_IGNORE_DICT</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="c1"># Add the other updates to the ignore list</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">u</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
                <span class="n">_IGNORE_DICT</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">u</span><span class="p">)]</span> <span class="o">=</span> <span class="n">now</span>

        <span class="c1"># Figure out which updates share the same group and use those</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">([</span>
            <span class="n">u</span><span class="o">.</span><span class="n">message</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">others</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">))</span>
                <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">grouped_id</span> <span class="o">==</span> <span class="n">group</span><span class="p">)</span>
        <span class="p">])</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.album.Album.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.filter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>138
139
140
141</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="c1"># Albums with less than two messages require a few hacks to work.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.album.AlbumHack">
<code>AlbumHack</code>
<a class="headerlink" href="#telethon.events.album.AlbumHack" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>When receiving an album from a different data-center, they will come in
separate <code>Updates</code>, so we need to temporarily remember them for a while
and only after produce the event.</p>
<p>Of course events are not designed for this kind of wizardy, so this is
a dirty hack that gets the job done.</p>
<p>When cleaning up the code base we may want to figure out a better way
to do this, or just leave the album problem to the users; the update
handling code is bad enough as it is.</p>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events.raw" id="telethon.events.raw" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events.raw" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.raw.Raw">
<code>Raw</code>
<a class="headerlink" href="#telethon.events.raw.Raw" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Raw events are not actual events. Instead, they are the raw
:tl:<code>Update</code> object that Telegram sends. You normally shouldn't
need these.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>types</code></td>
<td><code>`list` | `tuple` | `type`</code></td>
<td>
<p>The type or types that the :tl:<code>Update</code> instance must be.
Equivalent to <code>if not isinstance(update, types): return</code>.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">Raw</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">update</span><span class="p">):</span>
        <span class="c1"># Print all incoming updates</span>
        <span class="k">print</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">stringify</span><span class="p">())</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.raw.Raw.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.raw.Raw.build" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\raw.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>44
45
46</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">update</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.raw.Raw.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.raw.Raw.filter" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\raw.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>48
49
50
51
52
53</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span>
            <span class="c1"># Return the result of func directly as it may need to be awaited</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">event</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h3 class="doc doc-heading" id="telethon.events.raw.Raw.resolve">
<code class="highlight language-python">
resolve<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.raw.Raw.resolve" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Helper method to allow event builders to be resolved before usage</p>
<details class="quote">
<summary>Source code in <code>telethon\events\raw.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>41
42</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="hidden-toc" href="#telethon.events" id="telethon.events" style="visibility: hidden; width: 0; height: 0;">
<a class="headerlink" href="#telethon.events" title="Permanent link">¶</a></h2>
<div class="doc doc-contents first">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h2 class="doc doc-heading" id="telethon.events.StopPropagation">
<code>StopPropagation</code>
<a class="headerlink" href="#telethon.events.StopPropagation" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>If this exception is raised in any of the handlers for a given event,
it will stop the execution of all other registered event handlers.
It can be seen as the <code>StopIteration</code> in a for loop but for events.</p>
<p>Example usage:</p>
<div class="codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span><span class="p">,</span> <span class="n">events</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">)</span>
<span class="o">...</span> <span class="n">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
<span class="o">...</span>     <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="o">...</span>     <span class="c1"># No other event handler will have a chance to handle this event</span>
<span class="o">...</span>     <span class="k">raise</span> <span class="n">StopPropagation</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">)</span>
<span class="o">...</span> <span class="n">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
<span class="o">...</span>     <span class="c1"># Will never be reached, because it is the second handler</span>
<span class="o">...</span>     <span class="k">pass</span>
</code></pre>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="telethon.events.is_handler">
<code class="highlight language-python">
is_handler<span class="p">(</span><span class="n">callback</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.is_handler" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Returns <code>True</code> if the given callback is an
event handler (i.e. you used <code>register</code> on it).</p>
<details class="quote">
<summary>Source code in <code>telethon\events\__init__.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>120
121
122
123
124
125</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_handler</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `True` if the given callback is an</span>
<span class="sd">    event handler (i.e. you used `register` on it).</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">_HANDLERS_ATTRIBUTE</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="telethon.events.list">
<code class="highlight language-python">
list<span class="p">(</span><span class="n">callback</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.list" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Returns a list containing the registered event
builders inside the specified callback handler.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\__init__.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>128
129
130
131
132
133</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns a list containing the registered event</span>
<span class="sd">    builders inside the specified callback handler.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">_HANDLERS_ATTRIBUTE</span><span class="p">,</span> <span class="p">[])[:]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="telethon.events.register">
<code class="highlight language-python">
register<span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.register" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Decorator method to <em>register</em> event handlers. This is the client-less
<code>add_event_handler()
&lt;telethon.client.updates.UpdateMethods.add_event_handler&gt;</code> variant.</p>
<p>Note that this method only registers callbacks as handlers,
and does not attach them to any client. This is useful for
external modules that don't have access to the client, but
still want to define themselves as a handler. Example:</p>
<blockquote>
<blockquote>
<blockquote>
<p>from telethon import events
@events.register(events.NewMessage)
... async def handler(event):
...     ...
...</p>
<h1 id="somewhere-else">(somewhere else)<a class="headerlink" href="#somewhere-else" title="Permanent link">¶</a></h1>
<p>...
from telethon import TelegramClient
client = TelegramClient(...)
client.add_event_handler(handler)</p>
</blockquote>
</blockquote>
</blockquote>
<p>Remember that you can use this as a non-decorator
through <code>register(event)(callback)</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>event</code></td>
<td><code>`_EventBuilder` | `type`</code></td>
<td>
<p>The event builder class or instance to be used,
for instance <code>events.NewMessage</code>.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>telethon\events\__init__.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">register</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Decorator method to *register* event handlers. This is the client-less</span>
<span class="sd">    `add_event_handler()</span>
<span class="sd">    &lt;telethon.client.updates.UpdateMethods.add_event_handler&gt;` variant.</span>

<span class="sd">    Note that this method only registers callbacks as handlers,</span>
<span class="sd">    and does not attach them to any client. This is useful for</span>
<span class="sd">    external modules that don't have access to the client, but</span>
<span class="sd">    still want to define themselves as a handler. Example:</span>

<span class="sd">    &gt;&gt;&gt; from telethon import events</span>
<span class="sd">    &gt;&gt;&gt; @events.register(events.NewMessage)</span>
<span class="sd">    ... async def handler(event):</span>
<span class="sd">    ...     ...</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; # (somewhere else)</span>
<span class="sd">    ...</span>
<span class="sd">    &gt;&gt;&gt; from telethon import TelegramClient</span>
<span class="sd">    &gt;&gt;&gt; client = TelegramClient(...)</span>
<span class="sd">    &gt;&gt;&gt; client.add_event_handler(handler)</span>

<span class="sd">    Remember that you can use this as a non-decorator</span>
<span class="sd">    through ``register(event)(callback)``.</span>

<span class="sd">    Args:</span>
<span class="sd">        event (`_EventBuilder` | `type`):</span>
<span class="sd">            The event builder class or instance to be used,</span>
<span class="sd">            for instance ``events.NewMessage``.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">event</span><span class="p">()</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">event</span><span class="p">:</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">Raw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">callback</span><span class="p">):</span>
        <span class="n">handlers</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">_HANDLERS_ATTRIBUTE</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">handlers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">_HANDLERS_ATTRIBUTE</span><span class="p">,</span> <span class="n">handlers</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">callback</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-function">
<h2 class="doc doc-heading" id="telethon.events.unregister">
<code class="highlight language-python">
unregister<span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.unregister" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<p>Inverse operation of <code>register</code> (though not a decorator). Client-less
<code>remove_event_handler
&lt;telethon.client.updates.UpdateMethods.remove_event_handler&gt;</code>
variant. <strong>Note that this won't remove handlers from the client</strong>,
because it simply can't, so you would generally use this before
adding the handlers to the client.</p>
<p>This method is here for symmetry. You will rarely need to
unregister events, since you can simply just not add them
to any client.</p>
<p>If no event is given, all events for this callback are removed.
Returns how many callbacks were removed.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\__init__.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">unregister</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Inverse operation of `register` (though not a decorator). Client-less</span>
<span class="sd">    `remove_event_handler</span>
<span class="sd">    &lt;telethon.client.updates.UpdateMethods.remove_event_handler&gt;`</span>
<span class="sd">    variant. **Note that this won't remove handlers from the client**,</span>
<span class="sd">    because it simply can't, so you would generally use this before</span>
<span class="sd">    adding the handlers to the client.</span>

<span class="sd">    This method is here for symmetry. You will rarely need to</span>
<span class="sd">    unregister events, since you can simply just not add them</span>
<span class="sd">    to any client.</span>

<span class="sd">    If no event is given, all events for this callback are removed.</span>
<span class="sd">    Returns how many callbacks were removed.</span>
<span class="sd">    """</span>
    <span class="n">found</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">event</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="n">handlers</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">callback</span><span class="p">,</span> <span class="n">_HANDLERS_ATTRIBUTE</span><span class="p">,</span> <span class="p">[])</span>
    <span class="n">handlers</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">event</span><span class="p">,</span> <span class="n">callback</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">handlers</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">i</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">ev</span> <span class="o">=</span> <span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ev</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
            <span class="k">del</span> <span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">found</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="n">found</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.album">
<code>album</code>
<a class="headerlink" href="#telethon.events.album" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.album.Album">
<code>Album</code>
<a class="headerlink" href="#telethon.events.album.Album" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever you receive an album. This event only exists
to ease dealing with an unknown amount of messages that belong
to the same album.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">Album</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Counting how many photos or videos the album has</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'Got an album with'</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="p">),</span> <span class="s1">'items'</span><span class="p">)</span>

        <span class="c1"># Forwarding the album as a whole to some chat</span>
        <span class="n">event</span><span class="o">.</span><span class="n">forward_to</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span>

        <span class="c1"># Printing the caption</span>
        <span class="k">print</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

        <span class="c1"># Replying to the fifth item in the album</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">'Cool!'</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="telethon.events.album.Album.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.album.Album.Event" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Represents the event of a new album.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>messages (Sequence[<code>Message &lt;telethon.tl.custom.message.Message&gt;</code>]):
    The list of messages belonging to the same album.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.forward">
<code class="highlight">
forward        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.forward" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The <code>Forward &lt;telethon.tl.custom.forward.Forward&gt;</code>
information for the first message in the album if it was forwarded.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.grouped_id">
<code class="highlight">
grouped_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.grouped_id" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The shared <code>grouped_id</code> between all the messages.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.is_reply">
<code class="highlight">
is_reply        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.is_reply" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the album is a reply to some other message.</p>
<p>Remember that you can access the ID of the message
this one is replying to through <code>reply_to_msg_id</code>,
and the <code>Message</code> object with <code>get_reply_message()</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.raw_text">
<code class="highlight">
raw_text        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.raw_text" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The raw message text of the first photo
with a caption, ignoring any formatting.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.text">
<code class="highlight">
text        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.text" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The message text of the first photo with a caption,
formatted using the client's default parse mode.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.__getitem__">
<code class="highlight language-python">
__getitem__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.__getitem__" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Access the n'th message in the album.</p>
<p>Equivalent to <code>event.messages[n]</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>344
345
346
347
348
349
350</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Access the n'th message in the album.</span>

<span class="sd">    Equivalent to ``event.messages[n]``.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.__iter__">
<code class="highlight language-python">
__iter__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.__iter__" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Iterate over the messages in the album.</p>
<p>Equivalent to <code>iter(self.messages)</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>336
337
338
339
340
341
342</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Iterate over the messages in the album.</span>

<span class="sd">    Equivalent to ``iter(self.messages)``.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">iter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.__len__">
<code class="highlight language-python">
__len__<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.Event.__len__" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Return the amount of messages in the album.</p>
<p>Equivalent to <code>len(self.messages)</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>328
329
330
331
332
333
334</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Return the amount of messages in the album.</span>

<span class="sd">    Equivalent to ``len(self.messages)``.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.delete">
<code class="highlight language-python">
delete<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.delete" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Deletes the entire album. You're responsible for checking whether
you have the permission to do so, or to except the error otherwise.
Shorthand for
<code>telethon.client.messages.MessageMethods.delete_messages</code> with
<code>entity</code> and <code>message_ids</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>295
296
297
298
299
300
301
302
303
304
305
306
307</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes the entire album. You're responsible for checking whether</span>
<span class="sd">    you have the permission to do so, or to except the error otherwise.</span>
<span class="sd">    Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.delete_messages` with</span>
<span class="sd">    ``entity`` and ``message_ids`` already set.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.edit">
<code class="highlight language-python">
edit<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.edit" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Edits the first caption or the message, or the first messages'
caption if no caption is set, iff it's outgoing. Shorthand for
<code>telethon.client.messages.MessageMethods.edit_message</code>
with both <code>entity</code> and <code>message</code> already set.</p>
<p>Returns <code>None</code> if the message was incoming,
or the edited <code>Message</code> otherwise.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="n">This</span> <span class="k">is</span> <span class="n">different</span> <span class="k">from</span> <span class="ss">`client.edit_message</span>
<span class="ss">&lt;telethon.client.messages.MessageMethods.edit_message&gt;`</span>
<span class="k">and</span> <span class="o">**</span><span class="n">will</span> <span class="n">respect</span><span class="o">**</span> <span class="n">the</span> <span class="n">previous</span> <span class="n">state</span> <span class="n">of</span> <span class="n">the</span> <span class="n">message</span><span class="p">.</span>
<span class="k">For</span> <span class="n">example</span><span class="p">,</span> <span class="k">if</span> <span class="n">the</span> <span class="n">message</span> <span class="n">didn</span><span class="s1">'t have a link preview,</span>
<span class="s1">the edit won'</span><span class="n">t</span> <span class="k">add</span> <span class="n">one</span> <span class="k">by</span> <span class="k">default</span><span class="p">,</span> <span class="k">and</span> <span class="n">you</span> <span class="n">should</span> <span class="k">force</span>
<span class="n">it</span> <span class="k">by</span> <span class="n">setting</span> <span class="n">it</span> <span class="k">to</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">want</span> <span class="n">it</span><span class="p">.</span>

<span class="n">This</span> <span class="k">is</span> <span class="n">generally</span> <span class="n">the</span> <span class="n">most</span> <span class="n">desired</span> <span class="k">and</span> <span class="n">convenient</span> <span class="n">behaviour</span><span class="p">,</span>
<span class="k">and</span> <span class="n">will</span> <span class="n">work</span> <span class="k">for</span> <span class="n">link</span> <span class="n">previews</span> <span class="k">and</span> <span class="n">message</span> <span class="n">buttons</span><span class="p">.</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Edits the first caption or the message, or the first messages'</span>
<span class="sd">    caption if no caption is set, iff it's outgoing. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.edit_message`</span>
<span class="sd">    with both ``entity`` and ``message`` already set.</span>

<span class="sd">    Returns `None` if the message was incoming,</span>
<span class="sd">    or the edited `Message` otherwise.</span>

<span class="sd">    .. note::</span>

<span class="sd">        This is different from `client.edit_message</span>
<span class="sd">        &lt;telethon.client.messages.MessageMethods.edit_message&gt;`</span>
<span class="sd">        and **will respect** the previous state of the message.</span>
<span class="sd">        For example, if the message didn't have a link preview,</span>
<span class="sd">        the edit won't add one by default, and you should force</span>
<span class="sd">        it by setting it to `True` if you want it.</span>

<span class="sd">        This is generally the most desired and convenient behaviour,</span>
<span class="sd">        and will work for link previews and message buttons.</span>
<span class="sd">    """</span>
    <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">msg</span><span class="o">.</span><span class="n">raw_text</span><span class="p">:</span>
            <span class="k">return</span> <span class="k">await</span> <span class="n">msg</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.forward_to">
<code class="highlight language-python">
forward_to<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.forward_to" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Forwards the entire album. Shorthand for
<code>telethon.client.messages.MessageMethods.forward_messages</code>
with both <code>messages</code> and <code>from_peer</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>255
256
257
258
259
260
261
262
263
264
265</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">forward_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Forwards the entire album. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.forward_messages`</span>
<span class="sd">    with both ``messages`` and ``from_peer`` already set.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'messages'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'as_album'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">'from_peer'</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">()</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">forward_messages</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.get_reply_message">
<code class="highlight language-python">
get_reply_message<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.get_reply_message" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>
that this album is replying to, or <code>None</code>.</p>
<p>The result will be cached after its first use.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>230
231
232
233
234
235
236
237</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_reply_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    The `Message &lt;telethon.tl.custom.message.Message&gt;`</span>
<span class="sd">    that this album is replying to, or `None`.</span>

<span class="sd">    The result will be cached after its first use.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get_reply_message</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.mark_read">
<code class="highlight language-python">
mark_read<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.mark_read" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Marks the entire album as read. Shorthand for
<code>client.send_read_acknowledge()
&lt;telethon.client.messages.MessageMethods.send_read_acknowledge&gt;</code>
with both <code>entity</code> and <code>message</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>309
310
311
312
313
314
315
316
317
318</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">mark_read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Marks the entire album as read. Shorthand for</span>
<span class="sd">    `client.send_read_acknowledge()</span>
<span class="sd">    &lt;telethon.client.messages.MessageMethods.send_read_acknowledge&gt;`</span>
<span class="sd">    with both ``entity`` and ``message`` already set.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_read_acknowledge</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="n">max_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.pin">
<code class="highlight language-python">
pin<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.pin" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Pins the first photo in the album. Shorthand for
<code>telethon.client.messages.MessageMethods.pin_message</code>
with both <code>entity</code> and <code>message</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>320
321
322
323
324
325
326</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">pin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">notify</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Pins the first photo in the album. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.pin_message`</span>
<span class="sd">    with both ``entity`` and ``message`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pin</span><span class="p">(</span><span class="n">notify</span><span class="o">=</span><span class="n">notify</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.reply">
<code class="highlight language-python">
reply<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.reply" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Replies to the first photo in the album (as a reply). Shorthand
for <code>telethon.client.messages.MessageMethods.send_message</code>
with both <code>entity</code> and <code>reply_to</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>247
248
249
250
251
252
253</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Replies to the first photo in the album (as a reply). Shorthand</span>
<span class="sd">    for `telethon.client.messages.MessageMethods.send_message`</span>
<span class="sd">    with both ``entity`` and ``reply_to`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.album.Album.Event.respond">
<code class="highlight language-python">
respond<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.Event.respond" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Responds to the album (not as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code>
with <code>entity</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>239
240
241
242
243
244
245</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Responds to the album (not as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message`</span>
<span class="sd">    with ``entity`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.album.Album.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">others</span><span class="p">:</span>
        <span class="k">return</span>  <span class="c1"># We only care about albums which come inside the same Updates</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span>
                  <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">)):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># We don't care about MessageService's here</span>

        <span class="n">group</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">grouped_id</span>
        <span class="k">if</span> <span class="n">group</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>  <span class="c1"># It must be grouped</span>

        <span class="c1"># Check whether we are supposed to skip this update, and</span>
        <span class="c1"># if we do also remove it from the ignore list since we</span>
        <span class="c1"># won't need to check against it again.</span>
        <span class="k">if</span> <span class="n">_IGNORE_DICT</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">update</span><span class="p">),</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="c1"># Check if the ignore list is too big, and if it is clean it</span>
        <span class="c1"># TODO time could technically go backwards; time is not monotonic</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">_IGNORE_DICT</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">_IGNORE_MAX_SIZE</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">_IGNORE_DICT</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">now</span> <span class="o">-</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">_IGNORE_MAX_AGE</span><span class="p">]:</span>
                <span class="k">del</span> <span class="n">_IGNORE_DICT</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="c1"># Add the other updates to the ignore list</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">others</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">u</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">update</span><span class="p">:</span>
                <span class="n">_IGNORE_DICT</span><span class="p">[</span><span class="nb">id</span><span class="p">(</span><span class="n">u</span><span class="p">)]</span> <span class="o">=</span> <span class="n">now</span>

        <span class="c1"># Figure out which updates share the same group and use those</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">([</span>
            <span class="n">u</span><span class="o">.</span><span class="n">message</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">others</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">))</span>
                <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">u</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">grouped_id</span> <span class="o">==</span> <span class="n">group</span><span class="p">)</span>
        <span class="p">])</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.album.Album.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.album.Album.filter" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\album.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>138
139
140
141</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="c1"># Albums with less than two messages require a few hacks to work.</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">messages</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.album.AlbumHack">
<code>AlbumHack</code>
<a class="headerlink" href="#telethon.events.album.AlbumHack" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>When receiving an album from a different data-center, they will come in
separate <code>Updates</code>, so we need to temporarily remember them for a while
and only after produce the event.</p>
<p>Of course events are not designed for this kind of wizardy, so this is
a dirty hack that gets the job done.</p>
<p>When cleaning up the code base we may want to figure out a better way
to do this, or just leave the album problem to the users; the update
handling code is bad enough as it is.</p>
<div class="doc doc-children">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.callbackquery">
<code>callbackquery</code>
<a class="headerlink" href="#telethon.events.callbackquery" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery">
<code>CallbackQuery</code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever you sign in as a bot and a user
clicks one of the inline buttons on your messages.</p>
<p>Note that the <code>chats</code> parameter will <strong>not</strong> work with normal
IDs or peers if the clicked inline button comes from a "via bot"
message. The <code>chats</code> parameter also supports checking against the
<code>chat_instance</code> which should be used for inline callbacks.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data</code></td>
<td><code>`bytes`, `str`, `callable`</code></td>
<td>
<p>If set, the inline button payload data must match this data.
A UTF-8 string can also be given, a regex or a callable. For
instance, to check against <code>'data_1'</code> and <code>'data_2'</code> you
can use <code>re.compile(b'data_')</code>.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>pattern</code></td>
<td><code>`bytes`, `str`, `callable`, `Pattern`</code></td>
<td>
<p>If set, only buttons with payload matching this pattern will be handled.
You can specify a regex-like string which will be matched
against the payload data, a callable function that returns <code>True</code>
if a the payload data is acceptable, or a compiled regex pattern.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span><span class="p">,</span> <span class="n">Button</span>

    <span class="c1"># Handle all callback queries and check data inside the handler</span>
    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">CallbackQuery</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">'yes'</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">answer</span><span class="p">(</span><span class="s1">'Correct answer!'</span><span class="p">)</span>

    <span class="c1"># Handle only callback queries with data being b'no'</span>
    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">CallbackQuery</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="sa">b</span><span class="s1">'no'</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Pop-up message with alert</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">answer</span><span class="p">(</span><span class="s1">'Wrong answer!'</span><span class="p">,</span> <span class="n">alert</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

    <span class="c1"># Send a message with buttons users can click</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
        <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s1">'Yes or no?'</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="p">[</span>
            <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'Yes!'</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'yes'</span><span class="p">),</span>
            <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">'Nope'</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'no'</span><span class="p">)</span>
        <span class="p">])</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Represents the event of a new callback query.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>query (:tl:<code>UpdateBotCallbackQuery</code>):
    The original :tl:<code>UpdateBotCallbackQuery</code>.</p>
<p>data_match (<code>obj</code>, optional):
    The object returned by the <code>data=</code> parameter
    when creating the event builder, if any. Similar
    to <code>pattern_match</code> for the new message event.</p>
<p>pattern_match (<code>obj</code>, optional):
    Alias for <code>data_match</code>.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.chat_instance">
<code class="highlight">
chat_instance        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.chat_instance" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Unique identifier for the chat where the callback occurred.
Useful for high scores in games.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.data">
<code class="highlight">
data        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.data" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the data payload from the original inline button.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.id">
<code class="highlight">
id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.id" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the query ID. The user clicking the inline
button is the one who generated this random ID.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.message_id">
<code class="highlight">
message_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.message_id" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the message ID to which the clicked inline button belongs.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.via_inline">
<code class="highlight">
via_inline        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.via_inline" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Whether this callback was generated from an inline button sent
via an inline query or not. If the bot sent the message itself
with buttons, and one of those is clicked, this will be <code>False</code>.
If a user sent the message coming from an inline query to the
bot, and one of those is clicked, this will be <code>True</code>.</p>
<p>If it's <code>True</code>, it's likely that the bot is <strong>not</strong> in the
chat, so methods like <code>respond</code> or <code>delete</code> won't work (but
<code>edit</code> will always work).</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.answer">
<code class="highlight language-python">
answer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.answer" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Answers the callback query (and stops the loading circle).</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>message</code></td>
<td><code>`str`</code></td>
<td>
<p>The toast message to show feedback to the user.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>cache_time</code></td>
<td><code>`int`</code></td>
<td>
<p>For how long this result should be cached on
the user's client. Defaults to 0 for no cache.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>url</code></td>
<td><code>`str`</code></td>
<td>
<p>The URL to be opened in the user's client. Note that
the only valid URLs are those of games your bot has,
or alternatively a 't.me/your_bot?start=xyz' parameter.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>alert</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether an alert (a pop-up dialog) should be used
instead of showing a toast. Defaults to <code>False</code>.</p>
</td>
<td><code>False</code></td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">answer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">alert</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Answers the callback query (and stops the loading circle).</span>

<span class="sd">    Args:</span>
<span class="sd">        message (`str`, optional):</span>
<span class="sd">            The toast message to show feedback to the user.</span>

<span class="sd">        cache_time (`int`, optional):</span>
<span class="sd">            For how long this result should be cached on</span>
<span class="sd">            the user's client. Defaults to 0 for no cache.</span>

<span class="sd">        url (`str`, optional):</span>
<span class="sd">            The URL to be opened in the user's client. Note that</span>
<span class="sd">            the only valid URLs are those of games your bot has,</span>
<span class="sd">            or alternatively a 't.me/your_bot?start=xyz' parameter.</span>

<span class="sd">        alert (`bool`, optional):</span>
<span class="sd">            Whether an alert (a pop-up dialog) should be used</span>
<span class="sd">            instead of showing a toast. Defaults to `False`.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_answered</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_answered</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">(</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SetBotCallbackAnswerRequest</span><span class="p">(</span>
            <span class="n">query_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_id</span><span class="p">,</span>
            <span class="n">cache_time</span><span class="o">=</span><span class="n">cache_time</span><span class="p">,</span>
            <span class="n">alert</span><span class="o">=</span><span class="n">alert</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">message</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.delete">
<code class="highlight language-python">
delete<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.delete" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Deletes the message. Shorthand for
<code>telethon.client.messages.MessageMethods.delete_messages</code> with
<code>entity</code> and <code>message_ids</code> already set.</p>
<p>If you need to delete more than one message at once, don't use
this <code>delete</code> method. Use a
<code>telethon.client.telegramclient.TelegramClient</code> instance directly.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>This method will likely fail if <code>via_inline</code> is <code>True</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes the message. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.delete_messages` with</span>
<span class="sd">    ``entity`` and ``message_ids`` already set.</span>

<span class="sd">    If you need to delete more than one message at once, don't use</span>
<span class="sd">    this `delete` method. Use a</span>
<span class="sd">    `telethon.client.telegramclient.TelegramClient` instance directly.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    This method will likely fail if `via_inline` is `True`.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">],</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.edit">
<code class="highlight language-python">
edit<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.edit" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Edits the message. Shorthand for
<code>telethon.client.messages.MessageMethods.edit_message</code> with
the <code>entity</code> set to the correct :tl:<code>InputBotInlineMessageID</code>.</p>
<p>Returns <code>True</code> if the edit was successful.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>.. note::</p>
<div class="codehilite">
<pre><span></span><code><span class="err">This method won't respect the previous message unlike</span>
<span class="err">`Message.edit &lt;telethon.tl.custom.message.Message.edit&gt;`,</span>
<span class="err">since the message object is normally not present.</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">edit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Edits the message. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.edit_message` with</span>
<span class="sd">    the ``entity`` set to the correct :tl:`InputBotInlineMessageID`.</span>

<span class="sd">    Returns `True` if the edit was successful.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    .. note::</span>

<span class="sd">        This method won't respect the previous message unlike</span>
<span class="sd">        `Message.edit &lt;telethon.tl.custom.message.Message.edit&gt;`,</span>
<span class="sd">        since the message object is normally not present.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InputBotInlineMessageID</span><span class="p">):</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">edit_message</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">edit_message</span><span class="p">(</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span><span class="p">,</span>
            <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.get_message">
<code class="highlight language-python">
get_message<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.get_message" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the message to which the clicked inline button belongs.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns the message to which the clicked inline button belongs.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">chat</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_channel</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_message</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span>
            <span class="n">chat</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_id</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_message</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.reply">
<code class="highlight language-python">
reply<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.reply" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Replies to the message (as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
both <code>entity</code> and <code>reply_to</code> already set.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>This method will likely fail if <code>via_inline</code> is <code>True</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>283
284
285
286
287
288
289
290
291
292
293
294
295
296</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Replies to the message (as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    both ``entity`` and ``reply_to`` already set.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    This method will likely fail if `via_inline` is `True`.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="n">kwargs</span><span class="p">[</span><span class="s1">'reply_to'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">msg_id</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.Event.respond">
<code class="highlight language-python">
respond<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.Event.respond" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Responds to the message (not as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
<code>entity</code> already set.</p>
<p>This method also creates a task to <code>answer</code> the callback.</p>
<p>This method will likely fail if <code>via_inline</code> is <code>True</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>269
270
271
272
273
274
275
276
277
278
279
280
281</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Responds to the message (not as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    ``entity`` already set.</span>

<span class="sd">    This method also creates a task to `answer` the callback.</span>

<span class="sd">    This method will likely fail if `via_inline` is `True`.</span>
<span class="sd">    """</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">answer</span><span class="p">())</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>89
90
91
92
93
94
95
96
97
98</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateBotCallbackQuery</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">peer</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">msg_id</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateInlineBotCallbackQuery</span><span class="p">):</span>
        <span class="c1"># See https://github.com/LonamiWebs/Telethon/pull/1005</span>
        <span class="c1"># The long message ID is actually just msg_id + peer_id</span>
        <span class="n">mid</span><span class="p">,</span> <span class="n">pid</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">'&lt;ii'</span><span class="p">,</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">'&lt;q'</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">msg_id</span><span class="o">.</span><span class="n">id</span><span class="p">))</span>
        <span class="n">peer</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="o">-</span><span class="n">pid</span><span class="p">)</span> <span class="k">if</span> <span class="n">pid</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerUser</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">peer</span><span class="p">,</span> <span class="n">mid</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.callbackquery.CallbackQuery.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.callbackquery.CallbackQuery.filter" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\callbackquery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="c1"># We can't call super().filter(...) because it ignores chat_instance</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_no_check</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">event</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">inside</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">chat_instance</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span><span class="p">:</span>
            <span class="n">inside</span> <span class="o">|=</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span>

        <span class="k">if</span> <span class="n">inside</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">blacklist_chats</span><span class="p">:</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">):</span>
            <span class="n">event</span><span class="o">.</span><span class="n">data_match</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">data_match</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">data</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">:</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span>
        <span class="c1"># Return the result of func directly as it may need to be awaited</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.chataction">
<code>chataction</code>
<a class="headerlink" href="#telethon.events.chataction" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.chataction.ChatAction">
<code>ChatAction</code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs on certain chat actions:</p>
<ul>
<li>Whenever a new chat is created.</li>
<li>Whenever a chat's title or photo is changed or removed.</li>
<li>Whenever a new message is pinned.</li>
<li>Whenever a user joins or is added to the group.</li>
<li>Whenever a user is removed or leaves a group if it has
  less than 50 members or the removed user was a bot.</li>
</ul>
<p>Note that "chat" refers to "small group, megagroup and broadcast
channel", whereas "group" refers to "small group and megagroup" only.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">ChatAction</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Welcome every new user</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">user_joined</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">'Welcome to the group!'</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Represents the event of a new chat action.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>action_message  (<code>MessageAction &lt;https://tl.telethon.dev/types/message_action.html&gt;</code>_):
    The message invoked by this Chat Action.</p>
<p>new_pin (<code>bool</code>):
    <code>True</code> if there is a new pin.</p>
<p>new_photo (<code>bool</code>):
    <code>True</code> if there's a new chat photo (or it was removed).</p>
<p>photo (:tl:<code>Photo</code>, optional):
    The new photo (or <code>None</code> if it was removed).</p>
<p>user_added (<code>bool</code>):
    <code>True</code> if the user was added by some other.</p>
<p>user_joined (<code>bool</code>):
    <code>True</code> if the user joined on their own.</p>
<p>user_left (<code>bool</code>):
    <code>True</code> if the user left on their own.</p>
<p>user_kicked (<code>bool</code>):
    <code>True</code> if the user was kicked by some other.</p>
<p>created (<code>bool</code>, optional):
    <code>True</code> if this chat was just created.</p>
<p>new_title (<code>str</code>, optional):
    The new title string for the chat, if applicable.</p>
<p>unpin (<code>bool</code>):
    <code>True</code> if the existing pin gets unpinned.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.added_by">
<code class="highlight">
added_by        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.added_by" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The user who added <code>users</code>, if applicable (<code>None</code> otherwise).</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.input_user">
<code class="highlight">
input_user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.input_user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Input version of the <code>self.user</code> property.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.input_users">
<code class="highlight">
input_users        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.input_users" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Input version of the <code>self.users</code> property.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.kicked_by">
<code class="highlight">
kicked_by        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.kicked_by" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The user who kicked <code>users</code>, if applicable (<code>None</code> otherwise).</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.user">
<code class="highlight">
user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The first user that takes part in this action. For example, who joined.</p>
<p>Might be <code>None</code> if the information can't be retrieved or
there is no user taking part.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.user_id">
<code class="highlight">
user_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.user_id" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the marked signed ID of the first user, if any.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.user_ids">
<code class="highlight">
user_ids        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.user_ids" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the marked signed ID of the users, if any.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.users">
<code class="highlight">
users        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.users" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>A list of users that take part in this action. For example, who joined.</p>
<p>Might be empty if the information can't be retrieved or there
are no users taking part.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.delete">
<code class="highlight language-python">
delete<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.delete" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Deletes the chat action message. You're responsible for checking
whether you have the permission to do so, or to except the error
otherwise. Shorthand for
<code>telethon.client.messages.MessageMethods.delete_messages</code> with
<code>entity</code> and <code>message_ids</code> already set.</p>
<p>Does nothing if no message action triggered this event.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Deletes the chat action message. You're responsible for checking</span>
<span class="sd">    whether you have the permission to do so, or to except the error</span>
<span class="sd">    otherwise. Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.delete_messages` with</span>
<span class="sd">    ``entity`` and ``message_ids`` already set.</span>

<span class="sd">    Does nothing if no message action triggered this event.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">],</span>
        <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_added_by">
<code class="highlight language-python">
get_added_by<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_added_by" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns <code>added_by</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>282
283
284
285
286
287
288
289</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_added_by</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `added_by` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">added_by</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_entity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_added_by</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_input_user">
<code class="highlight language-python">
get_input_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_input_user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns <code>input_user</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>338
339
340
341
342
343</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `input_user` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_users</span> <span class="ow">or</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_users</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_input_users">
<code class="highlight language-python">
get_input_users<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_input_users" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns <code>input_users</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>413
414
415
416
417
418
419
420
421
422
423
424
425
426
427</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `input_users` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># Note: we access the property first so that it fills if needed</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">input_users</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">))</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">get_input_peer</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">action_entities</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UserEmpty</span><span class="p">))]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_users</span> <span class="ow">or</span> <span class="p">[]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_kicked_by">
<code class="highlight language-python">
get_kicked_by<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_kicked_by" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns <code>kicked_by</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>303
304
305
306
307
308
309
310</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_kicked_by</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `kicked_by` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">kicked_by</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_entity</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_kicked_by</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_pinned_message">
<code class="highlight language-python">
get_pinned_message<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_pinned_message" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>If <code>new_pin</code> is <code>True</code>, this returns the <code>Message
&lt;telethon.tl.custom.message.Message&gt;</code> object that was pinned.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>254
255
256
257
258
259
260
261
262
263
264
265
266
267
268</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_pinned_message</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    If ``new_pin`` is `True`, this returns the `Message</span>
<span class="sd">    &lt;telethon.tl.custom.message.Message&gt;` object that was pinned.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>\
            <span class="ow">and</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_input_chat</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pinned_message</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_user">
<code class="highlight language-python">
get_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns <code>user</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>323
324
325
326
327
328</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `user` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="ow">or</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_users</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_users</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.get_users">
<code class="highlight language-python">
get_users<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.get_users" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns <code>users</code> but will make an API call if necessary.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>373
374
375
376
377
378
379
380
381
382
383
384
385
386
387</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_users</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `users` but will make an API call if necessary.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="c1"># Note: we access the property first so that it fills if needed</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">users</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_users</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_user_ids</span><span class="p">))</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">_reload_message</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_users</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">action_entities</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">User</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UserEmpty</span><span class="p">))]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_users</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.reply">
<code class="highlight language-python">
reply<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.reply" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Replies to the chat action message (as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
both <code>entity</code> and <code>reply_to</code> already set.</p>
<p>Has the same effect as <code>respond</code> if there is no message.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>221
222
223
224
225
226
227
228
229
230
231
232
233
234</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Replies to the chat action message (as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    both ``entity`` and ``reply_to`` already set.</span>

<span class="sd">    Has the same effect as `respond` if there is no message.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="p">:</span>
        <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">kwargs</span><span class="p">[</span><span class="s1">'reply_to'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">action_message</span><span class="o">.</span><span class="n">id</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.chataction.ChatAction.Event.respond">
<code class="highlight language-python">
respond<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.Event.respond" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Responds to the chat action message (not as a reply). Shorthand for
<code>telethon.client.messages.MessageMethods.send_message</code> with
<code>entity</code> already set.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>212
213
214
215
216
217
218
219</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">respond</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Responds to the chat action message (not as a reply). Shorthand for</span>
<span class="sd">    `telethon.client.messages.MessageMethods.send_message` with</span>
<span class="sd">    ``entity`` already set.</span>
<span class="sd">    """</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">(),</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.chataction.ChatAction.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.chataction.ChatAction.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\chataction.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChannelPinnedMessage</span><span class="p">)</span> <span class="ow">and</span> <span class="n">update</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># Telegram does not always send</span>
        <span class="c1"># UpdateChannelPinnedMessage for new pins</span>
        <span class="c1"># but always for unpin, with update.id = 0</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">unpin</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatPinnedMessage</span><span class="p">)</span> <span class="ow">and</span> <span class="n">update</span><span class="o">.</span><span class="n">id</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
                         <span class="n">unpin</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatParticipantAdd</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
                         <span class="n">added_by</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">inviter_id</span> <span class="ow">or</span> <span class="kc">True</span><span class="p">,</span>
                         <span class="n">users</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatParticipantDelete</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
                         <span class="n">kicked_by</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                         <span class="n">users</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChannel</span><span class="p">):</span>
        <span class="c1"># We rely on the fact that update._entities is set by _process_update</span>
        <span class="c1"># This update only has the channel ID, and Telegram *should* have sent</span>
        <span class="c1"># the entity in the Updates.chats list. If it did, check Channel.left</span>
        <span class="c1"># to determine what happened.</span>
        <span class="n">peer</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="n">channel</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">_entities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_peer_id</span><span class="p">(</span><span class="n">peer</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">channel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">ChannelForbidden</span><span class="p">)</span> <span class="ow">or</span> <span class="n">channel</span><span class="o">.</span><span class="n">left</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span>
                                 <span class="n">kicked_by</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">peer</span><span class="p">,</span>
                                 <span class="n">added_by</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">elif</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="p">(</span>
            <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">))</span>
          <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageService</span><span class="p">)):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">action</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatJoinedByLink</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">added_by</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatAddUser</span><span class="p">):</span>
            <span class="c1"># If a user adds itself, it means they joined</span>
            <span class="n">added_by</span> <span class="o">=</span> <span class="p">([</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">]</span> <span class="o">==</span> <span class="n">action</span><span class="o">.</span><span class="n">users</span><span class="p">)</span> <span class="ow">or</span> <span class="n">msg</span><span class="o">.</span><span class="n">from_id</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">added_by</span><span class="o">=</span><span class="n">added_by</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">users</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatDeleteUser</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">kicked_by</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span> <span class="ow">or</span> <span class="kc">True</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">user_id</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatCreate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">users</span><span class="p">,</span>
                             <span class="n">created</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">new_title</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChannelCreate</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">created</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_title</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatEditTitle</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_title</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatEditPhoto</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_photo</span><span class="o">=</span><span class="n">action</span><span class="o">.</span><span class="n">photo</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionChatDeletePhoto</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_photo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">MessageActionPinMessage</span><span class="p">)</span> <span class="ow">and</span> <span class="n">msg</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">:</span>
            <span class="c1"># Seems to not be reliable on unpins, but when pinning</span>
            <span class="c1"># we prefer this because we know who caused it.</span>
            <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span>
                             <span class="n">users</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
                             <span class="n">new_pin</span><span class="o">=</span><span class="n">msg</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.common">
<code>common</code>
<a class="headerlink" href="#telethon.events.common" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.common.EventBuilder">
<code>EventBuilder</code>
<a class="headerlink" href="#telethon.events.common.EventBuilder" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>The common event builder, with builtin support to filter per chat.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>chats</code></td>
<td><code>`entity`</code></td>
<td>
<p>May be one or more entities (username/peer/etc.), preferably IDs.
By default, only matching chats will be handled.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>blacklist_chats</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether to treat the chats as a blacklist instead of
as a whitelist (default). This means that every chat
will be handled <em>except</em> those specified in <code>chats</code>
which will be ignored if <code>blacklist_chats=True</code>.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>func</code></td>
<td><code>`callable`</code></td>
<td>
<p>A callable (async or not) function that should accept the event as input
parameter, and return a value indicating whether the event
should be dispatched or not (any truthy value will do, it
does not need to be a <code>bool</code>). It works like a custom filter:</p>
<p>.. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">@client.on(events.NewMessage(func=lambda e: e.is_private))</span>
<span class="err">async def handler(event):</span>
<span class="err">    pass  # code here</span>
</code></pre>
</div>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.common.EventBuilder.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.common.EventBuilder.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>76
77
78
79
80
81
82
83
84
85
86
87</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Builds an event for the given update if possible, or returns None.</span>

<span class="sd">    `others` are the rest of updates that came in the same container</span>
<span class="sd">    as the current `update`.</span>

<span class="sd">    `self_id` should be the current user's ID, since it is required</span>
<span class="sd">    for some events which lack this information but still need it.</span>
<span class="sd">    """</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.common.EventBuilder.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.common.EventBuilder.filter" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns a truthy value if the event passed the filter and should be</span>
<span class="sd">    used, or falsy otherwise. The return value may need to be awaited.</span>

<span class="sd">    The events must have been resolved before this can be called.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Note: the `event.chat_id` property checks if it's `None` for us</span>
        <span class="n">inside</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">chats</span>
        <span class="k">if</span> <span class="n">inside</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">blacklist_chats</span><span class="p">:</span>
            <span class="c1"># If this chat matches but it's a blacklist ignore.</span>
            <span class="c1"># If it doesn't match but it's a whitelist ignore.</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># Return the result of func directly as it may need to be awaited</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.common.EventBuilder.resolve">
<code class="highlight language-python">
resolve<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.common.EventBuilder.resolve" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Helper method to allow event builders to be resolved before usage</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
    <span class="sd">"""Helper method to allow event builders to be resolved before usage"""</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_lock</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_lock</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Lock</span><span class="p">(</span><span class="n">loop</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_lock</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.common.EventCommon">
<code>EventCommon</code>
<a class="headerlink" href="#telethon.events.common.EventCommon" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Intermediate class with common things to all events.</p>
<p>Remember that this class implements <code>ChatGetter
&lt;telethon.tl.custom.chatgetter.ChatGetter&gt;</code> which
means you have access to all chat properties and methods.</p>
<p>In addition, you can access the <code>original_update</code>
field which contains the original :tl:<code>Update</code>.</p>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h4 class="doc doc-heading" id="telethon.events.common.EventCommon.client">
<code class="highlight">
client        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.common.EventCommon.client" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>The <code>telethon.TelegramClient</code> that created this event.</p>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-function">
<h3 class="doc doc-heading" id="telethon.events.common.name_inner_event">
<code class="highlight language-python">
name_inner_event<span class="p">(</span><span class="bp">cls</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.common.name_inner_event" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Decorator to rename cls.Event 'Event' as 'cls.Event'</p>
<details class="quote">
<summary>Source code in <code>telethon\events\common.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>181
182
183
184
185
186
187</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">name_inner_event</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">"""Decorator to rename cls.Event 'Event' as 'cls.Event'"""</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">'Event'</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">_event_name</span> <span class="o">=</span> <span class="s1">'</span><span class="si">{}</span><span class="s1">.Event'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">'Class </span><span class="si">{}</span><span class="s1"> does not have a inner Event'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">cls</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">cls</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.inlinequery">
<code>inlinequery</code>
<a class="headerlink" href="#telethon.events.inlinequery" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery">
<code>InlineQuery</code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever you sign in as a bot and a user
sends an inline query such as <code>@bot query</code>.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>users</code></td>
<td><code>`entity`</code></td>
<td>
<p>May be one or more entities (username/peer/etc.), preferably IDs.
By default, only inline queries from these users will be handled.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>blacklist_users</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether to treat the users as a blacklist instead of
as a whitelist (default). This means that every chat
will be handled <em>except</em> those specified in <code>users</code>
which will be ignored if <code>blacklist_users=True</code>.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>pattern</code></td>
<td><code>`str`, `callable`, `Pattern`</code></td>
<td>
<p>If set, only queries matching this pattern will be handled.
You can specify a regex-like string which will be matched
against the message, a callable function that returns <code>True</code>
if a message is acceptable, or a compiled regex pattern.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">InlineQuery</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="n">builder</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">builder</span>

        <span class="c1"># Two options (convert user text to UPPERCASE or lowercase)</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">answer</span><span class="p">([</span>
            <span class="n">builder</span><span class="o">.</span><span class="n">article</span><span class="p">(</span><span class="s1">'UPPERCASE'</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">upper</span><span class="p">()),</span>
            <span class="n">builder</span><span class="o">.</span><span class="n">article</span><span class="p">(</span><span class="s1">'lowercase'</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()),</span>
        <span class="p">])</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Represents the event of a new callback query.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>query (:tl:<code>UpdateBotInlineQuery</code>):
    The original :tl:<code>UpdateBotInlineQuery</code>.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Make</span> <span class="n">sure</span> <span class="k">to</span> <span class="n">access</span> <span class="n">the</span> <span class="ss">`text`</span> <span class="n">property</span> <span class="n">of</span> <span class="n">the</span> <span class="n">query</span> <span class="k">if</span>
<span class="n">you</span> <span class="n">want</span> <span class="n">the</span> <span class="kt">text</span> <span class="n">rather</span> <span class="n">than</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">query</span> <span class="n">object</span><span class="p">.</span>
</code></pre>
</div>
<p>pattern_match (<code>obj</code>, optional):
    The resulting object from calling the passed <code>pattern</code>
    function, which is <code>re.compile(...).match</code> by default.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.builder">
<code class="highlight">
builder        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.builder" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns a new <code>InlineBuilder
&lt;telethon.tl.custom.inlinebuilder.InlineBuilder&gt;</code> instance.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.geo">
<code class="highlight">
geo        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.geo" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>If the user location is requested when using inline mode
and the user's device is able to send it, this will return
the :tl:<code>GeoPoint</code> with the position of the user.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.id">
<code class="highlight">
id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.id" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the unique identifier for the query ID.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.offset">
<code class="highlight">
offset        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.offset" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The string the user's client used as an offset for the query.
This will either be empty or equal to offsets passed to <code>answer</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.text">
<code class="highlight">
text        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.text" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the text the user used to make the inline query.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.Event.answer">
<code class="highlight language-python">
answer<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">gallery</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">next_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">switch_pm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">switch_pm_param</span><span class="o">=</span><span class="s1">''</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.Event.answer" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Answers the inline query with the given results.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>results</code></td>
<td><code>`list`</code></td>
<td>
<p>A list of :tl:<code>InputBotInlineResult</code> to use.
You should use <code>builder</code> to create these:</p>
<p>.. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code><span class="err">builder = inline.builder</span>
<span class="err">r1 = builder.article('Be nice', text='Have a nice day')</span>
<span class="err">r2 = builder.article('Be bad', text="I don't like you")</span>
<span class="err">await inline.answer([r1, r2])</span>
</code></pre>
</div>
<p>You can send up to 50 results as documented in
<a href="https://core.telegram.org/bots/api#answerinlinequery">https://core.telegram.org/bots/api#answerinlinequery</a>.
Sending more will raise <code>ResultsTooMuchError</code>,
and you should consider using <code>next_offset</code> to
paginate them.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>cache_time</code></td>
<td><code>`int`</code></td>
<td>
<p>For how long this result should be cached on
the user's client. Defaults to 0 for no cache.</p>
</td>
<td><code>0</code></td>
</tr>
<tr>
<td><code>gallery</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether the results should show as a gallery (grid) or not.</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>next_offset</code></td>
<td><code>`str`</code></td>
<td>
<p>The offset the client will send when the user scrolls the 
results and it repeats the request.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>private</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether the results should be cached by Telegram
(not private) or by the user's client (private).</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>switch_pm</code></td>
<td><code>`str`</code></td>
<td>
<p>If set, this text will be shown in the results
to allow the user to switch to private messages.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>switch_pm_param</code></td>
<td><code>`str`</code></td>
<td>
<p>Optional parameter to start the bot with if
<code>switch_pm</code> was used.</p>
</td>
<td><code>''</code></td>
</tr>
</tbody>
</table>
<div class="codehilite">
<pre><span></span><code><span class="p">..</span> <span class="s s-Atom">code</span><span class="o">-</span><span class="nn">block</span><span class="p">:</span><span class="s s-Atom">:</span> <span class="s s-Atom">python</span>

    <span class="s s-Atom">@bot</span><span class="p">.</span><span class="nf">on</span><span class="p">(</span><span class="s s-Atom">events</span><span class="p">.</span><span class="nv">InlineQuery</span><span class="p">)</span>
    <span class="s s-Atom">async</span> <span class="s s-Atom">def</span> <span class="nf">handler</span><span class="p">(</span><span class="s s-Atom">event</span><span class="p">)</span><span class="s s-Atom">:</span>
        <span class="s s-Atom">builder</span> <span class="o">=</span> <span class="s s-Atom">event</span><span class="p">.</span><span class="s s-Atom">builder</span>

        <span class="s s-Atom">rev_text</span> <span class="o">=</span> <span class="s s-Atom">event</span><span class="p">.</span><span class="s s-Atom">text</span><span class="p">[</span><span class="s s-Atom">::-</span><span class="mi">1</span><span class="p">]</span>
        <span class="s s-Atom">await</span> <span class="s s-Atom">event</span><span class="p">.</span><span class="nf">answer</span><span class="p">([</span>
            <span class="s s-Atom">builder</span><span class="p">.</span><span class="nf">article</span><span class="p">(</span><span class="s s-Atom">'Reverse text'</span><span class="p">,</span> <span class="s s-Atom">text</span><span class="o">=</span><span class="s s-Atom">rev_text</span><span class="p">),</span>
            <span class="s s-Atom">builder</span><span class="p">.</span><span class="nf">photo</span><span class="p">(</span><span class="s s-Atom">'/path/to/photo.jpg'</span><span class="p">)</span>
        <span class="p">])</span>
</code></pre>
</div>
<details class="quote">
<summary>Source code in <code>telethon\events\inlinequery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">answer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cache_time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
        <span class="n">gallery</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">next_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">switch_pm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">switch_pm_param</span><span class="o">=</span><span class="s1">''</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Answers the inline query with the given results.</span>

<span class="sd">    Args:</span>
<span class="sd">        results (`list`, optional):</span>
<span class="sd">            A list of :tl:`InputBotInlineResult` to use.</span>
<span class="sd">            You should use `builder` to create these:</span>

<span class="sd">            .. code-block:: python</span>

<span class="sd">                builder = inline.builder</span>
<span class="sd">                r1 = builder.article('Be nice', text='Have a nice day')</span>
<span class="sd">                r2 = builder.article('Be bad', text="I don't like you")</span>
<span class="sd">                await inline.answer([r1, r2])</span>

<span class="sd">            You can send up to 50 results as documented in</span>
<span class="sd">            https://core.telegram.org/bots/api#answerinlinequery.</span>
<span class="sd">            Sending more will raise ``ResultsTooMuchError``,</span>
<span class="sd">            and you should consider using `next_offset` to</span>
<span class="sd">            paginate them.</span>

<span class="sd">        cache_time (`int`, optional):</span>
<span class="sd">            For how long this result should be cached on</span>
<span class="sd">            the user's client. Defaults to 0 for no cache.</span>

<span class="sd">        gallery (`bool`, optional):</span>
<span class="sd">            Whether the results should show as a gallery (grid) or not.</span>

<span class="sd">        next_offset (`str`, optional):</span>
<span class="sd">            The offset the client will send when the user scrolls the </span>
<span class="sd">            results and it repeats the request.</span>

<span class="sd">        private (`bool`, optional):</span>
<span class="sd">            Whether the results should be cached by Telegram</span>
<span class="sd">            (not private) or by the user's client (private).</span>

<span class="sd">        switch_pm (`str`, optional):</span>
<span class="sd">            If set, this text will be shown in the results</span>
<span class="sd">            to allow the user to switch to private messages.</span>

<span class="sd">        switch_pm_param (`str`, optional):</span>
<span class="sd">            Optional parameter to start the bot with if</span>
<span class="sd">            `switch_pm` was used.</span>

<span class="sd">    Example:</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            @bot.on(events.InlineQuery)</span>
<span class="sd">            async def handler(event):</span>
<span class="sd">                builder = event.builder</span>

<span class="sd">                rev_text = event.text[::-1]</span>
<span class="sd">                await event.answer([</span>
<span class="sd">                    builder.article('Reverse text', text=rev_text),</span>
<span class="sd">                    builder.photo('/path/to/photo.jpg')</span>
<span class="sd">                ])</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_answered</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
        <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_as_future</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>
                   <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>

        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="n">futures</span><span class="p">,</span> <span class="n">loop</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">loop</span><span class="p">)</span>

        <span class="c1"># All futures will be in the `done` *set* that `wait` returns.</span>
        <span class="c1">#</span>
        <span class="c1"># Precisely because it's a `set` and not a `list`, it</span>
        <span class="c1"># will not preserve the order, but since all futures</span>
        <span class="c1"># completed we can use our original, ordered `list`.</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">futures</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">switch_pm</span><span class="p">:</span>
        <span class="n">switch_pm</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">InlineBotSwitchPM</span><span class="p">(</span><span class="n">switch_pm</span><span class="p">,</span> <span class="n">switch_pm_param</span><span class="p">)</span>

    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="p">(</span>
        <span class="n">functions</span><span class="o">.</span><span class="n">messages</span><span class="o">.</span><span class="n">SetInlineBotResultsRequest</span><span class="p">(</span>
            <span class="n">query_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query_id</span><span class="p">,</span>
            <span class="n">results</span><span class="o">=</span><span class="n">results</span><span class="p">,</span>
            <span class="n">cache_time</span><span class="o">=</span><span class="n">cache_time</span><span class="p">,</span>
            <span class="n">gallery</span><span class="o">=</span><span class="n">gallery</span><span class="p">,</span>
            <span class="n">next_offset</span><span class="o">=</span><span class="n">next_offset</span><span class="p">,</span>
            <span class="n">private</span><span class="o">=</span><span class="n">private</span><span class="p">,</span>
            <span class="n">switch_pm</span><span class="o">=</span><span class="n">switch_pm</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\inlinequery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>63
64
65
66</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateBotInlineQuery</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.inlinequery.InlineQuery.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.inlinequery.InlineQuery.filter" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\inlinequery.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>68
69
70
71
72
73
74
75</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span> <span class="o">=</span> <span class="n">match</span>

    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.messagedeleted">
<code>messagedeleted</code>
<a class="headerlink" href="#telethon.events.messagedeleted" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.messagedeleted.MessageDeleted">
<code>MessageDeleted</code>
<a class="headerlink" href="#telethon.events.messagedeleted.MessageDeleted" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever a message is deleted. Note that this event isn't 100%
reliable, since Telegram doesn't always notify the clients that a message
was deleted.</p>
<p>.. important::</p>
<div class="codehilite">
<pre><span></span><code><span class="n">Telegram</span> <span class="o">**</span><span class="n">does</span> <span class="k">not</span><span class="o">**</span> <span class="n">send</span> <span class="n">information</span> <span class="n">about</span> <span class="o">*</span><span class="k">where</span><span class="o">*</span> <span class="n">a</span> <span class="n">message</span>
<span class="n">was</span> <span class="n">deleted</span> <span class="k">if</span> <span class="n">it</span> <span class="n">occurs</span> <span class="k">in</span> <span class="n">private</span> <span class="n">conversations</span> <span class="k">with</span> <span class="n">other</span> <span class="n">users</span>
<span class="k">or</span> <span class="k">in</span> <span class="n">small</span> <span class="k">group</span> <span class="n">chats</span><span class="p">,</span> <span class="n">because</span> <span class="n">message</span> <span class="n">IDs</span> <span class="k">are</span> <span class="o">*</span><span class="k">unique</span><span class="o">*</span> <span class="k">and</span> <span class="n">you</span>
<span class="n">can</span> <span class="n">identify</span> <span class="n">the</span> <span class="n">chat</span> <span class="k">with</span> <span class="n">the</span> <span class="n">message</span> <span class="n">ID</span> <span class="n">alone</span> <span class="k">if</span> <span class="n">you</span> <span class="n">saved</span> <span class="n">it</span>
<span class="n">previously</span><span class="p">.</span>

<span class="n">Telethon</span> <span class="o">**</span><span class="n">does</span> <span class="k">not</span><span class="o">**</span> <span class="n">save</span> <span class="n">information</span> <span class="k">of</span> <span class="k">where</span> <span class="n">messages</span> <span class="n">occur</span><span class="p">,</span>
<span class="n">so</span> <span class="n">it</span> <span class="n">cannot</span> <span class="n">know</span> <span class="k">in</span> <span class="n">which</span> <span class="n">chat</span> <span class="n">a</span> <span class="n">message</span> <span class="n">was</span> <span class="n">deleted</span> <span class="p">(</span><span class="n">this</span> <span class="n">will</span>
<span class="k">only</span> <span class="k">work</span> <span class="k">in</span> <span class="n">channels</span><span class="p">,</span> <span class="k">where</span> <span class="n">the</span> <span class="n">channel</span> <span class="n">ID</span> <span class="o">*</span><span class="k">is</span><span class="o">*</span> <span class="n">present</span><span class="p">).</span>

<span class="n">This</span> <span class="n">means</span> <span class="n">that</span> <span class="n">the</span> <span class="o">``</span><span class="n">chats</span><span class="o">=``</span> <span class="k">parameter</span> <span class="n">will</span> <span class="k">not</span> <span class="k">work</span> <span class="n">reliably</span><span class="p">,</span>
<span class="n">unless</span> <span class="n">you</span> <span class="n">intend</span> <span class="k">on</span> <span class="n">working</span> <span class="k">with</span> <span class="n">channels</span> <span class="k">and</span> <span class="n">super</span><span class="o">-</span><span class="n">groups</span> <span class="k">only</span><span class="p">.</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageDeleted</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log all deleted message IDs</span>
        <span class="k">for</span> <span class="n">msg_id</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">deleted_ids</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">'Message'</span><span class="p">,</span> <span class="n">msg_id</span><span class="p">,</span> <span class="s1">'was deleted in'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">chat_id</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.messagedeleted.MessageDeleted.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.messagedeleted.MessageDeleted.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messagedeleted.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>38
39
40
41
42
43
44
45
46
47
48
49</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateDeleteMessages</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span>
            <span class="n">deleted_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">peer</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateDeleteChannelMessages</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span>
            <span class="n">deleted_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
            <span class="n">peer</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">)</span>
        <span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.messageedited">
<code>messageedited</code>
<a class="headerlink" href="#telethon.events.messageedited" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.messageedited.MessageEdited">
<code>MessageEdited</code>
<a class="headerlink" href="#telethon.events.messageedited.MessageEdited" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever a message is edited. Just like <code>NewMessage
&lt;telethon.events.newmessage.NewMessage&gt;</code>, you should treat
this event as a <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>.</p>
<p>.. warning::</p>
<div class="codehilite">
<pre><span></span><code><span class="k">On</span> <span class="n">channels</span><span class="p">,</span> <span class="ss">`Message.out &lt;telethon.tl.custom.message.Message&gt;`</span>
<span class="n">will</span> <span class="n">be</span> <span class="ss">`True`</span> <span class="k">if</span> <span class="n">you</span> <span class="n">sent</span> <span class="n">the</span> <span class="n">message</span> <span class="n">originally</span><span class="p">,</span> <span class="o">**</span><span class="k">not</span> <span class="k">if</span>
<span class="n">you</span> <span class="n">edited</span> <span class="n">it</span><span class="o">**!</span> <span class="n">This</span> <span class="n">can</span> <span class="n">be</span> <span class="n">dangerous</span> <span class="k">if</span> <span class="n">you</span> <span class="n">run</span> <span class="n">outgoing</span>
<span class="n">commands</span> <span class="k">on</span> <span class="n">edits</span><span class="p">.</span>

<span class="n">Some</span> <span class="n">examples</span> <span class="n">follow</span><span class="p">:</span>

<span class="o">*</span> <span class="n">You</span> <span class="n">send</span> <span class="n">a</span> <span class="n">message</span> <span class="s2">"A"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">True</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">You</span> <span class="n">edit</span> <span class="s2">"A"</span> <span class="k">to</span> <span class="s2">"B"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">True</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">Someone</span> <span class="k">else</span> <span class="n">edits</span> <span class="s2">"B"</span> <span class="k">to</span> <span class="s2">"C"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">True</span><span class="ss">``</span> <span class="p">(</span><span class="o">**</span><span class="n">be</span> <span class="n">careful</span><span class="o">!**</span><span class="p">).</span>
<span class="o">*</span> <span class="n">Someone</span> <span class="n">sends</span> <span class="s2">"X"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">False</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">Someone</span> <span class="n">edits</span> <span class="s2">"X"</span> <span class="k">to</span> <span class="s2">"Y"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">False</span><span class="ss">``</span><span class="p">.</span>
<span class="o">*</span> <span class="n">You</span> <span class="n">edit</span> <span class="s2">"Y"</span> <span class="k">to</span> <span class="s2">"Z"</span><span class="p">,</span> <span class="ss">``</span><span class="k">out</span> <span class="k">is</span> <span class="no">False</span><span class="ss">``</span><span class="p">.</span>

<span class="n">Since</span> <span class="n">there</span> <span class="n">are</span> <span class="n">useful</span> <span class="n">cases</span> <span class="k">where</span> <span class="n">you</span> <span class="n">need</span> <span class="n">the</span> <span class="k">right</span> <span class="ss">``</span><span class="k">out</span><span class="ss">``</span>
<span class="n">value</span><span class="p">,</span> <span class="n">the</span> <span class="n">library</span> <span class="n">cannot</span> <span class="n">do</span> <span class="n">anything</span> <span class="n">automatically</span> <span class="k">to</span> <span class="n">help</span> <span class="n">you</span><span class="p">.</span>
<span class="n">Instead</span><span class="p">,</span> <span class="n">consider</span> <span class="k">using</span> <span class="ss">``</span><span class="n">from_users</span><span class="o">=</span><span class="s1">'me'</span><span class="ss">``</span> <span class="p">(</span><span class="n">it</span> <span class="n">won</span><span class="err">'</span><span class="n">t</span> <span class="n">work</span> <span class="k">in</span>
<span class="n">broadcast</span> <span class="n">channels</span> <span class="n">at</span> <span class="k">all</span> <span class="n">since</span> <span class="n">the</span> <span class="n">sender</span> <span class="k">is</span> <span class="n">the</span> <span class="n">channel</span> <span class="k">and</span>
<span class="k">not</span> <span class="n">you</span><span class="p">).</span>
</code></pre>
</div>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageEdited</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log the date of new edits</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'Message'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s1">'changed at'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">date</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.messageedited.MessageEdited.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageedited.MessageEdited.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageedited.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>45
46
47
48
49</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateEditMessage</span><span class="p">,</span>
                           <span class="n">types</span><span class="o">.</span><span class="n">UpdateEditChannelMessage</span><span class="p">)):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.messageread">
<code>messageread</code>
<a class="headerlink" href="#telethon.events.messageread" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.messageread.MessageRead">
<code>MessageRead</code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever one or more messages are read in a chat.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>inbox</code></td>
<td><code>`bool`</code></td>
<td>
<p>If this argument is <code>True</code>, then when you read someone else's
messages the event will be fired. By default (<code>False</code>) only
when messages you sent are read by someone else will fire it.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageRead</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log when someone reads your messages</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'Someone has read all your messages until'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">max_id</span><span class="p">)</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">MessageRead</span><span class="p">(</span><span class="n">inbox</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Log when you read message in a chat (from your "inbox")</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">'You have read messages until'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">max_id</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Represents the event of one or more messages being read.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>max_id (<code>int</code>):
    Up to which message ID has been read. Every message
    with an ID equal or lower to it have been read.</p>
<p>outbox (<code>bool</code>):
    <code>True</code> if someone else has read your messages.</p>
<p>contents (<code>bool</code>):
    <code>True</code> if what was read were the contents of a message.
    This will be the case when e.g. you play a voice note.
    It may only be set on <code>inbox</code> events.</p>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.inbox">
<code class="highlight">
inbox        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.inbox" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if you have read someone else's messages.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.message_ids">
<code class="highlight">
message_ids        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.message_ids" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The IDs of the messages <strong>which contents'</strong> were read.</p>
<p>Use :meth:<code>is_read</code> if you need to check whether a message
was read instead checking if it's in here.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.__contains__">
<code class="highlight language-python">
__contains__<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-special"><code>special</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.__contains__" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the message(s) are read message.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>138
139
140
141
142
143</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="fm">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="sd">"""`True` if the message(s) are read message."""</span>
    <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">all</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_read</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_read</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.get_messages">
<code class="highlight language-python">
get_messages<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.get_messages" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns the list of <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>
<strong>which contents'</strong> were read.</p>
<p>Use :meth:<code>is_read</code> if you need to check whether a message
was read instead checking if it's in here.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_messages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns the list of `Message &lt;telethon.tl.custom.message.Message&gt;`</span>
<span class="sd">    **which contents'** were read.</span>

<span class="sd">    Use :meth:`is_read` if you need to check whether a message</span>
<span class="sd">    was read instead checking if it's in here.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">chat</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_chat</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">chat</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span>
                <span class="n">chat</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_message_ids</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_messages</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.messageread.MessageRead.Event.is_read">
<code class="highlight language-python">
is_read<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.Event.is_read" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Returns <code>True</code> if the given message (or its ID) has been read.</p>
<p>If a list-like argument is provided, this method will return a
list of booleans indicating which messages have been read.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>124
125
126
127
128
129
130
131
132
133
134
135
136</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">is_read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Returns `True` if the given message (or its ID) has been read.</span>

<span class="sd">    If a list-like argument is provided, this method will return a</span>
<span class="sd">    list of booleans indicating which messages have been read.</span>
<span class="sd">    """</span>
    <span class="k">if</span> <span class="n">utils</span><span class="o">.</span><span class="n">is_list_like</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">m</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="k">else</span> <span class="n">m</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">message</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">message</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
                <span class="k">else</span> <span class="n">message</span><span class="o">.</span><span class="n">id</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_id</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadHistoryInbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">peer</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadHistoryOutbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">peer</span><span class="p">,</span> <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadChannelInbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadChannelOutbox</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">update</span><span class="o">.</span><span class="n">max_id</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateReadMessagesContents</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">message_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
                         <span class="n">contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChannelReadMessagesContents</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChannel</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">channel_id</span><span class="p">),</span>
                         <span class="n">message_ids</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">messages</span><span class="p">,</span>
                         <span class="n">contents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.messageread.MessageRead.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.messageread.MessageRead.filter" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\messageread.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>57
58
59
60
61</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inbox</span> <span class="o">==</span> <span class="n">event</span><span class="o">.</span><span class="n">outbox</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.newmessage">
<code>newmessage</code>
<a class="headerlink" href="#telethon.events.newmessage" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.newmessage.NewMessage">
<code>NewMessage</code>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever a new text message or a message with media arrives.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>incoming</code></td>
<td><code>`bool`</code></td>
<td>
<p>If set to <code>True</code>, only <strong>incoming</strong> messages will be handled.
Mutually exclusive with <code>outgoing</code> (can only set one of either).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>outgoing</code></td>
<td><code>`bool`</code></td>
<td>
<p>If set to <code>True</code>, only <strong>outgoing</strong> messages will be handled.
Mutually exclusive with <code>incoming</code> (can only set one of either).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>from_users</code></td>
<td><code>`entity`</code></td>
<td>
<p>Unlike <code>chats</code>, this parameter filters the <em>senders</em> of the
message. That is, only messages <em>sent by these users</em> will be
handled. Use <code>chats</code> if you want private messages with this/these
users. <code>from_users</code> lets you filter by messages sent by <em>one or
more</em> users across the desired chats (doesn't need a list).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>forwards</code></td>
<td><code>`bool`</code></td>
<td>
<p>Whether forwarded messages should be handled or not. By default,
both forwarded and normal messages are included. If it's <code>True</code>
<em>only</em> forwards will be handled. If it's <code>False</code> only messages
that are <em>not</em> forwards will be handled.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>pattern</code></td>
<td><code>`str`, `callable`, `Pattern`</code></td>
<td>
<p>If set, only messages matching this pattern will be handled.
You can specify a regex-like string which will be matched
against the message, a callable function that returns <code>True</code>
if a message is acceptable, or a compiled regex pattern.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">import</span> <span class="nn">asyncio</span>
    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="s1">'(?i)hello.+'</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Respond whenever someone says "Hello" and something else</span>
        <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">'Hey!'</span><span class="p">)</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="n">outgoing</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s1">'!ping'</span><span class="p">))</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># Say "!pong" whenever you send "!ping", then delete both messages</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">await</span> <span class="n">event</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">'!pong'</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">delete_messages</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">chat_id</span><span class="p">,</span> <span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">id</span><span class="p">])</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="telethon.events.newmessage.NewMessage.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage.Event" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Represents the event of a new message. This event can be treated
to all effects as a <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>,
so please <strong>refer to its documentation</strong> to know what you can do
with this event.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>message (<code>Message &lt;telethon.tl.custom.message.Message&gt;</code>):
    This is the only difference with the received
    <code>Message &lt;telethon.tl.custom.message.Message&gt;</code>, and will
    return the <code>telethon.tl.custom.message.Message</code> itself,
    not the text.</p>
<div class="codehilite">
<pre><span></span><code><span class="err">See `Message &lt;telethon.tl.custom.message.Message&gt;` for</span>
<span class="err">the rest of available members and methods.</span>
</code></pre>
</div>
<p>pattern_match (<code>obj</code>):
    The resulting object from calling the passed <code>pattern</code> function.
    Here's an example using a string (defaults to regex match):</p>
<div class="codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span><span class="p">,</span> <span class="n">events</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="n">pattern</span><span class="o">=</span><span class="sa">r</span><span class="s1">'hi (\w+)!'</span><span class="p">))</span>
<span class="o">...</span> <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
<span class="o">...</span>     <span class="c1"># In this case, the result is a ``Match`` object</span>
<span class="o">...</span>     <span class="c1"># since the `str` pattern was converted into</span>
<span class="o">...</span>     <span class="c1"># the ``re.compile(pattern).match`` function.</span>
<span class="o">...</span>     <span class="k">print</span><span class="p">(</span><span class="s1">'Welcomed'</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span>
</code></pre>
</div>
</div>
<div class="doc doc-children">
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.newmessage.NewMessage.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\newmessage.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span> 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span>
                  <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">UpdateNewMessage</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateNewChannelMessage</span><span class="p">)):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">):</span>
            <span class="k">return</span>  <span class="c1"># We don't care about MessageService's here</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateShortMessage</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span>
            <span class="n">out</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
            <span class="n">mentioned</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">mentioned</span><span class="p">,</span>
            <span class="n">media_unread</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">media_unread</span><span class="p">,</span>
            <span class="n">silent</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">silent</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="c1"># Note that to_id/from_id complement each other in private</span>
            <span class="c1"># messages, depending on whether the message was outgoing.</span>
            <span class="n">to_id</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">PeerUser</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span> <span class="k">if</span> <span class="n">update</span><span class="o">.</span><span class="n">out</span> <span class="k">else</span> <span class="n">self_id</span><span class="p">),</span>
            <span class="n">from_id</span><span class="o">=</span><span class="n">self_id</span> <span class="k">if</span> <span class="n">update</span><span class="o">.</span><span class="n">out</span> <span class="k">else</span> <span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
            <span class="n">message</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
            <span class="n">date</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="n">fwd_from</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">,</span>
            <span class="n">via_bot_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">via_bot_id</span><span class="p">,</span>
            <span class="n">reply_to_msg_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">entities</span>
        <span class="p">))</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateShortChatMessage</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span>
            <span class="n">out</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">out</span><span class="p">,</span>
            <span class="n">mentioned</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">mentioned</span><span class="p">,</span>
            <span class="n">media_unread</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">media_unread</span><span class="p">,</span>
            <span class="n">silent</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">silent</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
            <span class="n">from_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">from_id</span><span class="p">,</span>
            <span class="n">to_id</span><span class="o">=</span><span class="n">types</span><span class="o">.</span><span class="n">PeerChat</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">),</span>
            <span class="n">message</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">message</span><span class="p">,</span>
            <span class="n">date</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="n">fwd_from</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">,</span>
            <span class="n">via_bot_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">via_bot_id</span><span class="p">,</span>
            <span class="n">reply_to_msg_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">reply_to_msg_id</span><span class="p">,</span>
            <span class="n">entities</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">entities</span>
        <span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Make messages sent to ourselves outgoing unless they're forwarded.</span>
    <span class="c1"># This makes it consistent with official client's appearance.</span>
    <span class="n">ori</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ori</span><span class="o">.</span><span class="n">to_id</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">PeerUser</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ori</span><span class="o">.</span><span class="n">from_id</span> <span class="o">==</span> <span class="n">ori</span><span class="o">.</span><span class="n">to_id</span><span class="o">.</span><span class="n">user_id</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">ori</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">out</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">return</span> <span class="n">event</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.newmessage.NewMessage.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.newmessage.NewMessage.filter" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\newmessage.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_no_check</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">event</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">incoming</span> <span class="ow">and</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">out</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">outgoing</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">out</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">forwards</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">forwards</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">fwd_from</span><span class="p">):</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_users</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">from_id</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">from_users</span><span class="p">:</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">message</span> <span class="ow">or</span> <span class="s1">''</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">event</span><span class="o">.</span><span class="n">pattern_match</span> <span class="o">=</span> <span class="n">match</span>

    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.raw">
<code>raw</code>
<a class="headerlink" href="#telethon.events.raw" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.raw.Raw">
<code>Raw</code>
<a class="headerlink" href="#telethon.events.raw.Raw" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Raw events are not actual events. Instead, they are the raw
:tl:<code>Update</code> object that Telegram sends. You normally shouldn't
need these.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>types</code></td>
<td><code>`list` | `tuple` | `type`</code></td>
<td>
<p>The type or types that the :tl:<code>Update</code> instance must be.
Equivalent to <code>if not isinstance(update, types): return</code>.</p>
</td>
<td><em>required</em></td>
</tr>
</tbody>
</table>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">Raw</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">update</span><span class="p">):</span>
        <span class="c1"># Print all incoming updates</span>
        <span class="k">print</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">stringify</span><span class="p">())</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.raw.Raw.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.raw.Raw.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\raw.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>44
45
46</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">update</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.raw.Raw.filter">
<code class="highlight language-python">
filter<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.raw.Raw.filter" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Returns a truthy value if the event passed the filter and should be
used, or falsy otherwise. The return value may need to be awaited.</p>
<p>The events must have been resolved before this can be called.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\raw.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>48
49
50
51
52
53</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">types</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">:</span>
            <span class="c1"># Return the result of func directly as it may need to be awaited</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">event</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.raw.Raw.resolve">
<code class="highlight language-python">
resolve<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.raw.Raw.resolve" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Helper method to allow event builders to be resolved before usage</p>
<details class="quote">
<summary>Source code in <code>telethon\events\raw.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>41
42</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resolved</span> <span class="o">=</span> <span class="kc">True</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-module">
<h2 class="doc doc-heading" id="telethon.events.userupdate">
<code>userupdate</code>
<a class="headerlink" href="#telethon.events.userupdate" title="Permanent link">¶</a></h2>
<div class="doc doc-contents">
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h3 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate">
<code>UserUpdate</code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate" title="Permanent link">¶</a></h3>
<div class="doc doc-contents">
<p>Occurs whenever a user goes online, starts typing, etc.</p>
<p>Example
    .. code-block:: python</p>
<div class="codehilite">
<pre><span></span><code>    <span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

    <span class="nd">@client.on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">UserUpdate</span><span class="p">)</span>
    <span class="n">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
        <span class="c1"># If someone is uploading, say something</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">uploading</span><span class="p">:</span>
            <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span> <span class="s1">'What are you sending?'</span><span class="p">)</span>
</code></pre>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-class">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event">
<code>Event</code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Represents the event of a user update
such as gone online, started typing, etc.</p>
<div class="admonition members">
<p class="admonition-title">Members</p>
<p>status (:tl:<code>UserStatus</code>, optional):
    The user status if the update is about going online or offline.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">You</span> <span class="n">should</span> <span class="k">check</span> <span class="n">this</span> <span class="n">attribute</span> <span class="n">first</span> <span class="k">before</span> <span class="n">checking</span> <span class="n">any</span>
<span class="n">of</span> <span class="n">the</span> <span class="n">seen</span> <span class="n">within</span> <span class="n">properties</span><span class="p">,</span> <span class="n">since</span> <span class="n">they</span> <span class="n">will</span> <span class="k">all</span> <span class="n">be</span> <span class="ss">`None`</span>
<span class="k">if</span> <span class="n">the</span> <span class="n">status</span> <span class="k">is</span> <span class="k">not</span> <span class="kt">set</span><span class="p">.</span>
</code></pre>
</div>
<p>action (:tl:<code>SendMessageAction</code>, optional):
    The "typing" action if any the user is performing if any.</p>
<div class="codehilite">
<pre><span></span><code><span class="n">You</span> <span class="n">should</span> <span class="k">check</span> <span class="n">this</span> <span class="n">attribute</span> <span class="n">first</span> <span class="k">before</span> <span class="n">checking</span> <span class="n">any</span>
<span class="n">of</span> <span class="n">the</span> <span class="n">typing</span> <span class="n">properties</span><span class="p">,</span> <span class="n">since</span> <span class="n">they</span> <span class="n">will</span> <span class="k">all</span> <span class="n">be</span> <span class="ss">`None`</span>
<span class="k">if</span> <span class="n">the</span> <span class="n">action</span> <span class="k">is</span> <span class="k">not</span> <span class="kt">set</span><span class="p">.</span>
</code></pre>
</div>
</div>
<div class="doc doc-children">
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.audio">
<code class="highlight">
audio        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.audio" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if what's being recorded/uploaded is an audio.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.cancel">
<code class="highlight">
cancel        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.cancel" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the action was cancelling other actions.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.contact">
<code class="highlight">
contact        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.contact" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded (selected) is a contact.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.document">
<code class="highlight">
document        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.document" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded is document.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.geo">
<code class="highlight">
geo        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.geo" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded is a geo.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.input_user">
<code class="highlight">
input_user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.input_user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Alias for <code>input_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.input_sender&gt;</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.last_seen">
<code class="highlight">
last_seen        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.last_seen" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Exact <code>datetime.datetime</code> when the user was last seen if known.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.online">
<code class="highlight">
online        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.online" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the user is currently online,</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.photo">
<code class="highlight">
photo        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.photo" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if what's being uploaded is a photo.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.playing">
<code class="highlight">
playing        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.playing" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the action is playing a game.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.recently">
<code class="highlight">
recently        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.recently" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the user was seen within a day.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.recording">
<code class="highlight">
recording        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.recording" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the action is recording something.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.round">
<code class="highlight">
round        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.round" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if what's being recorded/uploaded is a round video.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.typing">
<code class="highlight">
typing        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.typing" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the action is typing a message.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.until">
<code class="highlight">
until        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.until" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>The <code>datetime.datetime</code> until when the user should appear online.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.uploading">
<code class="highlight">
uploading        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.uploading" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the action is uploading something.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.user">
<code class="highlight">
user        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Alias for <code>sender &lt;telethon.tl.custom.sendergetter.SenderGetter.sender&gt;</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.user_id">
<code class="highlight">
user_id        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.user_id" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Alias for <code>sender_id &lt;telethon.tl.custom.sendergetter.SenderGetter.sender_id&gt;</code>.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.video">
<code class="highlight">
video        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.video" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if what's being recorded/uploaded is an video.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.within_months">
<code class="highlight">
within_months        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.within_months" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the user was seen within 30 days.</p>
</div>
</div>
<div class="doc doc-object doc-attribute">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.within_weeks">
<code class="highlight">
within_weeks        </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-property"><code>property</code></small>
<small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.within_weeks" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p><code>True</code> if the user was seen within 7 days.</p>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.get_input_user">
<code class="highlight language-python">
get_input_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.get_input_user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Alias for <code>get_input_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_input_sender&gt;</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\userupdate.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>132
133
134</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_input_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Alias for `get_input_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_input_sender&gt;`."""</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input_sender</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
<div class="doc doc-object doc-method">
<h5 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.Event.get_user">
<code class="highlight language-python">
get_user<span class="p">(</span><span class="bp">self</span><span class="p">)</span> </code>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.Event.get_user" title="Permanent link">¶</a></h5>
<div class="doc doc-contents">
<p>Alias for <code>get_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_sender&gt;</code>.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\userupdate.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>123
124
125</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">"""Alias for `get_sender &lt;telethon.tl.custom.sendergetter.SenderGetter.get_sender&gt;`."""</span>
    <span class="k">return</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sender</span><span class="p">()</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
<div class="doc doc-object doc-method">
<h4 class="doc doc-heading" id="telethon.events.userupdate.UserUpdate.build">
<code class="highlight language-python">
build<span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
<span class="doc doc-properties">
<small class="doc doc-property doc-property-classmethod"><code>classmethod</code></small>
</span>
<a class="headerlink" href="#telethon.events.userupdate.UserUpdate.build" title="Permanent link">¶</a></h4>
<div class="doc doc-contents">
<p>Builds an event for the given update if possible, or returns None.</p>
<p><code>others</code> are the rest of updates that came in the same container
as the current <code>update</code>.</p>
<p><code>self_id</code> should be the current user's ID, since it is required
for some events which lack this information but still need it.</p>
<details class="quote">
<summary>Source code in <code>telethon\events\userupdate.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>51
52
53
54
55
56
57
58
59
60
61
62
63</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">build</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">others</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">self_id</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateUserStatus</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
                         <span class="n">status</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateChatUserTyping</span><span class="p">):</span>
        <span class="c1"># Unfortunately, we can't know whether `chat_id`'s type</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
                         <span class="n">chat_id</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">chat_id</span><span class="p">,</span>
                         <span class="n">typing</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">update</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">UpdateUserTyping</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">update</span><span class="o">.</span><span class="n">user_id</span><span class="p">,</span>
                         <span class="n">typing</span><span class="o">=</span><span class="n">update</span><span class="o">.</span><span class="n">action</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../client/" rel="prev" title="TelegramClient">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                TelegramClient
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../custom/" rel="next" title="Custom package">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Custom package
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 Telethon
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
<div class="md-footer-social">
<a class="md-footer-social__link" href="https://github.com/LonamiWebs/Telethon" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</a>
<a class="md-footer-social__link" href="https://t.me/TelethonChat" rel="noopener" target="_blank" title="t.me">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm121.8 169.9l-40.7 191.8c-3 13.6-11.1 16.9-22.4 10.5l-62-45.7-29.9 28.8c-3.3 3.3-6.1 6.1-12.5 6.1l4.4-63.1 114.9-103.8c5-4.4-1.1-6.9-7.7-2.5l-142 89.4-61.2-19.1c-13.3-4.2-13.6-13.3 2.8-19.7l239.1-92.2c11.1-4 20.8 2.7 17.2 19.5z"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
<script src="../../assets/javascripts/bundle.5f27aba8.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "../..",
          features: ["instant", "tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>